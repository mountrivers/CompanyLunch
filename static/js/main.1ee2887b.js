/*! For license information please see main.1ee2887b.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},569:function(e,t,n){n(36)},381:function(e,t,n){"use strict";var r=n(589),i=n(297),a=n(301),o=n(774),u=n(804),s=n(145),c=n(411),l=n(467),f=n(789),h=n(346);e.exports=function(e){return new Promise((function(t,n){var d,p=e.data,v=e.headers,m=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}r.isFormData(p)&&delete v["Content-Type"];var g=new XMLHttpRequest;if(e.auth){var k=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(k+":"+w)}var b=u(e.baseURL,e.url);function x(){if(g){var r="getAllResponseHeaders"in g?s(g.getAllResponseHeaders()):null,a={data:m&&"text"!==m&&"json"!==m?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g};i((function(e){t(e),y()}),(function(e){n(e),y()}),a),g=null}}if(g.open(e.method.toUpperCase(),o(b,e.params,e.paramsSerializer),!0),g.timeout=e.timeout,"onloadend"in g?g.onloadend=x:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(x)},g.onabort=function(){g&&(n(l("Request aborted",e,"ECONNABORTED",g)),g=null)},g.onerror=function(){n(l("Network Error",e,null,g)),g=null},g.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||f;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",g)),g=null},r.isStandardBrowserEnv()){var _=(e.withCredentials||c(b))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;_&&(v[e.xsrfHeaderName]=_)}"setRequestHeader"in g&&r.forEach(v,(function(e,t){"undefined"===typeof p&&"content-type"===t.toLowerCase()?delete v[t]:g.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(g.withCredentials=!!e.withCredentials),m&&"json"!==m&&(g.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&g.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(e){g&&(n(!e||e&&e.type?new h("canceled"):e),g.abort(),g=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),p||(p=null),g.send(p)}))}},36:function(e,t,n){"use strict";var r=n(589),i=n(49),a=n(773),o=n(777);var u=function e(t){var n=new a(t),u=i(a.prototype.request,n);return r.extend(u,a.prototype,n),r.extend(u,n),u.create=function(n){return e(o(t,n))},u}(n(709));u.Axios=a,u.Cancel=n(346),u.CancelToken=n(857),u.isCancel=n(517),u.VERSION=n(600).version,u.all=function(e){return Promise.all(e)},u.spread=n(89),u.isAxiosError=n(580),e.exports=u,e.exports.default=u},346:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},857:function(e,t,n){"use strict";var r=n(346);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},773:function(e,t,n){"use strict";var r=n(589),i=n(774),a=n(470),o=n(733),u=n(777),s=n(835),c=s.validators;function l(e){this.defaults=e,this.interceptors={request:new a,response:new a}}l.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=u(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&s.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var a,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!i){var f=[o,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(l),a=Promise.resolve(t);f.length;)a=a.then(f.shift(),f.shift());return a}for(var h=t;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(v){p(v);break}}try{a=o(h)}catch(v){return Promise.reject(v)}for(;l.length;)a=a.then(l.shift(),l.shift());return a},l.prototype.getUri=function(e){return e=u(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(u(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(u(r||{},{method:e,url:t,data:n}))}})),e.exports=l},470:function(e,t,n){"use strict";var r=n(589);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},804:function(e,t,n){"use strict";var r=n(44),i=n(549);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},467:function(e,t,n){"use strict";var r=n(460);e.exports=function(e,t,n,i,a){var o=new Error(e);return r(o,t,n,i,a)}},733:function(e,t,n){"use strict";var r=n(589),i=n(693),a=n(517),o=n(709),u=n(346);function s(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new u("canceled")}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(s(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},460:function(e){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},777:function(e,t,n){"use strict";var r=n(589);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function u(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function s(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:s};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||a,i=t(e);r.isUndefined(i)&&t!==s||(n[e]=i)})),n}},297:function(e,t,n){"use strict";var r=n(467);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},693:function(e,t,n){"use strict";var r=n(589),i=n(709);e.exports=function(e,t,n){var a=this||i;return r.forEach(n,(function(n){e=n.call(a,e,t)})),e}},709:function(e,t,n){"use strict";var r=n(589),i=n(341),a=n(460),o=n(789),u={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c={transitional:o,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(381)),e}(),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(s(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(u){if(o){if("SyntaxError"===u.name)throw a(u,this,"E_JSON_PARSE");throw u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(u)})),e.exports=c},789:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},600:function(e){e.exports={version:"0.26.1"}},49:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},774:function(e,t,n){"use strict";var r=n(589);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),a=o.join("&")}if(a){var u=e.indexOf("#");-1!==u&&(e=e.slice(0,u)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},301:function(e,t,n){"use strict";var r=n(589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,a,o){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(i)&&u.push("path="+i),r.isString(a)&&u.push("domain="+a),!0===o&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},44:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},580:function(e,t,n){"use strict";var r=n(589);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},411:function(e,t,n){"use strict";var r=n(589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},341:function(e,t,n){"use strict";var r=n(589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},145:function(e,t,n){"use strict";var r=n(589),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,o={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},89:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},835:function(e,t,n){"use strict";var r=n(600).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var a={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!a[r]&&(a[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new TypeError("option "+a+" must be "+s)}else if(!0!==n)throw Error("Unknown option "+a)}},validators:i}},589:function(e,t,n){"use strict";var r=n(49),i=Object.prototype.toString;function a(e){return Array.isArray(e)}function o(e){return"undefined"===typeof e}function u(e){return"[object ArrayBuffer]"===i.call(e)}function s(e){return null!==e&&"object"===typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function f(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:u,isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&u(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:s,isPlainObject:c,isUndefined:o,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:f,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):a(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)f(arguments[r],n);return t},extend:function(e,t,n){return f(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function u(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var s=!1,c=null,l=!1,f=null,h={onError:function(e){s=!0,c=e}};function d(e,t,n,r,i,a,o,l,f){s=!1,c=null,u.apply(h,arguments)}var p=null,v=null,m=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=m(n),function(e,t,n,r,i,a,u,h,p){if(d.apply(this,arguments),s){if(!s)throw Error(o(198));var v=c;s=!1,c=null,l||(l=!0,f=v)}}(r,t,void 0,e),e.currentTarget=null}var g=null,k={};function w(){if(g)for(var e in k){var t=k[e],n=g.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!x[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in x[n]=t,n=t.eventTypes){var i=void 0,a=n[r],u=t,s=r;if(_.hasOwnProperty(s))throw Error(o(99,s));_[s]=a;var c=a.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&b(c[i],u,s);i=!0}else a.registrationName?(b(a.registrationName,u,s),i=!0):i=!1;if(!i)throw Error(o(98,r,e))}}}}function b(e,t,n){if(T[e])throw Error(o(100,e));T[e]=t,I[e]=t.eventTypes[n].dependencies}var x=[],_={},T={},I={};function E(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!k.hasOwnProperty(t)||k[t]!==r){if(k[t])throw Error(o(102,t));k[t]=r,n=!0}}n&&w()}var S=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),C=null,N=null,A=null;function D(e){if(e=v(e)){if("function"!==typeof C)throw Error(o(280));var t=e.stateNode;t&&(t=p(t),C(e.stateNode,e.type,t))}}function P(e){N?A?A.push(e):A=[e]:N=e}function R(){if(N){var e=N,t=A;if(A=N=null,D(e),t)for(e=0;e<t.length;e++)D(t[e])}}function O(e,t){return e(t)}function L(e,t,n,r,i){return e(t,n,r,i)}function M(){}var F=O,U=!1,V=!1;function j(){null===N&&null===A||(M(),R())}function B(e,t,n){if(V)return e(t,n);V=!0;try{return F(e,t,n)}finally{V=!1,j()}}var q=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z=Object.prototype.hasOwnProperty,K={},W={};function G(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){H[e]=new G(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];H[t]=new G(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){H[e]=new G(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){H[e]=new G(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){H[e]=new G(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){H[e]=new G(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){H[e]=new G(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){H[e]=new G(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){H[e]=new G(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,Y);H[t]=new G(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,Y);H[t]=new G(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,Y);H[t]=new G(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){H[e]=new G(e,1,!1,e.toLowerCase(),null,!1)})),H.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){H[e]=new G(e,1,!1,e.toLowerCase(),null,!0)}));var J=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function $(e,t,n,r){var i=H.hasOwnProperty(t)?H[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!z.call(W,e)||!z.call(K,e)&&(q.test(e)?W[e]=!0:(K[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}J.hasOwnProperty("ReactCurrentDispatcher")||(J.ReactCurrentDispatcher={current:null}),J.hasOwnProperty("ReactCurrentBatchConfig")||(J.ReactCurrentBatchConfig={suspense:null});var X=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,ae=Z?Symbol.for("react.provider"):60109,oe=Z?Symbol.for("react.context"):60110,ue=Z?Symbol.for("react.concurrent_mode"):60111,se=Z?Symbol.for("react.forward_ref"):60112,ce=Z?Symbol.for("react.suspense"):60113,le=Z?Symbol.for("react.suspense_list"):60120,fe=Z?Symbol.for("react.memo"):60115,he=Z?Symbol.for("react.lazy"):60116,de=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function ve(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function me(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case ae:return"Context.Provider";case se:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case fe:return me(e.type);case de:return me(e.render);case he:if(e=1===e._status?e._result:null)return me(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=me(e.type);n=null,r&&(n=me(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(X,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}function ge(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ke(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function we(e){e._valueTracker||(e._valueTracker=function(e){var t=ke(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function be(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ke(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function xe(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function _e(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ge(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Te(e,t){null!=(t=t.checked)&&$(e,"checked",t,!1)}function Ie(e,t){Te(e,t);var n=ge(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Se(e,t.type,n):t.hasOwnProperty("defaultValue")&&Se(e,t.type,ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Se(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ce(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ge(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function De(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ge(n)}}function Pe(e,t){var n=ge(t.value),r=ge(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Oe="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ue,Ve,je=(Ve=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((Ue=Ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ve(e,t)}))}:Ve);function Be(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function qe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ze={animationend:qe("Animation","AnimationEnd"),animationiteration:qe("Animation","AnimationIteration"),animationstart:qe("Animation","AnimationStart"),transitionend:qe("Transition","TransitionEnd")},Ke={},We={};function Ge(e){if(Ke[e])return Ke[e];if(!ze[e])return e;var t,n=ze[e];for(t in n)if(n.hasOwnProperty(t)&&t in We)return Ke[e]=n[t];return e}S&&(We=document.createElement("div").style,"AnimationEvent"in window||(delete ze.animationend.animation,delete ze.animationiteration.animation,delete ze.animationstart.animation),"TransitionEvent"in window||delete ze.transitionend.transition);var He=Ge("animationend"),Qe=Ge("animationiteration"),Ye=Ge("animationstart"),Je=Ge("transitionend"),$e="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xe=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Xe.get(e);return void 0===t&&(t=new Map,Xe.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(o(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return nt(i),e;if(a===r)return nt(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function at(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function ut(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(ot=it(ot,e)),e=ot,ot=null,e){if(at(e,ut),ot)throw Error(o(95));if(l)throw e=f,l=!1,f=null,e}}function ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function lt(e){if(!S)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ft=[];function ht(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ft.length&&ft.push(e)}function dt(e,t,n,r){if(ft.length){var i=ft.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Dn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ct(e.nativeEvent);r=e.topLevelType;var a=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var u=null,s=0;s<x.length;s++){var c=x[s];c&&(c=c.extractEvents(r,t,a,i,o))&&(u=it(u,c))}st(u)}}function vt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":lt(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===$e.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var mt,yt,gt,kt=!1,wt=[],bt=null,xt=null,_t=null,Tt=new Map,It=new Map,Et=[],St="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Nt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function At(e,t){switch(e){case"focus":case"blur":bt=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":_t=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Dt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=Nt(t,n,r,i,a),null!==t&&(null!==(t=Pn(t))&&yt(t)),e):(e.eventSystemFlags|=r,e)}function Pt(e){var t=Dn(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void a.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Pn(t);return null!==n&&yt(n),e.blockedOn=t,!1}return!0}function Ot(e,t,n){Rt(e)&&n.delete(t)}function Lt(){for(kt=!1;0<wt.length;){var e=wt[0];if(null!==e.blockedOn){null!==(e=Pn(e.blockedOn))&&mt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:wt.shift()}null!==bt&&Rt(bt)&&(bt=null),null!==xt&&Rt(xt)&&(xt=null),null!==_t&&Rt(_t)&&(_t=null),Tt.forEach(Ot),It.forEach(Ot)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Lt)))}function Ft(e){function t(t){return Mt(t,e)}if(0<wt.length){Mt(wt[0],e);for(var n=1;n<wt.length;n++){var r=wt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==bt&&Mt(bt,e),null!==xt&&Mt(xt,e),null!==_t&&Mt(_t,e),Tt.forEach(t),It.forEach(t),n=0;n<Et.length;n++)(r=Et[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Et.length&&null===(n=Et[0]).blockedOn;)Pt(n),null===n.blockedOn&&Et.shift()}var Ut={},Vt=new Map,jt=new Map,Bt=["abort","abort",He,"animationEnd",Qe,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Je,"transitionEnd","waiting","waiting"];function qt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t},jt.set(r,t),Vt.set(r,a),Ut[i]=a}}qt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),qt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),qt(Bt,2);for(var zt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Kt=0;Kt<zt.length;Kt++)jt.set(zt[Kt],0);var Wt=a.unstable_UserBlockingPriority,Gt=a.unstable_runWithPriority,Ht=!0;function Qt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=jt.get(t);switch(void 0===r?2:r){case 0:r=Jt.bind(null,t,1,e);break;case 1:r=$t.bind(null,t,1,e);break;default:r=Xt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Jt(e,t,n,r){U||M();var i=Xt,a=U;U=!0;try{L(i,e,t,n,r)}finally{(U=a)||j()}}function $t(e,t,n,r){Gt(Wt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){if(Ht)if(0<wt.length&&-1<St.indexOf(e))e=Nt(null,e,t,n,r),wt.push(e);else{var i=Zt(e,t,n,r);if(null===i)At(e,r);else if(-1<St.indexOf(e))e=Nt(i,e,t,n,r),wt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return bt=Dt(bt,e,t,n,r,i),!0;case"dragenter":return xt=Dt(xt,e,t,n,r,i),!0;case"mouseover":return _t=Dt(_t,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Tt.set(a,Dt(Tt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,It.set(a,Dt(It.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){At(e,r),e=dt(e,r,null,t);try{B(pt,e)}finally{ht(e)}}}}function Zt(e,t,n,r){if(null!==(n=Dn(n=ct(r)))){var i=et(n);if(null===i)n=null;else{var a=i.tag;if(13===a){if(null!==(n=tt(i)))return n;n=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=dt(e,r,n,t);try{B(pt,e)}finally{ht(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var an=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(an[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62,""))}}function un(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=Oe;function cn(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=I[t];for(var r=0;r<t.length;r++)vt(t[r],e,n)}function ln(){}function fn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var n,r=hn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vn(){for(var e=window,t=fn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=fn((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yn="$?",gn="$!",kn=null,wn=null;function bn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function xn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var _n="function"===typeof setTimeout?setTimeout:void 0,Tn="function"===typeof clearTimeout?clearTimeout:void 0;function In(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function En(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||n===gn||n===yn){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Sn=Math.random().toString(36).slice(2),Cn="__reactInternalInstance$"+Sn,Nn="__reactEventHandlers$"+Sn,An="__reactContainere$"+Sn;function Dn(e){var t=e[Cn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[An]||n[Cn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=En(e);null!==e;){if(n=e[Cn])return n;e=En(e)}return t}n=(e=n).parentNode}return null}function Pn(e){return!(e=e[Cn]||e[An])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Rn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function On(e){return e[Nn]||null}function Ln(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Mn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}function Fn(e,t,n){(t=Mn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Un(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Ln(t);for(t=n.length;0<t--;)Fn(n[t],"captured",e);for(t=0;t<n.length;t++)Fn(n[t],"bubbled",e)}}function Vn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Mn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function jn(e){e&&e.dispatchConfig.registrationName&&Vn(e._targetInst,null,e)}function Bn(e){at(e,Un)}var qn=null,zn=null,Kn=null;function Wn(){if(Kn)return Kn;var e,t,n=zn,r=n.length,i="value"in qn?qn.value:qn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Kn=i.slice(e,1<t?1-t:void 0)}function Gn(){return!0}function Hn(){return!1}function Qn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Gn:Hn,this.isPropagationStopped=Hn,this}function Yn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Jn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function $n(e){e.eventPool=[],e.getPooled=Yn,e.release=Jn}i(Qn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){this.isPersistent=Gn},isPersistent:Hn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Hn,this._dispatchInstances=this._dispatchListeners=null}}),Qn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Qn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,$n(n),n},$n(Qn);var Xn=Qn.extend({data:null}),Zn=Qn.extend({data:null}),er=[9,13,27,32],tr=S&&"CompositionEvent"in window,nr=null;S&&"documentMode"in document&&(nr=document.documentMode);var rr=S&&"TextEvent"in window&&!nr,ir=S&&(!tr||nr&&8<nr&&11>=nr),ar=String.fromCharCode(32),or={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ur=!1;function sr(e,t){switch(e){case"keyup":return-1!==er.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function cr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var lr=!1;var fr={eventTypes:or,extractEvents:function(e,t,n,r){var i;if(tr)e:{switch(e){case"compositionstart":var a=or.compositionStart;break e;case"compositionend":a=or.compositionEnd;break e;case"compositionupdate":a=or.compositionUpdate;break e}a=void 0}else lr?sr(e,n)&&(a=or.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=or.compositionStart);return a?(ir&&"ko"!==n.locale&&(lr||a!==or.compositionStart?a===or.compositionEnd&&lr&&(i=Wn()):(zn="value"in(qn=r)?qn.value:qn.textContent,lr=!0)),a=Xn.getPooled(a,t,n,r),i?a.data=i:null!==(i=cr(n))&&(a.data=i),Bn(a),i=a):i=null,(e=rr?function(e,t){switch(e){case"compositionend":return cr(t);case"keypress":return 32!==t.which?null:(ur=!0,ar);case"textInput":return(e=t.data)===ar&&ur?null:e;default:return null}}(e,n):function(e,t){if(lr)return"compositionend"===e||!tr&&sr(e,t)?(e=Wn(),Kn=zn=qn=null,lr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ir&&"ko"!==t.locale?null:t.data}}(e,n))?((t=Zn.getPooled(or.beforeInput,t,n,r)).data=e,Bn(t)):t=null,null===i?t:null===t?i:[i,t]}},hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!hr[e.type]:"textarea"===t}var pr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function vr(e,t,n){return(e=Qn.getPooled(pr.change,e,t,n)).type="change",P(n),Bn(e),e}var mr=null,yr=null;function gr(e){st(e)}function kr(e){if(be(Rn(e)))return e}function wr(e,t){if("change"===e)return t}var br=!1;function xr(){mr&&(mr.detachEvent("onpropertychange",_r),yr=mr=null)}function _r(e){if("value"===e.propertyName&&kr(yr))if(e=vr(yr,e,ct(e)),U)st(e);else{U=!0;try{O(gr,e)}finally{U=!1,j()}}}function Tr(e,t,n){"focus"===e?(xr(),yr=n,(mr=t).attachEvent("onpropertychange",_r)):"blur"===e&&xr()}function Ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return kr(yr)}function Er(e,t){if("click"===e)return kr(t)}function Sr(e,t){if("input"===e||"change"===e)return kr(t)}S&&(br=lt("input")&&(!document.documentMode||9<document.documentMode));var Cr={eventTypes:pr,_isInputEventSupported:br,extractEvents:function(e,t,n,r){var i=t?Rn(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var o=wr;else if(dr(i))if(br)o=Sr;else{o=Ir;var u=Tr}else(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Er);if(o&&(o=o(e,t)))return vr(o,n,r);u&&u(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Se(i,"number",i.value)}},Nr=Qn.extend({view:null,detail:null}),Ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ar[e])&&!!t[e]}function Pr(){return Dr}var Rr=0,Or=0,Lr=!1,Mr=!1,Fr=Nr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Pr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Rr;return Rr=e.screenX,Lr?"mousemove"===e.type?e.screenX-t:0:(Lr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Or;return Or=e.screenY,Mr?"mousemove"===e.type?e.screenY-t:0:(Mr=!0,0)}}),Ur=Fr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Vr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},jr={eventTypes:Vr,extractEvents:function(e,t,n,r,i){var a="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(a&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?Dn(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var u=Fr,s=Vr.mouseLeave,c=Vr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(u=Ur,s=Vr.pointerLeave,c=Vr.pointerEnter,l="pointer");if(e=null==o?a:Rn(o),a=null==t?a:Rn(t),(s=u.getPooled(s,o,n,r)).type=l+"leave",s.target=e,s.relatedTarget=a,(n=u.getPooled(c,t,n,r)).type=l+"enter",n.target=a,n.relatedTarget=e,l=t,(r=o)&&l)e:{for(c=l,o=0,e=u=r;e;e=Ln(e))o++;for(e=0,t=c;t;t=Ln(t))e++;for(;0<o-e;)u=Ln(u),o--;for(;0<e-o;)c=Ln(c),e--;for(;o--;){if(u===c||u===c.alternate)break e;u=Ln(u),c=Ln(c)}u=null}else u=null;for(c=u,u=[];r&&r!==c&&(null===(o=r.alternate)||o!==c);)u.push(r),r=Ln(r);for(r=[];l&&l!==c&&(null===(o=l.alternate)||o!==c);)r.push(l),l=Ln(l);for(l=0;l<u.length;l++)Vn(u[l],"bubbled",s);for(l=r.length;0<l--;)Vn(r[l],"captured",n);return 0===(64&i)?[s]:[s,n]}};var Br="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},qr=Object.prototype.hasOwnProperty;function zr(e,t){if(Br(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!qr.call(t,n[r])||!Br(e[n[r]],t[n[r]]))return!1;return!0}var Kr=S&&"documentMode"in document&&11>=document.documentMode,Wr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Gr=null,Hr=null,Qr=null,Yr=!1;function Jr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Yr||null==Gr||Gr!==fn(n)?null:("selectionStart"in(n=Gr)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Qr&&zr(Qr,n)?null:(Qr=n,(e=Qn.getPooled(Wr.select,Hr,e,t)).type="select",e.target=Gr,Bn(e),e))}var $r={eventTypes:Wr,extractEvents:function(e,t,n,r,i,a){if(!(a=!(i=a||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),a=I.onSelect;for(var o=0;o<a.length;o++)if(!i.has(a[o])){i=!1;break e}i=!0}a=!i}if(a)return null;switch(i=t?Rn(t):window,e){case"focus":(dr(i)||"true"===i.contentEditable)&&(Gr=i,Hr=t,Qr=null);break;case"blur":Qr=Hr=Gr=null;break;case"mousedown":Yr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Yr=!1,Jr(n,r);case"selectionchange":if(Kr)break;case"keydown":case"keyup":return Jr(n,r)}return null}},Xr=Qn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Zr=Qn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ei=Nr.extend({relatedTarget:null});function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ri={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ii=Nr.extend({key:function(e){if(e.key){var t=ni[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ri[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Pr,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ai=Fr.extend({dataTransfer:null}),oi=Nr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Pr}),ui=Qn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),si=Fr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ci={eventTypes:Ut,extractEvents:function(e,t,n,r){var i=Vt.get(e);if(!i)return null;switch(e){case"keypress":if(0===ti(n))return null;case"keydown":case"keyup":e=ii;break;case"blur":case"focus":e=ei;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=oi;break;case He:case Qe:case Ye:e=Xr;break;case Je:e=ui;break;case"scroll":e=Nr;break;case"wheel":e=si;break;case"copy":case"cut":case"paste":e=Zr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ur;break;default:e=Qn}return Bn(t=e.getPooled(i,t,n,r)),t}};if(g)throw Error(o(101));g=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w(),p=On,v=Pn,m=Rn,E({SimpleEventPlugin:ci,EnterLeaveEventPlugin:jr,ChangeEventPlugin:Cr,SelectEventPlugin:$r,BeforeInputEventPlugin:fr});var li=[],fi=-1;function hi(e){0>fi||(e.current=li[fi],li[fi]=null,fi--)}function di(e,t){fi++,li[fi]=e.current,e.current=t}var pi={},vi={current:pi},mi={current:!1},yi=pi;function gi(e,t){var n=e.type.contextTypes;if(!n)return pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ki(e){return null!==(e=e.childContextTypes)&&void 0!==e}function wi(){hi(mi),hi(vi)}function bi(e,t,n){if(vi.current!==pi)throw Error(o(168));di(vi,t),di(mi,n)}function xi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,me(t)||"Unknown",a));return i({},n,{},r)}function _i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pi,yi=vi.current,di(vi,e),di(mi,mi.current),!0}function Ti(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=xi(e,t,yi),r.__reactInternalMemoizedMergedChildContext=e,hi(mi),hi(vi),di(vi,e)):hi(mi),di(mi,n)}var Ii=a.unstable_runWithPriority,Ei=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_requestPaint,Ni=a.unstable_now,Ai=a.unstable_getCurrentPriorityLevel,Di=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Ri=a.unstable_NormalPriority,Oi=a.unstable_LowPriority,Li=a.unstable_IdlePriority,Mi={},Fi=a.unstable_shouldYield,Ui=void 0!==Ci?Ci:function(){},Vi=null,ji=null,Bi=!1,qi=Ni(),zi=1e4>qi?Ni:function(){return Ni()-qi};function Ki(){switch(Ai()){case Di:return 99;case Pi:return 98;case Ri:return 97;case Oi:return 96;case Li:return 95;default:throw Error(o(332))}}function Wi(e){switch(e){case 99:return Di;case 98:return Pi;case 97:return Ri;case 96:return Oi;case 95:return Li;default:throw Error(o(332))}}function Gi(e,t){return e=Wi(e),Ii(e,t)}function Hi(e,t,n){return e=Wi(e),Ei(e,t,n)}function Qi(e){return null===Vi?(Vi=[e],ji=Ei(Di,Ji)):Vi.push(e),Mi}function Yi(){if(null!==ji){var e=ji;ji=null,Si(e)}Ji()}function Ji(){if(!Bi&&null!==Vi){Bi=!0;var e=0;try{var t=Vi;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ei(Di,Yi),n}finally{Bi=!1}}}function $i(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Xi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Zi={current:null},ea=null,ta=null,na=null;function ra(){na=ta=ea=null}function ia(e){var t=Zi.current;hi(Zi),e.type._context._currentValue=t}function aa(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function oa(e,t){ea=e,na=ta=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Oo=!0),e.firstContext=null)}function ua(e,t){if(na!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(na=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ta){if(null===ea)throw Error(o(308));ta=t,ea.dependencies={expirationTime:0,firstContext:t,responders:null}}else ta=ta.next=t;return e._currentValue}var sa=!1;function ca(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function la(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function fa(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function ha(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function da(e,t){var n=e.alternate;null!==n&&la(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function pa(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.baseQueue,u=a.shared.pending;if(null!==u){if(null!==o){var s=o.next;o.next=u.next,u.next=s}o=u,a.shared.pending=null,null!==(s=e.alternate)&&(null!==(s=s.updateQueue)&&(s.baseQueue=u))}if(null!==o){s=o.next;var c=a.baseState,l=0,f=null,h=null,d=null;if(null!==s)for(var p=s;;){if((u=p.expirationTime)<r){var v={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===d?(h=d=v,f=c):d=d.next=v,u>l&&(l=u)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),ds(u,p.suspenseConfig);e:{var m=e,y=p;switch(u=t,v=n,y.tag){case 1:if("function"===typeof(m=y.payload)){c=m.call(v,c,u);break e}c=m;break e;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null===(u="function"===typeof(m=y.payload)?m.call(v,c,u):m)||void 0===u)break e;c=i({},c,u);break e;case 2:sa=!0}}null!==p.callback&&(e.effectTag|=32,null===(u=a.effects)?a.effects=[p]:u.push(p))}if(null===(p=p.next)||p===s){if(null===(u=a.shared.pending))break;p=o.next=u.next,u.next=s,a.baseQueue=o=u,a.shared.pending=null}}null===d?f=c:d.next=h,a.baseState=f,a.baseQueue=d,ps(l),e.expirationTime=l,e.memoizedState=c}}function va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var ma=J.ReactCurrentBatchConfig,ya=(new r.Component).refs;function ga(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var ka={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=es(),i=ma.suspense;(i=fa(r=ts(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),ha(e,i),ns(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=es(),i=ma.suspense;(i=fa(r=ts(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ha(e,i),ns(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=es(),r=ma.suspense;(r=fa(n=ts(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),ha(e,r),ns(e,n)}};function wa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!zr(n,r)||!zr(i,a))}function ba(e,t,n){var r=!1,i=pi,a=t.contextType;return"object"===typeof a&&null!==a?a=ua(a):(i=ki(t)?yi:vi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?gi(e,i):pi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ka,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function xa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ka.enqueueReplaceState(t,t.state,null)}function _a(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ya,ca(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ua(a):(a=ki(t)?yi:vi.current,i.context=gi(e,a)),pa(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ga(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ka.enqueueReplaceState(i,i.state,null),pa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var Ta=Array.isArray;function Ia(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ya&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ea(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Sa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Os(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function u(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fs(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ia(e,t,n),r.return=e,r):((r=Ls(n.type,n.key,n.props,null,e.mode,r)).ref=Ia(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Us(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ms(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Fs(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Ls(t.type,t.key,t.props,null,e.mode,n)).ref=Ia(e,null,t),n.return=e,n;case te:return(t=Us(t,e.mode,n)).return=e,t}if(Ta(t)||ve(t))return(t=Ms(t,e.mode,n,null)).return=e,t;Ea(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case te:return n.key===i?l(e,t,n,r):null}if(Ta(n)||ve(n))return null!==i?null:f(e,t,n,r,null);Ea(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case te:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Ta(r)||ve(r))return f(t,e=e.get(n)||null,r,i,null);Ea(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,u,s,c){var l=ve(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===ne&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case ee:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===ne){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Ia(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===ne?((r=Ms(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Ls(a.type,a.key,a.props,null,e.mode,s)).ref=Ia(e,r,a),s.return=e,e=s)}return u(e);case te:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Us(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Fs(a,e.mode,s)).return=e,e=r),u(e);if(Ta(a))return v(e,r,a,s);if(ve(a))return m(e,r,a,s);if(l&&Ea(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Ca=Sa(!0),Na=Sa(!1),Aa={},Da={current:Aa},Pa={current:Aa},Ra={current:Aa};function Oa(e){if(e===Aa)throw Error(o(174));return e}function La(e,t){switch(di(Ra,t),di(Pa,e),di(Da,Aa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}hi(Da),di(Da,t)}function Ma(){hi(Da),hi(Pa),hi(Ra)}function Fa(e){Oa(Ra.current);var t=Oa(Da.current),n=Fe(t,e.type);t!==n&&(di(Pa,e),di(Da,n))}function Ua(e){Pa.current===e&&(hi(Da),hi(Pa))}var Va={current:0};function ja(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===yn||n.data===gn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ba(e,t){return{responder:e,props:t}}var qa=J.ReactCurrentDispatcher,za=J.ReactCurrentBatchConfig,Ka=0,Wa=null,Ga=null,Ha=null,Qa=!1;function Ya(){throw Error(o(321))}function Ja(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Br(e[n],t[n]))return!1;return!0}function $a(e,t,n,r,i,a){if(Ka=a,Wa=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,qa.current=null===e||null===e.memoizedState?bo:xo,e=n(r,i),t.expirationTime===Ka){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(o(301));a+=1,Ha=Ga=null,t.updateQueue=null,qa.current=_o,e=n(r,i)}while(t.expirationTime===Ka)}if(qa.current=wo,t=null!==Ga&&null!==Ga.next,Ka=0,Ha=Ga=Wa=null,Qa=!1,t)throw Error(o(300));return e}function Xa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ha?Wa.memoizedState=Ha=e:Ha=Ha.next=e,Ha}function Za(){if(null===Ga){var e=Wa.alternate;e=null!==e?e.memoizedState:null}else e=Ga.next;var t=null===Ha?Wa.memoizedState:Ha.next;if(null!==t)Ha=t,Ga=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Ga=e).memoizedState,baseState:Ga.baseState,baseQueue:Ga.baseQueue,queue:Ga.queue,next:null},null===Ha?Wa.memoizedState=Ha=e:Ha=Ha.next=e}return Ha}function eo(e,t){return"function"===typeof t?t(e):t}function to(e){var t=Za(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.expirationTime;if(l<Ka){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,l>Wa.expirationTime&&(Wa.expirationTime=l,ps(l))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ds(l,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,Br(r,t.memoizedState)||(Oo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function no(e){var t=Za(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);Br(a,t.memoizedState)||(Oo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ro(e){var t=Xa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:eo,lastRenderedState:e}).dispatch=ko.bind(null,Wa,e),[t.memoizedState,e]}function io(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Wa.updateQueue)?(t={lastEffect:null},Wa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ao(){return Za().memoizedState}function oo(e,t,n,r){var i=Xa();Wa.effectTag|=e,i.memoizedState=io(1|t,n,void 0,void 0===r?null:r)}function uo(e,t,n,r){var i=Za();r=void 0===r?null:r;var a=void 0;if(null!==Ga){var o=Ga.memoizedState;if(a=o.destroy,null!==r&&Ja(r,o.deps))return void io(t,n,a,r)}Wa.effectTag|=e,i.memoizedState=io(1|t,n,a,r)}function so(e,t){return oo(516,4,e,t)}function co(e,t){return uo(516,4,e,t)}function lo(e,t){return uo(4,2,e,t)}function fo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,uo(4,2,fo.bind(null,t,e),n)}function po(){}function vo(e,t){return Xa().memoizedState=[e,void 0===t?null:t],e}function mo(e,t){var n=Za();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ja(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function yo(e,t){var n=Za();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ja(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function go(e,t,n){var r=Ki();Gi(98>r?98:r,(function(){e(!0)})),Gi(97<r?97:r,(function(){var r=za.suspense;za.suspense=void 0===t?null:t;try{e(!1),n()}finally{za.suspense=r}}))}function ko(e,t,n){var r=es(),i=ma.suspense;i={expirationTime:r=ts(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Wa||null!==a&&a===Wa)Qa=!0,i.expirationTime=Ka,Wa.expirationTime=Ka;else{if(0===e.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.eagerReducer=a,i.eagerState=u,Br(u,o))return}catch(s){}ns(e,r)}}var wo={readContext:ua,useCallback:Ya,useContext:Ya,useEffect:Ya,useImperativeHandle:Ya,useLayoutEffect:Ya,useMemo:Ya,useReducer:Ya,useRef:Ya,useState:Ya,useDebugValue:Ya,useResponder:Ya,useDeferredValue:Ya,useTransition:Ya},bo={readContext:ua,useCallback:vo,useContext:ua,useEffect:so,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,oo(4,2,fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oo(4,2,e,t)},useMemo:function(e,t){var n=Xa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ko.bind(null,Wa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Xa().memoizedState=e},useState:ro,useDebugValue:po,useResponder:Ba,useDeferredValue:function(e,t){var n=ro(e),r=n[0],i=n[1];return so((function(){var n=za.suspense;za.suspense=void 0===t?null:t;try{i(e)}finally{za.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ro(!1),n=t[0];return t=t[1],[vo(go.bind(null,t,e),[t,e]),n]}},xo={readContext:ua,useCallback:mo,useContext:ua,useEffect:co,useImperativeHandle:ho,useLayoutEffect:lo,useMemo:yo,useReducer:to,useRef:ao,useState:function(){return to(eo)},useDebugValue:po,useResponder:Ba,useDeferredValue:function(e,t){var n=to(eo),r=n[0],i=n[1];return co((function(){var n=za.suspense;za.suspense=void 0===t?null:t;try{i(e)}finally{za.suspense=n}}),[e,t]),r},useTransition:function(e){var t=to(eo),n=t[0];return t=t[1],[mo(go.bind(null,t,e),[t,e]),n]}},_o={readContext:ua,useCallback:mo,useContext:ua,useEffect:co,useImperativeHandle:ho,useLayoutEffect:lo,useMemo:yo,useReducer:no,useRef:ao,useState:function(){return no(eo)},useDebugValue:po,useResponder:Ba,useDeferredValue:function(e,t){var n=no(eo),r=n[0],i=n[1];return co((function(){var n=za.suspense;za.suspense=void 0===t?null:t;try{i(e)}finally{za.suspense=n}}),[e,t]),r},useTransition:function(e){var t=no(eo),n=t[0];return t=t[1],[mo(go.bind(null,t,e),[t,e]),n]}},To=null,Io=null,Eo=!1;function So(e,t){var n=Ps(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Co(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function No(e){if(Eo){var t=Io;if(t){var n=t;if(!Co(e,t)){if(!(t=In(n.nextSibling))||!Co(e,t))return e.effectTag=-1025&e.effectTag|2,Eo=!1,void(To=e);So(To,n)}To=e,Io=In(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Eo=!1,To=e}}function Ao(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;To=e}function Do(e){if(e!==To)return!1;if(!Eo)return Ao(e),Eo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!xn(t,e.memoizedProps))for(t=Io;t;)So(e,t),t=In(t.nextSibling);if(Ao(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Io=In(e.nextSibling);break e}t--}else"$"!==n&&n!==gn&&n!==yn||t++}e=e.nextSibling}Io=null}}else Io=To?In(e.stateNode.nextSibling):null;return!0}function Po(){Io=To=null,Eo=!1}var Ro=J.ReactCurrentOwner,Oo=!1;function Lo(e,t,n,r){t.child=null===e?Na(t,null,n,r):Ca(t,e.child,n,r)}function Mo(e,t,n,r,i){n=n.render;var a=t.ref;return oa(t,i),r=$a(e,t,n,r,a,i),null===e||Oo?(t.effectTag|=1,Lo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Xo(e,t,i))}function Fo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Rs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ls(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Uo(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:zr)(i,r)&&e.ref===t.ref)?Xo(e,t,a):(t.effectTag|=1,(e=Os(o,r)).ref=t.ref,e.return=t,t.child=e)}function Uo(e,t,n,r,i,a){return null!==e&&zr(e.memoizedProps,r)&&e.ref===t.ref&&(Oo=!1,i<a)?(t.expirationTime=e.expirationTime,Xo(e,t,a)):jo(e,t,n,r,a)}function Vo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function jo(e,t,n,r,i){var a=ki(n)?yi:vi.current;return a=gi(t,a),oa(t,i),n=$a(e,t,n,r,a,i),null===e||Oo?(t.effectTag|=1,Lo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Xo(e,t,i))}function Bo(e,t,n,r,i){if(ki(n)){var a=!0;_i(t)}else a=!1;if(oa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ba(t,n,r),_a(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ua(c):c=gi(t,c=ki(n)?yi:vi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&xa(t,o,r,c),sa=!1;var h=t.memoizedState;o.state=h,pa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||mi.current||sa?("function"===typeof l&&(ga(t,n,l,r),s=t.memoizedState),(u=sa||wa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,la(e,t),u=t.memoizedProps,o.props=t.type===t.elementType?u:Xi(t.type,u),s=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=ua(c):c=gi(t,c=ki(n)?yi:vi.current),(f="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&xa(t,o,r,c),sa=!1,s=t.memoizedState,o.state=s,pa(t,r,o,i),h=t.memoizedState,u!==r||s!==h||mi.current||sa?("function"===typeof l&&(ga(t,n,l,r),h=t.memoizedState),(l=sa||wa(t,n,u,r,s,h,c))?(f||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),r=!1);return qo(e,t,n,r,a,i)}function qo(e,t,n,r,i,a){Vo(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&Ti(t,n,!1),Xo(e,t,a);r=t.stateNode,Ro.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Ca(t,e.child,null,a),t.child=Ca(t,null,u,a)):Lo(e,t,u,a),t.memoizedState=r.state,i&&Ti(t,n,!0),t.child}function zo(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),La(e,t.containerInfo)}var Ko,Wo,Go,Ho={dehydrated:null,retryTime:0};function Qo(e,t,n){var r,i=t.mode,a=t.pendingProps,o=Va.current,u=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&o)&&(null===e||null!==e.memoizedState)),r?(u=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),di(Va,1&o),null===e){if(void 0!==a.fallback&&No(t),u){if(u=a.fallback,(a=Ms(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Ms(u,i,n,null)).return=t,a.sibling=n,t.memoizedState=Ho,t.child=a,n}return i=a.children,t.memoizedState=null,t.child=Na(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,u){if(a=a.fallback,(n=Os(e,e.pendingProps)).return=t,0===(2&t.mode)&&(u=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=u;null!==u;)u.return=n,u=u.sibling;return(i=Os(i,a)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Ho,t.child=n,i}return n=Ca(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,u){if(u=a.fallback,(a=Ms(null,i,0,null)).return=t,a.child=e,null!==e&&(e.return=a),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Ms(u,i,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=Ho,t.child=a,n}return t.memoizedState=null,t.child=Ca(t,e,a.children,n)}function Yo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),aa(e.return,t)}function Jo(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=a)}function $o(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Lo(e,t,r.children,n),0!==(2&(r=Va.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Yo(e,n);else if(19===e.tag)Yo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(di(Va,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ja(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Jo(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ja(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Jo(t,!0,n,null,a,t.lastEffect);break;case"together":Jo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Xo(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&ps(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Os(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Os(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Zo(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function eu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ki(t.type)&&wi(),null;case 3:return Ma(),hi(mi),hi(vi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Do(t)||(t.effectTag|=4),null;case 5:Ua(t),n=Oa(Ra.current);var a=t.type;if(null!==e&&null!=t.stateNode)Wo(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Oa(Da.current),Do(t)){r=t.stateNode,a=t.type;var u=t.memoizedProps;switch(r[Cn]=t,r[Nn]=u,a){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<$e.length;e++)Qt($e[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":_e(r,u),Qt("invalid",r),cn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Qt("invalid",r),cn(n,"onChange");break;case"textarea":De(r,u),Qt("invalid",r),cn(n,"onChange")}for(var s in on(a,u),e=null,u)if(u.hasOwnProperty(s)){var c=u[s];"children"===s?"string"===typeof c?r.textContent!==c&&(e=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(e=["children",""+c]):T.hasOwnProperty(s)&&null!=c&&cn(n,s)}switch(a){case"input":we(r),Ee(r,u,!0);break;case"textarea":we(r),Re(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=ln)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(s=9===n.nodeType?n:n.ownerDocument,e===sn&&(e=Me(a)),e===sn?"script"===a?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(a,{is:r.is}):(e=s.createElement(a),"select"===a&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,a),e[Cn]=t,e[Nn]=r,Ko(e,t),t.stateNode=e,s=un(a,r),a){case"iframe":case"object":case"embed":Qt("load",e),c=r;break;case"video":case"audio":for(c=0;c<$e.length;c++)Qt($e[c],e);c=r;break;case"source":Qt("error",e),c=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),c=r;break;case"form":Qt("reset",e),Qt("submit",e),c=r;break;case"details":Qt("toggle",e),c=r;break;case"input":_e(e,r),c=xe(e,r),Qt("invalid",e),cn(n,"onChange");break;case"option":c=Ce(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Qt("invalid",e),cn(n,"onChange");break;case"textarea":De(e,r),c=Ae(e,r),Qt("invalid",e),cn(n,"onChange");break;default:c=r}on(a,c);var l=c;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?rn(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&je(e,f):"children"===u?"string"===typeof f?("textarea"!==a||""!==f)&&Be(e,f):"number"===typeof f&&Be(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(T.hasOwnProperty(u)?null!=f&&cn(n,u):null!=f&&$(e,u,f,s))}switch(a){case"input":we(e),Ee(e,r,!1);break;case"textarea":we(e),Re(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ge(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ne(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=ln)}bn(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Go(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Oa(Ra.current),Oa(Da.current),Do(t)?(n=t.stateNode,r=t.memoizedProps,n[Cn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Cn]=t,t.stateNode=n)}return null;case 13:return hi(Va),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Do(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=a,a.nextEffect=u):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Va.current)?Lu===Cu&&(Lu=Nu):(Lu!==Cu&&Lu!==Nu||(Lu=Au),0!==ju&&null!==Pu&&(Bs(Pu,Ou),qs(Pu,ju)))),(n||r)&&(t.effectTag|=4),null);case 4:return Ma(),null;case 10:return ia(t),null;case 19:if(hi(Va),null===(r=t.memoizedState))return null;if(a=0!==(64&t.effectTag),null===(u=r.rendering)){if(a)Zo(r,!1);else if(Lu!==Cu||null!==e&&0!==(64&e.effectTag))for(u=t.child;null!==u;){if(null!==(e=ja(u))){for(t.effectTag|=64,Zo(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)u=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=u,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,u=e.dependencies,a.dependencies=null===u?null:{expirationTime:u.expirationTime,firstContext:u.firstContext,responders:u.responders}),r=r.sibling;return di(Va,1&Va.current|2),t.child}u=u.sibling}}else{if(!a)if(null!==(e=ja(u))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Zo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,Zo(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=zi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Va.current,di(Va,a?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function tu(e){switch(e.tag){case 1:ki(e.type)&&wi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Ma(),hi(mi),hi(vi),0!==(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Ua(e),null;case 13:return hi(Va),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return hi(Va),null;case 4:return Ma(),null;case 10:return ia(e),null;default:return null}}function nu(e,t){return{value:e,source:t,stack:ye(t)}}Ko=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wo=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var u,s,c=t.stateNode;switch(Oa(Da.current),e=null,n){case"input":o=xe(c,o),r=xe(c,r),e=[];break;case"option":o=Ce(c,o),r=Ce(c,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Ae(c,o),r=Ae(c,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(c.onclick=ln)}for(u in on(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u)for(s in c=o[u])c.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(T.hasOwnProperty(u)?e||(e=[]):(e=e||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(e||(e=[]),e.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(u,l)):"children"===u?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(T.hasOwnProperty(u)?(null!=l&&cn(a,u),e||c===l||(e=[])):(e=e||[]).push(u,l))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},Go=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var ru="function"===typeof WeakSet?WeakSet:Set;function iu(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ye(n)),null!==n&&me(n.type),t=t.value,null!==e&&1===e.tag&&me(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function au(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Es(e,n)}else t.current=null}function ou(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(o(163))}function uu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function su(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void su(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&va(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}va(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&bn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ft(n)))))}throw Error(o(163))}function lu(e,t,n){switch("function"===typeof As&&As(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Gi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(a){Es(i,a)}}e=e.next}while(e!==r)}))}break;case 1:au(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Es(e,n)}}(t,n);break;case 5:au(t);break;case 4:mu(e,t,n)}}function fu(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&fu(t)}function hu(e){return 5===e.tag||3===e.tag||4===e.tag}function du(e){e:{for(var t=e.return;null!==t;){if(hu(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(Be(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||hu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?pu(e,n,t):vu(e,n,t)}function pu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ln));else if(4!==r&&null!==(e=e.child))for(pu(e,t,n),e=e.sibling;null!==e;)pu(e,t,n),e=e.sibling}function vu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(vu(e,t,n),e=e.sibling;null!==e;)vu(e,t,n),e=e.sibling}function mu(e,t,n){for(var r,i,a=t,u=!1;;){if(!u){u=a.return;e:for(;;){if(null===u)throw Error(o(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===a.tag||6===a.tag){e:for(var s=e,c=a,l=n,f=c;;)if(lu(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=a.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(lu(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(u=!1)}a.sibling.return=a.return,a=a.sibling}}function yu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void uu(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Nn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Te(n,r),un(e,i),t=un(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?rn(n,s):"dangerouslySetInnerHTML"===u?je(n,s):"children"===u?Be(n,s):$(n,u,s,t)}switch(e){case"input":Ie(n,r);break;case"textarea":Pe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ne(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ne(n,!!r.multiple,r.defaultValue,!0):Ne(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ft(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,qu=zi()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,r?"function"===typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,a.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void gu(t);case 19:return void gu(t)}throw Error(o(163))}function gu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ru),t.forEach((function(t){var r=Cs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var ku="function"===typeof WeakMap?WeakMap:Map;function wu(e,t,n){(n=fa(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ku||(Ku=!0,Wu=r),iu(e,t)},n}function bu(e,t,n){(n=fa(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return iu(e,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this),iu(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var xu,_u=Math.ceil,Tu=J.ReactCurrentDispatcher,Iu=J.ReactCurrentOwner,Eu=16,Su=32,Cu=0,Nu=3,Au=4,Du=0,Pu=null,Ru=null,Ou=0,Lu=Cu,Mu=null,Fu=1073741823,Uu=1073741823,Vu=null,ju=0,Bu=!1,qu=0,zu=null,Ku=!1,Wu=null,Gu=null,Hu=!1,Qu=null,Yu=90,Ju=null,$u=0,Xu=null,Zu=0;function es(){return 0!==(48&Du)?1073741821-(zi()/10|0):0!==Zu?Zu:Zu=1073741821-(zi()/10|0)}function ts(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Ki();if(0===(4&t))return 99===r?1073741823:1073741822;if(0!==(Du&Eu))return Ou;if(null!==n)e=$i(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=$i(e,150,100);break;case 97:case 96:e=$i(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Pu&&e===Ou&&--e,e}function ns(e,t){if(50<$u)throw $u=0,Xu=null,Error(o(185));if(null!==(e=rs(e,t))){var n=Ki();1073741823===t?0!==(8&Du)&&0===(48&Du)?us(e):(as(e),0===Du&&Yi()):as(e),0===(4&Du)||98!==n&&99!==n||(null===Ju?Ju=new Map([[e,t]]):(void 0===(n=Ju.get(e))||n>t)&&Ju.set(e,t))}}function rs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Pu===i&&(ps(t),Lu===Au&&Bs(i,Ou)),qs(i,t)),i}function is(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!js(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function as(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Qi(us.bind(null,e));else{var t=is(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=es();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Mi&&Si(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Qi(us.bind(null,e)):Hi(r,os.bind(null,e),{timeout:10*(1073741821-t)-zi()}),e.callbackNode=t}}}function os(e,t){if(Zu=0,t)return zs(e,t=es()),as(e),null;var n=is(e);if(0!==n){if(t=e.callbackNode,0!==(48&Du))throw Error(o(327));if(_s(),e===Pu&&n===Ou||ls(e,n),null!==Ru){var r=Du;Du|=Eu;for(var i=hs();;)try{ms();break}catch(s){fs(e,s)}if(ra(),Du=r,Tu.current=i,1===Lu)throw t=Mu,ls(e,n),Bs(e,n),as(e),t;if(null===Ru)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Lu,Pu=null,r){case Cu:case 1:throw Error(o(345));case 2:zs(e,2<n?2:n);break;case Nu:if(Bs(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=ks(i)),1073741823===Fu&&10<(i=qu+500-zi())){if(Bu){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,ls(e,n);break}}if(0!==(a=is(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=_n(ws.bind(null,e),i);break}ws(e);break;case Au:if(Bs(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=ks(i)),Bu&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,ls(e,n);break}if(0!==(i=is(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Uu?r=10*(1073741821-Uu)-zi():1073741823===Fu?r=0:(r=10*(1073741821-Fu)-5e3,0>(r=(i=zi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_u(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=_n(ws.bind(null,e),r);break}ws(e);break;case 5:if(1073741823!==Fu&&null!==Vu){a=Fu;var u=Vu;if(0>=(r=0|u.busyMinDurationMs)?r=0:(i=0|u.busyDelayMs,r=(a=zi()-(10*(1073741821-a)-(0|u.timeoutMs||5e3)))<=i?0:i+r-a),10<r){Bs(e,n),e.timeoutHandle=_n(ws.bind(null,e),r);break}}ws(e);break;default:throw Error(o(329))}if(as(e),e.callbackNode===t)return os.bind(null,e)}}return null}function us(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&Du))throw Error(o(327));if(_s(),e===Pu&&t===Ou||ls(e,t),null!==Ru){var n=Du;Du|=Eu;for(var r=hs();;)try{vs();break}catch(i){fs(e,i)}if(ra(),Du=n,Tu.current=r,1===Lu)throw n=Mu,ls(e,t),Bs(e,t),as(e),n;if(null!==Ru)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Pu=null,ws(e),as(e)}return null}function ss(e,t){var n=Du;Du|=1;try{return e(t)}finally{0===(Du=n)&&Yi()}}function cs(e,t){var n=Du;Du&=-2,Du|=8;try{return e(t)}finally{0===(Du=n)&&Yi()}}function ls(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Tn(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&wi();break;case 3:Ma(),hi(mi),hi(vi);break;case 5:Ua(r);break;case 4:Ma();break;case 13:case 19:hi(Va);break;case 10:ia(r)}n=n.return}Pu=e,Ru=Os(e.current,null),Ou=t,Lu=Cu,Mu=null,Uu=Fu=1073741823,Vu=null,ju=0,Bu=!1}function fs(e,t){for(;;){try{if(ra(),qa.current=wo,Qa)for(var n=Wa.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Ka=0,Ha=Ga=Wa=null,Qa=!1,null===Ru||null===Ru.return)return Lu=1,Mu=t,Ru=null;e:{var i=e,a=Ru.return,o=Ru,u=t;if(t=Ou,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var s=u;if(0===(2&o.mode)){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.expirationTime=c.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var l=0!==(1&Va.current),f=a;do{var h;if(h=13===f.tag){var d=f.memoizedState;if(null!==d)h=null!==d.dehydrated;else{var p=f.memoizedProps;h=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!l)}}if(h){var v=f.updateQueue;if(null===v){var m=new Set;m.add(s),f.updateQueue=m}else v.add(s);if(0===(2&f.mode)){if(f.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var y=fa(1073741823,null);y.tag=2,ha(o,y)}o.expirationTime=1073741823;break e}u=void 0,o=t;var g=i.pingCache;if(null===g?(g=i.pingCache=new ku,u=new Set,g.set(s,u)):void 0===(u=g.get(s))&&(u=new Set,g.set(s,u)),!u.has(o)){u.add(o);var k=Ss.bind(null,i,s,o);s.then(k,k)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);u=Error((me(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(o))}5!==Lu&&(Lu=2),u=nu(u,o),f=a;do{switch(f.tag){case 3:s=u,f.effectTag|=4096,f.expirationTime=t,da(f,wu(f,s,t));break e;case 1:s=u;var w=f.type,b=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof w.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gu||!Gu.has(b)))){f.effectTag|=4096,f.expirationTime=t,da(f,bu(f,s,t));break e}}f=f.return}while(null!==f)}Ru=gs(Ru)}catch(x){t=x;continue}break}}function hs(){var e=Tu.current;return Tu.current=wo,null===e?wo:e}function ds(e,t){e<Fu&&2<e&&(Fu=e),null!==t&&e<Uu&&2<e&&(Uu=e,Vu=t)}function ps(e){e>ju&&(ju=e)}function vs(){for(;null!==Ru;)Ru=ys(Ru)}function ms(){for(;null!==Ru&&!Fi();)Ru=ys(Ru)}function ys(e){var t=xu(e.alternate,e,Ou);return e.memoizedProps=e.pendingProps,null===t&&(t=gs(e)),Iu.current=null,t}function gs(e){Ru=e;do{var t=Ru.alternate;if(e=Ru.return,0===(2048&Ru.effectTag)){if(t=eu(t,Ru,Ou),1===Ou||1!==Ru.childExpirationTime){for(var n=0,r=Ru.child;null!==r;){var i=r.expirationTime,a=r.childExpirationTime;i>n&&(n=i),a>n&&(n=a),r=r.sibling}Ru.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ru.firstEffect),null!==Ru.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ru.firstEffect),e.lastEffect=Ru.lastEffect),1<Ru.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ru:e.firstEffect=Ru,e.lastEffect=Ru))}else{if(null!==(t=tu(Ru)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ru.sibling))return t;Ru=e}while(null!==Ru);return Lu===Cu&&(Lu=5),null}function ks(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function ws(e){var t=Ki();return Gi(99,bs.bind(null,e,t)),null}function bs(e,t){do{_s()}while(null!==Qu);if(0!==(48&Du))throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=ks(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Pu&&(Ru=Pu=null,Ou=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var a=Du;Du|=Su,Iu.current=null,kn=Ht;var u=vn();if(mn(u)){if("selectionStart"in u)var s={start:u.selectionStart,end:u.selectionEnd};else e:{var c=(s=(s=u.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(c&&0!==c.rangeCount){s=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{s.nodeType,f.nodeType}catch(E){s=null;break e}var h=0,d=-1,p=-1,v=0,m=0,y=u,g=null;t:for(;;){for(var k;y!==s||0!==l&&3!==y.nodeType||(d=h+l),y!==f||0!==c&&3!==y.nodeType||(p=h+c),3===y.nodeType&&(h+=y.nodeValue.length),null!==(k=y.firstChild);)g=y,y=k;for(;;){if(y===u)break t;if(g===s&&++v===l&&(d=h),g===f&&++m===c&&(p=h),null!==(k=y.nextSibling))break;g=(y=g).parentNode}y=k}s=-1===d||-1===p?null:{start:d,end:p}}else s=null}s=s||{start:0,end:0}}else s=null;wn={activeElementDetached:null,focusedElem:u,selectionRange:s},Ht=!1,zu=i;do{try{xs()}catch(E){if(null===zu)throw Error(o(330));Es(zu,E),zu=zu.nextEffect}}while(null!==zu);zu=i;do{try{for(u=e,s=t;null!==zu;){var w=zu.effectTag;if(16&w&&Be(zu.stateNode,""),128&w){var b=zu.alternate;if(null!==b){var x=b.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&w){case 2:du(zu),zu.effectTag&=-3;break;case 6:du(zu),zu.effectTag&=-3,yu(zu.alternate,zu);break;case 1024:zu.effectTag&=-1025;break;case 1028:zu.effectTag&=-1025,yu(zu.alternate,zu);break;case 4:yu(zu.alternate,zu);break;case 8:mu(u,l=zu,s),fu(l)}zu=zu.nextEffect}}catch(E){if(null===zu)throw Error(o(330));Es(zu,E),zu=zu.nextEffect}}while(null!==zu);if(x=wn,b=vn(),w=x.focusedElem,s=x.selectionRange,b!==w&&w&&w.ownerDocument&&pn(w.ownerDocument.documentElement,w)){null!==s&&mn(w)&&(b=s.start,void 0===(x=s.end)&&(x=b),"selectionStart"in w?(w.selectionStart=b,w.selectionEnd=Math.min(x,w.value.length)):(x=(b=w.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),l=w.textContent.length,u=Math.min(s.start,l),s=void 0===s.end?u:Math.min(s.end,l),!x.extend&&u>s&&(l=s,s=u,u=l),l=dn(w,u),f=dn(w,s),l&&f&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==f.node||x.focusOffset!==f.offset)&&((b=b.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),u>s?(x.addRange(b),x.extend(f.node,f.offset)):(b.setEnd(f.node,f.offset),x.addRange(b))))),b=[];for(x=w;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<b.length;w++)(x=b[w]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Ht=!!kn,wn=kn=null,e.current=n,zu=i;do{try{for(w=e;null!==zu;){var _=zu.effectTag;if(36&_&&cu(w,zu.alternate,zu),128&_){b=void 0;var T=zu.ref;if(null!==T){var I=zu.stateNode;zu.tag,b=I,"function"===typeof T?T(b):T.current=b}}zu=zu.nextEffect}}catch(E){if(null===zu)throw Error(o(330));Es(zu,E),zu=zu.nextEffect}}while(null!==zu);zu=null,Ui(),Du=a}else e.current=n;if(Hu)Hu=!1,Qu=e,Yu=t;else for(zu=i;null!==zu;)t=zu.nextEffect,zu.nextEffect=null,zu=t;if(0===(t=e.firstPendingTime)&&(Gu=null),1073741823===t?e===Xu?$u++:($u=0,Xu=e):$u=0,"function"===typeof Ns&&Ns(n.stateNode,r),as(e),Ku)throw Ku=!1,e=Wu,Wu=null,e;return 0!==(8&Du)||Yi(),null}function xs(){for(;null!==zu;){var e=zu.effectTag;0!==(256&e)&&ou(zu.alternate,zu),0===(512&e)||Hu||(Hu=!0,Hi(97,(function(){return _s(),null}))),zu=zu.nextEffect}}function _s(){if(90!==Yu){var e=97<Yu?97:Yu;return Yu=90,Gi(e,Ts)}}function Ts(){if(null===Qu)return!1;var e=Qu;if(Qu=null,0!==(48&Du))throw Error(o(331));var t=Du;for(Du|=Su,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:uu(5,n),su(5,n)}}catch(r){if(null===e)throw Error(o(330));Es(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Du=t,Yi(),!0}function Is(e,t,n){ha(e,t=wu(e,t=nu(n,t),1073741823)),null!==(e=rs(e,1073741823))&&as(e)}function Es(e,t){if(3===e.tag)Is(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Is(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){ha(n,e=bu(n,e=nu(t,e),1073741823)),null!==(n=rs(n,1073741823))&&as(n);break}}n=n.return}}function Ss(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Pu===e&&Ou===n?Lu===Au||Lu===Nu&&1073741823===Fu&&zi()-qu<500?ls(e,Ou):Bu=!0:js(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,as(e)))}function Cs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=ts(t=es(),e,null)),null!==(e=rs(e,t))&&as(e)}xu=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||mi.current)Oo=!0;else{if(r<n){switch(Oo=!1,t.tag){case 3:zo(t),Po();break;case 5:if(Fa(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:ki(t.type)&&_i(t);break;case 4:La(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,di(Zi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Qo(e,t,n):(di(Va,1&Va.current),null!==(t=Xo(e,t,n))?t.sibling:null);di(Va,1&Va.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return $o(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),di(Va,Va.current),!r)return null}return Xo(e,t,n)}Oo=!1}}else Oo=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=gi(t,vi.current),oa(t,n),i=$a(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ki(r)){var a=!0;_i(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ca(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ga(t,r,u,e),i.updater=ka,t.stateNode=i,i._reactInternalFiber=t,_a(t,r,e,n),t=qo(null,t,r,!0,a,n)}else t.tag=0,Lo(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,a=t.tag=function(e){if("function"===typeof e)return Rs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===se)return 11;if(e===fe)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=jo(null,t,i,e,n);break e;case 1:t=Bo(null,t,i,e,n);break e;case 11:t=Mo(null,t,i,e,n);break e;case 14:t=Fo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Bo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(zo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,la(e,t),pa(t,r,null,n),(r=t.memoizedState.element)===i)Po(),t=Xo(e,t,n);else{if((i=t.stateNode.hydrate)&&(Io=In(t.stateNode.containerInfo.firstChild),To=t,i=Eo=!0),i)for(n=Na(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Lo(e,t,r,n),Po();t=t.child}return t;case 5:return Fa(t),null===e&&No(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,xn(r,i)?u=null:null!==a&&xn(r,a)&&(t.effectTag|=16),Vo(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Lo(e,t,u,n),t=t.child),t;case 6:return null===e&&No(t),null;case 13:return Qo(e,t,n);case 4:return La(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ca(t,null,r,n):Lo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Mo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return Lo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Lo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(di(Zi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=Br(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!mi.current){t=Xo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=fa(n,null)).tag=2,ha(s,l)),s.expirationTime<n&&(s.expirationTime=n),null!==(l=s.alternate)&&l.expirationTime<n&&(l.expirationTime=n),aa(s.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Lo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,oa(t,n),r=r(i=ua(i,a.unstable_observedBits)),t.effectTag|=1,Lo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Fo(e,t,i,a=Xi(i.type,a),r,n);case 15:return Uo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,ki(r)?(e=!0,_i(t)):e=!1,oa(t,n),ba(t,r,i),_a(t,r,i,n),qo(null,t,r,!0,e,n);case 19:return $o(e,t,n)}throw Error(o(156,t.tag))};var Ns=null,As=null;function Ds(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ps(e,t,n,r){return new Ds(e,t,n,r)}function Rs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Os(e,t){var n=e.alternate;return null===n?((n=Ps(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ls(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Rs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case ne:return Ms(n.children,i,a,t);case ue:u=8,i|=7;break;case re:u=8,i|=1;break;case ie:return(e=Ps(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=a,e;case ce:return(e=Ps(13,n,t,i)).type=ce,e.elementType=ce,e.expirationTime=a,e;case le:return(e=Ps(19,n,t,i)).elementType=le,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ae:u=10;break e;case oe:u=9;break e;case se:u=11;break e;case fe:u=14;break e;case he:u=16,r=null;break e;case de:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ps(u,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function Ms(e,t,n,r){return(e=Ps(7,e,r,t)).expirationTime=n,e}function Fs(e,t,n){return(e=Ps(6,e,null,t)).expirationTime=n,e}function Us(e,t,n){return(t=Ps(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vs(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function js(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Bs(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function qs(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function zs(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Ks(e,t,n,r){var i=t.current,a=es(),u=ma.suspense;a=ts(a,i,u);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(ki(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(ki(c)){n=xi(n,c,s);break e}}n=s}else n=pi;return null===t.context?t.context=n:t.pendingContext=n,(t=fa(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ha(i,t),ns(i,a),a}function Ws(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gs(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Hs(e,t){Gs(e,t),(e=e.alternate)&&Gs(e,t)}function Qs(e,t,n){var r=new Vs(e,t,n=null!=n&&!0===n.hydrate),i=Ps(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,ca(i),e[An]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);St.forEach((function(e){vt(e,t,n)})),Ct.forEach((function(e){vt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Ys(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Js(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=Ws(o);u.call(e)}}Ks(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Qs(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=Ws(o);s.call(e)}}cs((function(){Ks(t,o,e,i)}))}return Ws(o)}function $s(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Xs(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ys(t))throw Error(o(200));return $s(e,t,null,n)}Qs.prototype.render=function(e){Ks(e,this._internalRoot,null,null)},Qs.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ks(null,e,null,(function(){t[An]=null}))},mt=function(e){if(13===e.tag){var t=$i(es(),150,100);ns(e,t),Hs(e,t)}},yt=function(e){13===e.tag&&(ns(e,3),Hs(e,3))},gt=function(e){if(13===e.tag){var t=es();ns(e,t=ts(t,e,null)),Hs(e,t)}},C=function(e,t,n){switch(t){case"input":if(Ie(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=On(r);if(!i)throw Error(o(90));be(r),Ie(r,i)}}}break;case"textarea":Pe(e,n);break;case"select":null!=(t=n.value)&&Ne(e,!!n.multiple,t,!1)}},O=ss,L=function(e,t,n,r,i){var a=Du;Du|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Du=a)&&Yi()}},M=function(){0===(49&Du)&&(function(){if(null!==Ju){var e=Ju;Ju=null,e.forEach((function(e,t){zs(t,e),as(t)})),Yi()}}(),_s())},F=function(e,t){var n=Du;Du|=2;try{return e(t)}finally{0===(Du=n)&&Yi()}};var Zs={Events:[Pn,Rn,On,E,_,Bn,function(e){at(e,jn)},P,R,Xt,st,_s,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ns=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},As=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Dn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zs,t.createPortal=Xs,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&Du))throw Error(o(187));var n=Du;Du|=1;try{return Gi(99,e.bind(null,t))}finally{Du=n,Yi()}},t.hydrate=function(e,t,n){if(!Ys(t))throw Error(o(200));return Js(null,e,t,!0,n)},t.render=function(e,t,n){if(!Ys(t))throw Error(o(200));return Js(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ys(e))throw Error(o(40));return!!e._reactRootContainer&&(cs((function(){Js(null,null,e,!1,(function(){e._reactRootContainer=null,e[An]=null}))})),!0)},t.unstable_batchedUpdates=ss,t.unstable_createPortal=function(e,t){return Xs(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ys(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return Js(e,t,n,!1,r)},t.version="16.14.0"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,u=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k={};function w(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||g}function b(){}function x(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||g}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=w.prototype;var _=x.prototype=new b;_.constructor=x,r(_,w.prototype),_.isPureReactComponent=!0;var T={current:null},I=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,i={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)I.call(t,r)&&!E.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:a,type:e,key:o,ref:u,props:i,_owner:T.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var N=/\/+/g,A=[];function D(e,t,n,r){if(A.length){var i=A.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function R(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var u=!1;if(null===e)u=!0;else switch(i){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case o:u=!0}}if(u)return n(r,e,""===t?"."+L(e,0):t),1;if(u=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){var c=t+L(i=e[s],s);u+=R(i,c,n,r)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=m&&e[m]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),s=0;!(i=e.next()).done;)u+=R(i=i.value,c=t+L(i,s++),n,r);else if("object"===i)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return u}function O(e,t,n){return null==e?0:R(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function M(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(N,"$&/")+"/")+n)),r.push(e))}function U(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(N,"$&/")+"/"),O(e,F,t=D(t,a,r,i)),P(t)}var V={current:null};function j(){var e=V.current;if(null===e)throw Error(y(321));return e}var B={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;O(e,M,t=D(null,null,t,n)),P(t)},count:function(e){return O(e,(function(){return null}),null)},toArray:function(e){var t=[];return U(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(y(143));return e}},t.Component=w,t.Fragment=u,t.Profiler=c,t.PureComponent=x,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(y(267,e));var i=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=T.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)I.call(t,l)&&!E.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:u,props:i,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return j().useCallback(e,t)},t.useContext=function(e,t){return j().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return j().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return j().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return j().useLayoutEffect(e,t)},t.useMemo=function(e,t){return j().useMemo(e,t)},t.useReducer=function(e,t,n){return j().useReducer(e,t,n)},t.useRef=function(e){return j().useRef(e)},t.useState=function(e){return j().useState(e)},t.version="16.14.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(N([])));b&&b!==n&&r.call(b,a)&&(k=b);var x=g.prototype=m.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,s(x,"constructor",g),s(g,"constructor",y),y.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(T.prototype),s(T.prototype,o,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new T(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a,o;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,s=null,c=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},l=Date.now();t.unstable_now=function(){return Date.now()-l},n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(c,0))},r=function(e,t){s=setTimeout(e,t)},i=function(){clearTimeout(s)},a=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,h=window.Date,d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var m=h.now();t.unstable_now=function(){return h.now()-m}}var y=!1,g=null,k=-1,w=5,b=0;a=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,_=x.port2;x.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();b=e+w;try{g(!0,e)?_.postMessage(null):(y=!1,g=null)}catch(n){throw _.postMessage(null),n}}else y=!1},n=function(e){g=e,y||(y=!0,_.postMessage(null))},r=function(e,n){k=d((function(){e(t.unstable_now())}),n)},i=function(){p(k),k=-1}}function T(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>S(o,n))void 0!==s&&0>S(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>S(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],N=[],A=1,D=null,P=3,R=!1,O=!1,L=!1;function M(e){for(var t=I(N);null!==t;){if(null===t.callback)E(N);else{if(!(t.startTime<=e))break;E(N),t.sortIndex=t.expirationTime,T(C,t)}t=I(N)}}function F(e){if(L=!1,M(e),!O)if(null!==I(C))O=!0,n(U);else{var t=I(N);null!==t&&r(F,t.startTime-e)}}function U(e,n){O=!1,L&&(L=!1,i()),R=!0;var o=P;try{for(M(n),D=I(C);null!==D&&(!(D.expirationTime>n)||e&&!a());){var u=D.callback;if(null!==u){D.callback=null,P=D.priorityLevel;var s=u(D.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?D.callback=s:D===I(C)&&E(C),M(n)}else E(C);D=I(C)}if(null!==D)var c=!0;else{var l=I(N);null!==l&&r(F,l.startTime-n),c=!1}return c}finally{D=null,P=o,R=!1}}function V(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var j=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||R||(O=!0,n(U))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return I(C)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=j,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();if("object"===typeof o&&null!==o){var s=o.delay;s="number"===typeof s&&0<s?u+s:u,o="number"===typeof o.timeout?o.timeout:V(e)}else o=V(e),s=u;return e={id:A++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>u?(e.sortIndex=s,T(N,e),null===I(C)&&e===I(N)&&(L?i():L=!0,r(F,s-u))):(e.sortIndex=o,T(C,e),O||R||(O=!0,n(U))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();M(e);var n=I(C);return n!==D&&null!==D&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<D.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".2360031d.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="companylunch:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/CompanyLunch/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkcompanylunch=self.webpackChunkcompanylunch||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return j},SDK_VERSION:function(){return je},_DEFAULT_ENTRY_NAME:function(){return Se},_addComponent:function(){return De},_addOrOverwriteComponent:function(){return Pe},_apps:function(){return Ne},_clearComponents:function(){return Me},_components:function(){return Ae},_getProvider:function(){return Oe},_registerComponent:function(){return Re},_removeServiceInstance:function(){return Le},deleteApp:function(){return Ke},getApp:function(){return qe},getApps:function(){return ze},initializeApp:function(){return Be},onLog:function(){return He},registerVersion:function(){return Ge},setLogLevel:function(){return Qe}});var t=n(791),r=n(164);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function l(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function f(e){if(Array.isArray(e))return e}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){return f(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||c(e,t)||h()}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function w(e,t){if(t&&("object"===k(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function b(e){var t=g();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function x(e,t,n){return x=g()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},x.apply(null,arguments)}function _(e){var t="function"===typeof Map?new Map:void 0;return _=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return x(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),v(n,e)},_(e)}var T=n(757),I=n.n(T),E=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(E(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},C=function(e){return function(e){var t=E(e);return S.encodeByteArray(t,!0)}(e).replace(/\./g,"")},N=function(e){try{return S.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function A(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=A(e[n],t[n]));return e}var D=function(){function e(){var t=this;a(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return u(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function P(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[C(JSON.stringify({alg:"none",type:"JWT"})),C(JSON.stringify(a)),""].join(".")}function R(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function O(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(R())}function L(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function M(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function F(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function U(){var e=R();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function V(){return"object"===typeof indexedDB}var j=function(e){m(n,e);var t=b(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this,r)).code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(p(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(p(o),B.prototype.create),o}return u(n)}(_(Error)),B=function(){function e(t,n,r){a(this,e),this.service=t,this.serviceName=n,this.errors=r}return u(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?q(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new j(n,a,t);return o}}]),e}();function q(e,t){return e.replace(z,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var z=/\{\$([^}]+)}/g;function K(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function W(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(G(u)&&G(s)){if(!W(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function G(e){return null!==e&&"object"===typeof e}function H(e){for(var t=[],n=function(){var e=d(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Q(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=d(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Y(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function J(e,t){var n=new $(e,t);return n.subscribe.bind(n)}var $=function(){function e(t,n){var r=this;a(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return u(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=l(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=X),void 0===r.error&&(r.error=X),void 0===r.complete&&(r.complete=X);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function X(){}function Z(e){return e&&e._delegate?e._delegate:e}function ee(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var te=function(){function e(t){a(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return u(e,[{key:"transaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return new ne(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new re(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),ne=function(){function e(t){var n=this;a(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return u(e,[{key:"objectStore",value:function(e){return new re(this._transaction.objectStore(e))}}]),e}(),re=function(){function e(t){a(this,e),this._store=t}return u(e,[{key:"index",value:function(e){return new ie(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new ie(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return ee(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return ee(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return ee(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return ee(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),ie=function(){function e(t){a(this,e),this._index=t}return u(e,[{key:"get",value:function(e){return ee(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function ae(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function oe(e){return function(e){if(Array.isArray(e))return s(e)}(e)||ae(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function se(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ue(a,r,i,o,u,"next",e)}function u(e){ue(a,r,i,o,u,"throw",e)}o(void 0)}))}}var ce=function(){function e(t,n,r){a(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return u(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),le="[DEFAULT]",fe=function(){function e(t,n){a(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return u(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new D;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:le})}catch(s){}var t,n=l(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=d(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=se(T.mark((function e(){var t;return T.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(oe(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),oe(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=l(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=d(i.value,2),s=u[0],c=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Gb){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===le?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Gb){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;return this.component?this.component.multipleInstances?e:le:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var he,de,pe=function(){function e(t){a(this,e),this.name=t,this.providers=new Map}return u(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new fe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ve=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(de||(de={}));var me,ye,ge={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},ke=de.INFO,we=(i(he={},de.DEBUG,"log"),i(he,de.VERBOSE,"log"),i(he,de.INFO,"info"),i(he,de.WARN,"warn"),i(he,de.ERROR,"error"),he),be=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=we[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},xe=function(){function e(t){a(this,e),this.name=t,this._logLevel=ke,this._logHandler=be,this._userLogHandler=null,ve.push(this)}return u(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in de))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ge[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.DEBUG].concat(t)),this._logHandler.apply(this,[this,de.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.VERBOSE].concat(t)),this._logHandler.apply(this,[this,de.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.INFO].concat(t)),this._logHandler.apply(this,[this,de.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.WARN].concat(t)),this._logHandler.apply(this,[this,de.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,de.ERROR].concat(t)),this._logHandler.apply(this,[this,de.ERROR].concat(t))}}]),e}();var _e=function(){function e(t){a(this,e),this.container=t}return u(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Te="@firebase/app",Ie="0.7.21",Ee=new xe("@firebase/app"),Se="[DEFAULT]",Ce=(i(me={},Te,"fire-core"),i(me,"@firebase/app-compat","fire-core-compat"),i(me,"@firebase/analytics","fire-analytics"),i(me,"@firebase/analytics-compat","fire-analytics-compat"),i(me,"@firebase/app-check","fire-app-check"),i(me,"@firebase/app-check-compat","fire-app-check-compat"),i(me,"@firebase/auth","fire-auth"),i(me,"@firebase/auth-compat","fire-auth-compat"),i(me,"@firebase/database","fire-rtdb"),i(me,"@firebase/database-compat","fire-rtdb-compat"),i(me,"@firebase/functions","fire-fn"),i(me,"@firebase/functions-compat","fire-fn-compat"),i(me,"@firebase/installations","fire-iid"),i(me,"@firebase/installations-compat","fire-iid-compat"),i(me,"@firebase/messaging","fire-fcm"),i(me,"@firebase/messaging-compat","fire-fcm-compat"),i(me,"@firebase/performance","fire-perf"),i(me,"@firebase/performance-compat","fire-perf-compat"),i(me,"@firebase/remote-config","fire-rc"),i(me,"@firebase/remote-config-compat","fire-rc-compat"),i(me,"@firebase/storage","fire-gcs"),i(me,"@firebase/storage-compat","fire-gcs-compat"),i(me,"@firebase/firestore","fire-fst"),i(me,"@firebase/firestore-compat","fire-fst-compat"),i(me,"fire-js","fire-js"),i(me,"firebase","fire-js-all"),me),Ne=new Map,Ae=new Map;function De(e,t){try{e.container.addComponent(t)}catch(n){Ee.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Pe(e,t){e.container.addOrOverwriteComponent(t)}function Re(e){var t=e.name;if(Ae.has(t))return Ee.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ae.set(t,e);var n,r=l(Ne.values());try{for(r.s();!(n=r.n()).done;){De(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Oe(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Se;Oe(e,t).clearInstance(n)}function Me(){Ae.clear()}var Fe=(i(ye={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(ye,"bad-app-name","Illegal App name: '{$appName}"),i(ye,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),i(ye,"app-deleted","Firebase App named '{$appName}' already deleted"),i(ye,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),i(ye,"invalid-log-argument","First argument to `onLog` must be null or a function."),i(ye,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),i(ye,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),i(ye,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),i(ye,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),ye),Ue=new B("app","Firebase",Fe),Ve=function(){function e(t,n,r){var i=this;a(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ce("app",(function(){return i}),"PUBLIC"))}return u(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ue.create("app-deleted",{appName:this._name})}}]),e}(),je="9.6.11";function Be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Se,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ue.create("bad-app-name",{appName:String(i)});var a=Ne.get(i);if(a){if(W(e,a.options)&&W(r,a.config))return a;throw Ue.create("duplicate-app",{appName:i})}var o,u=new pe(i),s=l(Ae.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var f=new Ve(e,r,u);return Ne.set(i,f),f}function qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=Ne.get(e);if(!t)throw Ue.create("no-app",{appName:e});return t}function ze(){return Array.from(Ne.values())}function Ke(e){return We.apply(this,arguments)}function We(){return We=se(T.mark((function e(t){var n;return T.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ne.has(n)){e.next=6;break}return Ne.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),We.apply(this,arguments)}function Ge(e,t,n){var r,i=null!==(r=Ce[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ee.warn(u.join(" "))}Re(new ce("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function He(e,t){if(null!==e&&"function"!==typeof e)throw Ue.create("invalid-log-argument");!function(e,t){var n,r=l(ve);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ge[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:de[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Qe(e){var t;t=e,ve.forEach((function(e){e.setLogLevel(t)}))}var Ye="firebase-heartbeat-store",Je=null;function $e(){var e,t,n;return Je||(Je=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(Ye)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new te(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new te(a.result),e.oldVersion,e.newVersion,new ne(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw Ue.create("storage-open",{originalErrorMessage:e.message})}))),Je}function Xe(e){return Ze.apply(this,arguments)}function Ze(){return Ze=se(T.mark((function e(t){var n;return T.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$e();case 3:return n=e.sent,e.abrupt("return",n.transaction(Ye).objectStore(Ye).get(nt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Ue.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Ze.apply(this,arguments)}function et(e,t){return tt.apply(this,arguments)}function tt(){return tt=se(T.mark((function e(t,n){var r,i,a;return T.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$e();case 3:return r=e.sent,i=r.transaction(Ye,"readwrite"),a=i.objectStore(Ye),e.next=8,a.put(n,nt(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Ue.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),tt.apply(this,arguments)}function nt(e){return"".concat(e.name,"!").concat(e.options.appId)}var rt=function(){function e(t){var n=this;a(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new st(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return u(e,[{key:"triggerHeartbeat",value:function(){var e=se(T.mark((function e(){var t,n,r;return T.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=it(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=se(T.mark((function e(){var t,n,r,i,a;return T.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=it(),n=at(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=C(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function it(){return(new Date).toISOString().substring(0,10)}function at(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=l(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ct(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ct(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ot,ut,st=function(){function e(t){a(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return u(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=se(T.mark((function e(){return T.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=se(T.mark((function e(){var t;return T.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Xe(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=se(T.mark((function e(t){var n,r;return T.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",et(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=se(T.mark((function e(t){var n,r;return T.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",et(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(oe(r.heartbeats),oe(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ct(e){return C(JSON.stringify({version:2,heartbeats:e})).length}ot="",Re(new ce("platform-logger",(function(e){return new _e(e)}),"PRIVATE")),Re(new ce("heartbeat",(function(e){return new rt(e)}),"PRIVATE")),Ge(Te,Ie,ot),Ge(Te,Ie,"esm2017"),Ge("fire-js","");var lt=function(){function e(t,n){var r=this;a(this,e),this._delegate=t,this.firebase=n,De(t,new ce("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return u(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Ke(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){De(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Pe(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),ft=(i(ut={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(ut,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ut),ht=new B("app-compat","Firebase",ft);var dt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Be(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(K(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ge,setLogLevel:Qe,onLog:He,apps:null,SDK_VERSION:je,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Re(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw ht.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&A(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!K(n,e=e||Se))throw ht.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(lt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){A(n,e)},createSubscribe:J,ErrorFactory:B,deepExtend:A}),n}(),pt=new xe("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){pt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var vt=self.firebase.SDK_VERSION;vt&&vt.indexOf("LITE")>=0&&pt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var mt=dt;!function(e){Ge("@firebase/app-compat","0.1.22",e)}();function yt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function gt(){return gt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=yt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},gt.apply(this,arguments)}mt.registerVersion("firebase","9.6.11","app-compat");function kt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var wt;Object.create;var bt="facebook.com",xt="github.com",_t="google.com",Tt="password",It="twitter.com",Et="EMAIL_SIGNIN",St="PASSWORD_RESET",Ct="RECOVER_EMAIL",Nt="REVERT_SECOND_FACTOR_ADDITION",At="VERIFY_AND_CHANGE_EMAIL",Dt="VERIFY_EMAIL";function Pt(){return i({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Rt=function(){var e;return i(e={},"admin-restricted-operation","This operation is restricted to administrators only."),i(e,"argument-error",""),i(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),i(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),i(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),i(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),i(e,"cordova-not-ready","Cordova framework is not ready."),i(e,"cors-unsupported","This browser is not supported."),i(e,"credential-already-in-use","This credential is already associated with a different user account."),i(e,"custom-token-mismatch","The custom token corresponds to a different audience."),i(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),i(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),i(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),i(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),i(e,"email-already-in-use","The email address is already in use by another account."),i(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),i(e,"expired-action-code","The action code has expired."),i(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),i(e,"internal-error","An internal AuthError has occurred."),i(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),i(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),i(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),i(e,"invalid-auth-event","An internal AuthError has occurred."),i(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),i(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),i(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),i(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),i(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),i(e,"invalid-email","The email address is badly formatted."),i(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),i(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),i(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),i(e,"invalid-credential","The supplied auth credential is malformed or has expired."),i(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),i(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),i(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),i(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),i(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),i(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),i(e,"wrong-password","The password is invalid or the user does not have a password."),i(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),i(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),i(e,"invalid-provider-id","The specified provider ID is invalid."),i(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),i(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),i(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),i(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),i(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),i(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),i(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),i(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),i(e,"missing-continue-uri","A continue URL must be provided in the request."),i(e,"missing-iframe-start","An internal AuthError has occurred."),i(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),i(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),i(e,"missing-multi-factor-info","No second factor identifier is provided."),i(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),i(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),i(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),i(e,"app-deleted","This instance of FirebaseApp has been deleted."),i(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),i(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),i(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),i(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),i(e,"no-auth-event","An internal AuthError has occurred."),i(e,"no-such-provider","User was not linked to an account with the given provider."),i(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),i(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),i(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),i(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),i(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),i(e,"provider-already-linked","User can only be linked to one identity for the given provider."),i(e,"quota-exceeded","The project's quota for this operation has been exceeded."),i(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),i(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),i(e,"rejected-credential","The request contains malformed or mismatching credentials."),i(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),i(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),i(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),i(e,"timeout","The operation has timed out."),i(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),i(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),i(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),i(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),i(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),i(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),i(e,"unverified-email","The operation requires a verified email."),i(e,"user-cancelled","The user did not grant your application the permissions it requested."),i(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),i(e,"user-disabled","The user account has been disabled by an administrator."),i(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),i(e,"user-signed-out",""),i(e,"weak-password","The password must be 6 characters long or more."),i(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),i(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Ot=Pt,Lt=new B("auth","Firebase",Pt()),Mt=new xe("@firebase/auth");function Ft(e){if(Mt.logLevel<=de.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mt.error.apply(Mt,["Auth (".concat(je,"): ").concat(e)].concat(n))}}function Ut(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw qt.apply(void 0,[e].concat(n))}function Vt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qt.apply(void 0,[e].concat(n))}function jt(e,t,n){var r=Object.assign(Object.assign({},Ot()),i({},t,n));return new B("auth","Firebase",r).create(t,{appName:e.name})}function Bt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ut(e,"argument-error"),jt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function qt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=oe(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(oe(o)))}return Lt.create.apply(Lt,[e].concat(n))}function zt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw qt.apply(void 0,[t].concat(r))}}function Kt(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Ft(t),new Error(t)}function Wt(e,t){e||Kt(t)}var Gt=new Map;function Ht(e){Wt(e instanceof Function,"Expected a class definition");var t=Gt.get(e);return t?(Wt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Gt.set(e,t),t)}function Qt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Yt(){return"http:"===Jt()||"https:"===Jt()}function Jt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var $t=function(){function e(t,n){a(this,e),this.shortDelay=t,this.longDelay=n,Wt(n>t,"Short delay should be less than long delay!"),this.isMobile=O()||F()}return u(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Yt()||M()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Xt(e,t){Wt(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Zt=function(){function e(){a(this,e)}return u(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Kt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Kt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Kt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),en=(i(wt={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),i(wt,"MISSING_CUSTOM_TOKEN","internal-error"),i(wt,"INVALID_IDENTIFIER","invalid-email"),i(wt,"MISSING_CONTINUE_URI","internal-error"),i(wt,"INVALID_PASSWORD","wrong-password"),i(wt,"MISSING_PASSWORD","internal-error"),i(wt,"EMAIL_EXISTS","email-already-in-use"),i(wt,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),i(wt,"INVALID_IDP_RESPONSE","invalid-credential"),i(wt,"INVALID_PENDING_TOKEN","invalid-credential"),i(wt,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),i(wt,"MISSING_REQ_TYPE","internal-error"),i(wt,"EMAIL_NOT_FOUND","user-not-found"),i(wt,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),i(wt,"EXPIRED_OOB_CODE","expired-action-code"),i(wt,"INVALID_OOB_CODE","invalid-action-code"),i(wt,"MISSING_OOB_CODE","internal-error"),i(wt,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),i(wt,"INVALID_ID_TOKEN","invalid-user-token"),i(wt,"TOKEN_EXPIRED","user-token-expired"),i(wt,"USER_NOT_FOUND","user-token-expired"),i(wt,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),i(wt,"INVALID_CODE","invalid-verification-code"),i(wt,"INVALID_SESSION_INFO","invalid-verification-id"),i(wt,"INVALID_TEMPORARY_PROOF","invalid-credential"),i(wt,"MISSING_SESSION_INFO","missing-verification-id"),i(wt,"SESSION_EXPIRED","code-expired"),i(wt,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),i(wt,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),i(wt,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),i(wt,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),i(wt,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),i(wt,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),i(wt,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),i(wt,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),i(wt,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),i(wt,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),i(wt,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),wt),tn=new $t(3e4,6e4);function nn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function rn(e,t,n,r){return an.apply(this,arguments)}function an(){return an=se(I().mark((function e(t,n,r,i){var a,o=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",on(t,a,se(I().mark((function e(){var a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=H(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Zt.fetch()(ln(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),an.apply(this,arguments)}function on(e,t,n){return un.apply(this,arguments)}function un(){return(un=se(I().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,p;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},en),n),e.prev=2,a=new fn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw hn(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=d(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw hn(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw hn(t,"email-already-in-use",u);case 25:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw jt(t,p,h);case 30:Ut(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof j)){e.next=37;break}throw e.t0;case 37:Ut(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function sn(e,t,n,r){return cn.apply(this,arguments)}function cn(){return cn=se(I().mark((function e(t,n,r,i){var a,o,u=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,rn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ut(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),cn.apply(this,arguments)}function ln(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Xt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var fn=function(){function e(t){var n=this;a(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Vt(n.auth,"network-request-failed"))}),tn.get())}))}return u(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function hn(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Vt(e,t,r);return i.customData._tokenResponse=n,i}function dn(e,t){return pn.apply(this,arguments)}function pn(){return(pn=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vn(e,t){return mn.apply(this,arguments)}function mn(){return(mn=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yn(e,t){return gn.apply(this,arguments)}function gn(){return(gn=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kn(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function wn(){return wn=se(I().mark((function e(t){var n,r,i,a,o,u,s=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Z(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,zt((a=xn(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:kn(bn(a.auth_time)),issuedAtTime:kn(bn(a.iat)),expirationTime:kn(bn(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),wn.apply(this,arguments)}function bn(e){return 1e3*Number(e)}function xn(e){var t=d(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Ft("JWT malformed, contained fewer than 3 sections"),null;try{var a=N(r);return a?JSON.parse(a):(Ft("Failed to decode base64 JWT payload"),null)}catch(o){return Ft("Caught error parsing JWT payload as JSON",o),null}}function _n(e,t){return Tn.apply(this,arguments)}function Tn(){return Tn=se(I().mark((function e(t,n){var r=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof j&&In(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Tn.apply(this,arguments)}function In(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var En=function(){function e(t){a(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return u(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(se(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Sn=function(){function e(t,n){a(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return u(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=kn(this.lastLoginAt),this.creationTime=kn(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Cn(e){return Nn.apply(this,arguments)}function Nn(){return Nn=se(I().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,_n(t,yn(r,{idToken:i}));case 6:zt(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Pn(o.providerUserInfo):[],s=Dn(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Sn(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Nn.apply(this,arguments)}function An(){return(An=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Z(t),e.next=3,Cn(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dn(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(oe(n),oe(t))}function Pn(e){return e.map((function(e){var t=e.providerId,n=kt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Rn(e,t){return On.apply(this,arguments)}function On(){return(On=se(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,on(t,{},se(I().mark((function e(){var r,i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=H({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=ln(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Zt.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ln=function(){function e(){a(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return u(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){zt(e.idToken,"internal-error"),zt("undefined"!==typeof e.idToken,"internal-error"),zt("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=xn(e);return zt(t,"internal-error"),zt("undefined"!==typeof t.exp,"internal-error"),zt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=se(I().mark((function e(t){var n,r=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],zt(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=se(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Kt("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(zt("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(zt("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(zt("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Mn(e,t){zt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Fn=function(){function e(t){a(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,o=kt(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new En(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?oe(o.providerData):[],this.metadata=new Sn(o.createdAt||void 0,o.lastLoginAt||void 0)}return u(e,[{key:"getIdToken",value:function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_n(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(zt(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return wn.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return An.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(zt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){zt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=se(I().mark((function e(t){var n,r,i=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Cn(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=se(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,_n(this,dn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;zt(k&&_,t,"internal-error");var T=Ln.fromJSON(this.name,_);zt("string"===typeof k,t,"internal-error"),Mn(f,t.name),Mn(h,t.name),zt("boolean"===typeof w,t,"internal-error"),zt("boolean"===typeof b,t,"internal-error"),Mn(d,t.name),Mn(p,t.name),Mn(v,t.name),Mn(m,t.name),Mn(y,t.name),Mn(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:T,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(I.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(I._redirectEventId=m),I}},{key:"_fromIdTokenResponse",value:function(){var t=se(I().mark((function t(n,r){var i,a,o,u=arguments;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Ln).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Cn(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Un=function(){function e(){a(this,e),this.type="NONE",this.storage={}}return u(e,[{key:"_isAvailable",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Un.type="NONE";var Vn=Un;function jn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Bn=function(){function e(t,n,r){a(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,o=i.config,u=i.name;this.fullUserKey=jn(this.userKey,o.apiKey,u),this.fullPersistenceKey=jn("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return u(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=se(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Fn._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=se(I().mark((function t(n,r){var i,a,o,u,s,c,f,h,d,p,v,m=arguments;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ht(Vn),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Ht(Vn),u=jn(i,n.config.apiKey,n.name),s=null,c=l(r),t.prev=10,c.s();case 12:if((f=c.n()).done){t.next=29;break}return h=f.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(d=t.sent)){t.next=23;break}return p=Fn._fromJSON(n,d),h!==o&&(s=p),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function qn(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Gn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(zn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Qn(t))return"Blackberry";if(Yn(t))return"Webos";if(Kn(t))return"Safari";if((t.includes("chrome/")||Wn(t))&&!t.includes("edge/"))return"Chrome";if(Hn(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function zn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/firefox\//i.test(e)}function Kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/crios\//i.test(e)}function Gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/iemobile/i.test(e)}function Hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/android/i.test(e)}function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/blackberry/i.test(e)}function Yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/webos/i.test(e)}function Jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/iphone|ipad|ipod/i.test(e)}function $n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return Jn(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Xn(){return U()&&10===document.documentMode}function Zn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return Jn(e)||Hn(e)||Yn(e)||Qn(e)||/windows phone/i.test(e)||Gn(e)}function er(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=qn(R());break;case"Worker":t="".concat(qn(R()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(je,"/").concat(r)}var tr=function(){function e(t,n,r){a(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rr(this),this.idTokenSubscription=new rr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return u(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ht(t)),this._initializationPromise=this.queue(se(I().mark((function r(){var i,a;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Bn.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=se(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=se(I().mark((function e(t){var n,r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return zt(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Cn(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Z(t):null)&&zt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=se(I().mark((function e(t){var n=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&zt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(se(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ht(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new B("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=se(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return zt(n=t&&Ht(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Bn.create(this,[Ht(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=se(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=se(I().mark((function e(t){var n=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return zt(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return zt(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=er(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=se(I().mark((function e(){var t,n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function nr(e){return Z(e)}var rr=function(){function e(t){var n=this;a(this,e),this.auth=t,this.observer=null,this.addObserver=J((function(e){return n.observer=e}))}return u(e,[{key:"next",get:function(){return zt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function ir(e,t,n){var r=nr(e);zt(r._canInitEmulator,r,"emulator-config-failed"),zt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=ar(t),o=function(e){var t=ar(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:or(r.substr(a.length+1))}}var o=d(r.split(":"),2);return{host:o[0],port:or(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ar(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function or(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var ur=function(){function e(t,n){a(this,e),this.providerId=t,this.signInMethod=n}return u(e,[{key:"toJSON",value:function(){return Kt("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Kt("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Kt("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Kt("not implemented")}}]),e}();function sr(e,t){return cr.apply(this,arguments)}function cr(){return(cr=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rn(t,"POST","/v1/accounts:resetPassword",nn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lr(e,t){return fr.apply(this,arguments)}function fr(){return(fr=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hr(e,t){return dr.apply(this,arguments)}function dr(){return(dr=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rn(t,"POST","/v1/accounts:update",nn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pr(e,t){return vr.apply(this,arguments)}function vr(){return(vr=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sn(t,"POST","/v1/accounts:signInWithPassword",nn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mr(e,t){return yr.apply(this,arguments)}function yr(){return(yr=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rn(t,"POST","/v1/accounts:sendOobCode",nn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gr(e,t){return kr.apply(this,arguments)}function kr(){return(kr=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wr(e,t){return br.apply(this,arguments)}function br(){return(br=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xr(e,t){return _r.apply(this,arguments)}function _r(){return(_r=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tr(e,t){return Ir.apply(this,arguments)}function Ir(){return(Ir=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Er(e,t){return Sr.apply(this,arguments)}function Sr(){return(Sr=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sn(t,"POST","/v1/accounts:signInWithEmailLink",nn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(e,t){return Nr.apply(this,arguments)}function Nr(){return(Nr=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sn(t,"POST","/v1/accounts:signInWithEmailLink",nn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ar=function(e){m(n,e);var t=b(n);function n(e,r,i){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return a(this,n),(o=t.call(this,"password",i))._email=e,o._password=r,o._tenantId=u,o}return u(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",pr(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Er(t,{email:this._email,oobCode:this._password}));case 5:Ut(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",lr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Cr(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ut(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(ur);function Dr(e,t){return Pr.apply(this,arguments)}function Pr(){return(Pr=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sn(t,"POST","/v1/accounts:signInWithIdp",nn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rr=function(e){m(n,e);var t=b(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return u(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Dr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Dr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Dr(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=H(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ut("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=kt(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(ur);function Or(e,t){return Lr.apply(this,arguments)}function Lr(){return(Lr=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rn(t,"POST","/v1/accounts:sendVerificationCode",nn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mr(){return(Mr=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sn(t,"POST","/v1/accounts:signInWithPhoneNumber",nn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fr(){return(Fr=se(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sn(t,"POST","/v1/accounts:signInWithPhoneNumber",nn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw hn(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ur=i({},"USER_NOT_FOUND","user-not-found");function Vr(){return(Vr=se(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",sn(t,"POST","/v1/accounts:signInWithPhoneNumber",nn(t,r),Ur));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jr=function(e){m(n,e);var t=b(n);function n(e){var r;return a(this,n),(r=t.call(this,"phone","phone")).params=e,r}return u(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Mr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Fr.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Vr.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(ur);var Br=function(){function e(t){var n,r,i,o,u,s;a(this,e);var c=Q(Y(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,f=null!==(r=c.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);zt(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(u=c.languageCode)&&void 0!==u?u:null,this.tenantId=null!==(s=c.tenantId)&&void 0!==s?s:null}return u(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Q(Y(e)).link,n=t?Q(Y(t)).deep_link_id:null,r=Q(Y(e)).deep_link_id;return(r?Q(Y(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Gb){return null}}}]),e}();var qr=function(){function e(){a(this,e),this.providerId=e.PROVIDER_ID}return u(e,null,[{key:"credential",value:function(e,t){return Ar._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Br.parseLink(t);return zt(n,"argument-error"),Ar._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();qr.PROVIDER_ID="password",qr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",qr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var zr=function(){function e(t){a(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return u(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Kr=function(e){m(n,e);var t=b(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).scopes=[],e}return u(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return oe(this.scopes)}}]),n}(zr),Wr=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return zt(e.idToken||e.accessToken,"argument-error"),Rr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return zt("providerId"in t&&"signInMethod"in t,"argument-error"),Rr._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Kr),Gr=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.call(this,"facebook.com")}return u(n,null,[{key:"credential",value:function(e){return Rr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Gb){return null}}}]),n}(Kr);Gr.FACEBOOK_SIGN_IN_METHOD="facebook.com",Gr.PROVIDER_ID="facebook.com";var Hr=function(e){m(n,e);var t=b(n);function n(){var e;return a(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return u(n,null,[{key:"credential",value:function(e,t){return Rr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Gb){return null}}}]),n}(Kr);Hr.GOOGLE_SIGN_IN_METHOD="google.com",Hr.PROVIDER_ID="google.com";var Qr=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.call(this,"github.com")}return u(n,null,[{key:"credential",value:function(e){return Rr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Gb){return null}}}]),n}(Kr);Qr.GITHUB_SIGN_IN_METHOD="github.com",Qr.PROVIDER_ID="github.com";var Yr=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return u(n,[{key:"_getIdTokenResponse",value:function(e){return Dr(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Dr(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Dr(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ur),Jr=function(e){m(n,e);var t=b(n);function n(e){return a(this,n),zt(e.startsWith("saml."),"argument-error"),t.call(this,e)}return u(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Yr.fromJSON(e);return zt(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Yr._create(r,n)}catch(i){return null}}}]),n}(zr),$r=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.call(this,"twitter.com")}return u(n,null,[{key:"credential",value:function(e,t){return Rr._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Gb){return null}}}]),n}(Kr);function Xr(e,t){return Zr.apply(this,arguments)}function Zr(){return(Zr=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sn(t,"POST","/v1/accounts:signUp",nn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}$r.TWITTER_SIGN_IN_METHOD="twitter.com",$r.PROVIDER_ID="twitter.com";var ei=function(){function e(t){a(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return u(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=se(I().mark((function t(n,r,i){var a,o,u,s,c=arguments;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Fn._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=ti(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=se(I().mark((function t(n,r,i){var a;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ti(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ti(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function ni(){return ni=se(I().mark((function e(t){var n,r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ei({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Xr(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ei._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}var ri=function(e){m(n,e);var t=b(n);function n(e,r,i,o){var u,s;return a(this,n),(u=t.call(this,r.code,r.message)).operationType=i,u.user=o,Object.setPrototypeOf(p(u),n.prototype),u.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},u}return u(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(j);function ii(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ri._fromErrorAndOperation(e,n,t,r);throw n}))}function ai(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function oi(e,t){return ui.apply(this,arguments)}function ui(){return ui=se(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),e.next=3,li(!0,r,n);case 3:return e.t0=vn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=ai(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),ui.apply(this,arguments)}function si(e,t){return ci.apply(this,arguments)}function ci(){return ci=se(I().mark((function e(t,n){var r,i,a=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=_n,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ei._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),ci.apply(this,arguments)}function li(e,t,n){return fi.apply(this,arguments)}function fi(){return(fi=se(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn(n);case 2:i=ai(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",zt(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hi(e,t){return di.apply(this,arguments)}function di(){return di=se(I().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,_n(t,ii(i,a,n,t),r);case 6:return zt((o=e.sent).idToken,i,"internal-error"),zt(u=xn(o.idToken),i,"internal-error"),s=u.sub,zt(t.uid===s,i,"user-mismatch"),e.abrupt("return",ei._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ut(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),di.apply(this,arguments)}function pi(e,t){return vi.apply(this,arguments)}function vi(){return vi=se(I().mark((function e(t,n){var r,i,a,o,u=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,ii(t,i,n);case 4:return a=e.sent,e.next=7,ei._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),vi.apply(this,arguments)}function mi(e,t){return yi.apply(this,arguments)}function yi(){return(yi=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pi(nr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gi(e,t){return ki.apply(this,arguments)}function ki(){return(ki=se(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),e.next=3,li(!1,r,n.providerId);case 3:return e.abrupt("return",si(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wi(e,t){return bi.apply(this,arguments)}function bi(){return(bi=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hi(Z(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xi(e,t){return _i.apply(this,arguments)}function _i(){return(_i=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sn(t,"POST","/v1/accounts:signInWithCustomToken",nn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ti(){return(Ti=se(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nr(t),e.next=3,xi(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ei._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ii=function(){function e(t,n){a(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return u(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ei._fromServerResponse(e,t):Ut(e,"internal-error")}}]),e}(),Ei=function(e){m(n,e);var t=b(n);function n(e){var r;return a(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return u(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ii);function Si(e,t,n){var r;zt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),zt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(zt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(zt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ci(){return(Ci=se(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Z(t),a={requestType:"PASSWORD_RESET",email:n},r&&Si(i,a,r),e.next=5,wr(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ni(){return(Ni=se(I().mark((function e(t,n,r){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sr(Z(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ai(){return(Ai=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr(Z(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Di(e,t){return Pi.apply(this,arguments)}function Pi(){return(Pi=se(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),e.next=3,sr(r,{oobCode:n});case 3:i=e.sent,zt(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return zt(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:zt(i.mfaInfo,r,"internal-error");case 13:zt(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ii._fromServerResponse(nr(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ri(){return(Ri=se(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Di(Z(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oi(e,t,n){return Li.apply(this,arguments)}function Li(){return(Li=se(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nr(t),e.next=3,Xr(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ei._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mi(){return(Mi=se(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Z(t),a={requestType:"EMAIL_SIGNIN",email:n},zt(r.handleCodeInApp,i,"argument-error"),r&&Si(i,a,r),e.next=6,xr(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fi(){return(Fi=se(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Z(t),zt((a=qr.credentialWithLink(n,r||Qt()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",mi(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ui(e,t){return Vi.apply(this,arguments)}function Vi(){return(Vi=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rn(t,"POST","/v1/accounts:createAuthUri",nn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ji(){return(ji=se(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Yt()?Qt():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ui(Z(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bi(){return(Bi=se(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Z(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Si(r.auth,a,n),e.next=8,gr(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qi(){return(qi=se(I().mark((function e(t,n,r){var i,a,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Z(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Si(i.auth,o,r),e.next=8,Tr(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zi(e,t){return Ki.apply(this,arguments)}function Ki(){return(Ki=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wi(){return(Wi=se(I().mark((function e(t,n){var r,i,a,o,u,s,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Z(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,_n(a,zi(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gi(e,t,n){return Hi.apply(this,arguments)}function Hi(){return(Hi=se(I().mark((function e(t,n,r){var i,a,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,_n(t,lr(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qi=u((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Yi=function(e){m(n,e);var t=b(n);function n(e,r,i,o){var u;return a(this,n),(u=t.call(this,e,r,i)).username=o,u}return u(n)}(Qi),Ji=function(e){m(n,e);var t=b(n);function n(e,r){return a(this,n),t.call(this,e,"facebook.com",r)}return u(n)}(Qi),$i=function(e){m(n,e);var t=b(n);function n(e,r){return a(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return u(n)}(Yi),Xi=function(e){m(n,e);var t=b(n);function n(e,r){return a(this,n),t.call(this,e,"google.com",r)}return u(n)}(Qi),Zi=function(e){m(n,e);var t=b(n);function n(e,r,i){return a(this,n),t.call(this,e,"twitter.com",r,i)}return u(n)}(Yi);function ea(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=xn(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Qi(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ji(a,i);case"github.com":return new $i(a,i);case"google.com":return new Xi(a,i);case"twitter.com":return new Zi(a,i,e.screenName||null);case"custom":case"anonymous":return new Qi(a,null);default:return new Qi(a,r,i)}}(n)}var ta=function(){function e(t,n){a(this,e),this.type=t,this.credential=n}return u(e,[{key:"toJSON",value:function(){return{multiFactorSession:i({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),na=function(){function e(t,n,r){a(this,e),this.session=t,this.hints=n,this.signInResolver=r}return u(e,[{key:"resolveSignIn",value:function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=nr(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Ii._fromServerResponse(r,e)}));zt(i.mfaPendingCredential,r,"internal-error");var o=ta._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=se(I().mark((function e(t){var a,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ei._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return zt(n.user,r,"internal-error"),e.abrupt("return",ei._forOperation(n.user,n.operationType,u));case 17:Ut(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ra(e,t){return rn(e,"POST","/v2/accounts/mfaEnrollment:start",nn(e,t))}var ia=function(){function e(t){var n=this;a(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ii._fromServerResponse(t.auth,e)})))}))}return u(e,[{key:"getSession",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ta,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=se(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,_n(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=se(I().mark((function e(t){var n,r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,_n(this.user,rn(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",nn(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),aa=new WeakMap;var oa="__sak",ua=function(){function e(t,n){a(this,e),this.storageRetriever=t,this.type=n}return u(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(oa,"1"),this.storage.removeItem(oa),Promise.resolve(!0)):Promise.resolve(!1)}catch(Gb){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var sa=function(e){m(n,e);var t=b(n);function n(){var e;return a(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=R();return Kn(e)||Jn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Zn(),e._shouldAllowMigration=!0,e}return u(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Xn()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=se(I().mark((function e(t,r){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(y(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=se(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(y(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(y(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(ua);sa.type="LOCAL";var ca=sa,la=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return u(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ua);la.type="SESSION";var fa=la;function ha(e){return Promise.all(e.map(function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var da=function(){function e(t){a(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return u(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=se(I().mark((function e(t){var n,r,i,a,o,u,s,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ha(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function pa(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}da.receivers=[];var va=function(){function e(t){a(this,e),this.target=t,this.handlers=new Set}return u(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=se(I().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=pa("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function ma(){return window}function ya(){return"undefined"!==typeof ma().WorkerGlobalScope&&"function"===typeof ma().importScripts}function ga(){return ka.apply(this,arguments)}function ka(){return(ka=se(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function wa(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var ba="firebaseLocalStorageDb",xa="firebaseLocalStorage",_a="fbase_key",Ta=function(){function e(t){a(this,e),this.request=t}return u(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ia(e,t){return e.transaction([xa],t?"readwrite":"readonly").objectStore(xa)}function Ea(){var e=indexedDB.deleteDatabase(ba);return new Ta(e).toPromise()}function Sa(){var e=indexedDB.open(ba,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(xa,{keyPath:_a})}catch(r){n(r)}})),e.addEventListener("success",se(I().mark((function n(){var r;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(xa)){n.next=12;break}return r.close(),n.next=5,Ea();case 5:return n.t0=t,n.next=8,Sa();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Ca(e,t,n){return Na.apply(this,arguments)}function Na(){return Na=se(I().mark((function e(t,n,r){var a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Ia(t,!0).put((i(a={},_a,n),i(a,"value",r),a)),e.abrupt("return",new Ta(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),Na.apply(this,arguments)}function Aa(e,t){return Da.apply(this,arguments)}function Da(){return Da=se(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ia(t,!1).get(n),e.next=3,new Ta(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Da.apply(this,arguments)}function Pa(e,t){var n=Ia(e,!0).delete(t);return new Ta(n).toPromise()}var Ra=function(){function e(){a(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return u(e,[{key:"_openDb",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Sa();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=se(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ya()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=se(I().mark((function e(){var t=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=da._getInstance(ya()?self:null),this.receiver._subscribe("keyChanged",function(){var e=se(I().mark((function e(n,r){var i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=se(I().mark((function e(){var t,n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ga();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new va(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&wa()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=se(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Sa();case 5:return t=e.sent,e.next=8,Ca(t,oa,"1");case 8:return e.next=10,Pa(t,oa);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=se(I().mark((function e(t,n){var r=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Ca(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Aa(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=se(I().mark((function e(t){var n=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Pa(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=se(I().mark((function e(){var t,n,r,i,a,o,u,s,c,f,h;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ia(e,!1).getAll();return new Ta(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=l(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(d){i.e(d)}finally{i.f()}for(c=0,f=Object.keys(this.localCache);c<f.length;c++)h=f[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(se(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ra.type="LOCAL";var Oa=Ra;function La(e,t){return rn(e,"POST","/v2/accounts/mfaSignIn:start",nn(e,t))}function Ma(e){return Fa.apply(this,arguments)}function Fa(){return(Fa=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ua(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Vt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Va(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ja=1e12,Ba=function(){function e(t){a(this,e),this.auth=t,this.counter=ja,this._widgets=new Map}return u(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new qa(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ja;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ja;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=se(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ja,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),qa=function(){function e(t,n,r){var i=this;a(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var o="string"===typeof t?document.getElementById(t):t;zt(o,"argument-error",{appName:n}),this.container=o,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return u(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var za=Va("rcb"),Ka=new $t(3e4,6e4),Wa="https://www.google.com/recaptcha/api.js?",Ga=function(){function e(){a(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ma().grecaptcha}return u(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return zt(Ha(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(ma().grecaptcha):new Promise((function(r,i){var a=ma().setTimeout((function(){i(Vt(e,"network-request-failed"))}),Ka.get());ma()[za]=function(){ma().clearTimeout(a),delete ma()[za];var o=ma().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Vt(e,"internal-error"))},Ua("".concat(Wa,"?").concat(H({onload:za,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Vt(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!ma().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Ha(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Qa=function(){function e(){a(this,e)}return u(e,[{key:"load",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ba(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Ya="recaptcha",Ja={theme:"light",type:"image"},$a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Ja),r=arguments.length>2?arguments[2]:void 0;a(this,e),this.parameters=n,this.type=Ya,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nr(r),this.isInvisible="invisible"===this.parameters.size,zt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;zt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qa:new Ga,this.validateStartingState()}return u(e,[{key:"verify",value:function(){var e=se(I().mark((function e(){var t,n,r,i=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){zt(!this.parameters.sitekey,this.auth,"argument-error"),zt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),zt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=ma()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){zt(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=se(I().mark((function e(){var t,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=se(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zt(Yt()&&!ya(),this.auth,"internal-error"),e.next=3,Xa();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ma(this.auth);case 8:zt(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return zt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Xa(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Za=function(){function e(t,n){a(this,e),this.verificationId=t,this.onConfirmation=n}return u(e,[{key:"confirm",value:function(e){var t=jr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function eo(){return(eo=se(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nr(t),e.next=3,io(i,n,Z(r));case 3:return a=e.sent,e.abrupt("return",new Za(a,(function(e){return mi(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function to(e,t,n){return no.apply(this,arguments)}function no(){return(no=se(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Z(t),e.next=3,li(!1,i,"phone");case 3:return e.next=5,io(i.auth,n,Z(r));case 5:return a=e.sent,e.abrupt("return",new Za(a,(function(e){return gi(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ro(){return(ro=se(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Z(t),e.next=3,io(i.auth,n,Z(r));case 3:return a=e.sent,e.abrupt("return",new Za(a,(function(e){return wi(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function io(e,t,n){return ao.apply(this,arguments)}function ao(){return ao=se(I().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,zt("string"===typeof a,t,"argument-error"),zt(r.type===Ya,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return zt("enroll"===u.type,t,"internal-error"),e.next=13,ra(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return zt("signin"===u.type,t,"internal-error"),zt(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,La(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Or(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ao.apply(this,arguments)}function oo(){return(oo=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,si(Z(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var uo=function(){function e(t){a(this,e),this.providerId=e.PROVIDER_ID,this.auth=nr(t)}return u(e,[{key:"verifyPhoneNumber",value:function(e,t){return io(this.auth,e,Z(t))}}],[{key:"credential",value:function(e,t){return jr._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?jr._fromTokenResponse(n,r):null}}]),e}();function so(e,t){return t?Ht(t):(zt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}uo.PROVIDER_ID="phone",uo.PHONE_SIGN_IN_METHOD="phone";var co=function(e){m(n,e);var t=b(n);function n(e){var r;return a(this,n),(r=t.call(this,"custom","custom")).params=e,r}return u(n,[{key:"_getIdTokenResponse",value:function(e){return Dr(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Dr(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Dr(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(ur);function lo(e){return pi(e.auth,new co(e),e.bypassAuthState)}function fo(e){var t=e.auth,n=e.user;return zt(n,t,"internal-error"),hi(n,new co(e),e.bypassAuthState)}function ho(e){return po.apply(this,arguments)}function po(){return(po=se(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,zt(r=t.user,n,"internal-error"),e.abrupt("return",si(r,new co(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vo=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return u(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=se(I().mark((function t(n,r){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=se(I().mark((function e(t){var n,r,i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lo;case"linkViaPopup":case"linkViaRedirect":return ho;case"reauthViaPopup":case"reauthViaRedirect":return fo;default:Ut(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),mo=new $t(2e3,1e4);function yo(e,t,n){return go.apply(this,arguments)}function go(){return(go=se(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nr(t),Bt(t,n,zr),a=so(i,r),o=new xo(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ko(){return(ko=se(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bt((i=Z(t)).auth,n,zr),a=so(i.auth,r),o=new xo(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e,t,n){return bo.apply(this,arguments)}function bo(){return(bo=se(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bt((i=Z(t)).auth,n,zr),a=so(i.auth,r),o=new xo(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xo=function(e){m(n,e);var t=b(n);function n(e,r,i,o,u){var s;return a(this,n),(s=t.call(this,e,r,o,u)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=p(s),s}return u(n,[{key:"executeNotNull",value:function(){var e=se(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return zt(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=se(I().mark((function e(){var t,n=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wt(1===this.filter.length,"Popup operations only handle one event"),t=pa(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Vt(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Vt(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Vt(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,mo.get())}()}}]),n}(vo);xo.currentPopupAction=null;var _o=new Map,To=function(e){m(n,e);var t=b(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,o)).eventId=null,i}return u(n,[{key:"execute",value:function(){var e=se(I().mark((function e(){var t,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_o.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Io(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,gt(y(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:_o.set(this.auth._key(),t);case 21:return this.bypassAuthState||_o.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=se(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",gt(y(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",gt(y(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(vo);function Io(e,t){return Eo.apply(this,arguments)}function Eo(){return(Eo=se(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ao(n),i=No(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function So(e,t){return Co.apply(this,arguments)}function Co(){return(Co=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",No(t)._set(Ao(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function No(e){return Ht(e._redirectPersistence)}function Ao(e){return jn("pendingRedirect",e.config.apiKey,e.name)}function Do(e,t,n){return function(e,t,n){return Po.apply(this,arguments)}(e,t,n)}function Po(){return(Po=se(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nr(t),Bt(t,n,zr),a=so(i,r),e.next=5,So(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ro(e,t,n){return function(e,t,n){return Oo.apply(this,arguments)}(e,t,n)}function Oo(){return(Oo=se(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bt((i=Z(t)).auth,n,zr),a=so(i.auth,r),e.next=5,So(a,i.auth);case 5:return e.next=7,Bo(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lo(e,t,n){return function(e,t,n){return Mo.apply(this,arguments)}(e,t,n)}function Mo(){return(Mo=se(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bt((i=Z(t)).auth,n,zr),a=so(i.auth,r),e.next=5,li(!1,i,n.providerId);case 5:return e.next=7,So(a,i.auth);case 7:return e.next=9,Bo(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fo(e,t){return Uo.apply(this,arguments)}function Uo(){return(Uo=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nr(t)._initializationPromise;case 2:return e.abrupt("return",Vo(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(e,t){return jo.apply(this,arguments)}function jo(){return jo=se(I().mark((function e(t,n){var r,i,a,o,u,s=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=nr(t),a=so(i,n),o=new To(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function Bo(e){return qo.apply(this,arguments)}function qo(){return(qo=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pa("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zo=function(){function e(t){a(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return u(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wo(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Wo(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Vt(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ko(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ko(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Ko(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Wo(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Go(e){return Ho.apply(this,arguments)}function Ho(){return Ho=se(I().mark((function e(t){var n,r=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",rn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ho.apply(this,arguments)}var Qo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yo=/^https?/;function Jo(){return(Jo=se(I().mark((function e(t){var n,r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Go(t);case 4:n=e.sent,r=n.authorizedDomains,i=l(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!$o(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ut(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function $o(e){var t=Qt(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Yo.test(r))return!1;if(Qo.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Xo=new $t(3e4,6e4);function Zo(){var e=ma().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=oe(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var eu=null;function tu(e){return eu=eu||function(e){return new Promise((function(t,n){var r,i,a;function o(){Zo(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Zo(),n(Vt(e,"network-request-failed"))},timeout:Xo.get()})}if(null===(i=null===(r=ma().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=ma().gapi)||void 0===a?void 0:a.load)){var u=Va("iframefcb");return ma()[u]=function(){gapi.load?o():n(Vt(e,"network-request-failed"))},Ua("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw eu=null,e}))}(e),eu}var nu=new $t(5e3,15e3),ru={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function au(e){var t=e.config;zt(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Xt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:je},i=iu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(H(r).slice(1))}function ou(e){return uu.apply(this,arguments)}function uu(){return uu=se(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tu(t);case 2:return n=e.sent,zt(r=ma().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:au(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ru,dontclear:!0},(function(e){return new Promise(function(){var n=se(I().mark((function n(r,i){var a,o,u;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){ma().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Vt(t,"network-request-failed"),o=ma().setTimeout((function(){i(a)}),nu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}var su={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cu="_blank",lu="http://localhost",fu=function(){function e(t){a(this,e),this.window=t,this.associatedEvent=null}return u(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function hu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},su),{width:r.toString(),height:i.toString(),top:a,left:o}),c=R().toLowerCase();n&&(u=Wn(c)?cu:n),zn(c)&&(t=t||lu,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=d(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if($n(c)&&"_self"!==u)return du(t||"",u),new fu(null);var f=window.open(t||"",u,l);zt(f,e,"popup-blocked");try{f.focus()}catch(h){}return new fu(f)}function du(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var pu="__/auth/handler",vu="emulator/auth/handler";function mu(e,t,n,r,i,a){zt(e.config.authDomain,e,"auth-domain-config-required"),zt(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:je,eventId:i};if(t instanceof zr){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=d(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Kr){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(pu);return Xt(t,vu)}(e),"?").concat(H(p).slice(1))}var yu="webStorageSupport",gu=function(){function e(){a(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fa,this._completeRedirectFn=Vo}return u(e,[{key:"_openPopup",value:function(){var e=se(I().mark((function e(t,n,r,i){var a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wt(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=mu(t,n,r,Qt(),i),e.abrupt("return",hu(t,o,pa()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=se(I().mark((function e(t,n,r,i){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=mu(t,n,r,Qt(),i),ma().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Wt(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=se(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ou(t);case 2:return n=e.sent,r=new zo(t),n.register("authEvent",(function(e){return zt(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(yu,{type:yu},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Ut(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Jo.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Zn()||Kn()||Jn()}}]),e}(),ku=gu,wu=function(e){m(n,e);var t=b(n);function n(e){var r;return a(this,n),(r=t.call(this,"phone")).credential=e,r}return u(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return rn(e,"POST","/v2/accounts/mfaEnrollment:finalize",nn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return rn(e,"POST","/v2/accounts/mfaSignIn:finalize",nn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){a(this,e),this.factorId=t}return u(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Kt("unexpected MultiFactorSessionType")}}}]),e}()),bu=function(){function e(){a(this,e)}return u(e,null,[{key:"assertion",value:function(e){return wu._fromCredential(e)}}]),e}();bu.FACTOR_ID="phone";var xu,_u="@firebase/auth",Tu="0.19.12",Iu=function(){function e(t){a(this,e),this.auth=t,this.internalListeners=new Map}return u(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){zt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Eu(){return window}xu="Browser",Re(new ce("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){zt(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),zt(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:xu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:er(xu)},i=new tr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ht);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Re(new ce("auth-internal",(function(e){return function(e){return new Iu(e)}(nr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ge(_u,Tu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(xu)),Ge(_u,Tu,"esm2017");function Su(e,t,n){return Cu.apply(this,arguments)}function Cu(){return Cu=se(I().mark((function e(t,n,r){var i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Eu(),o=a.BuildInfo,Wt(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Ou(n.sessionId);case 4:return u=e.sent,s={},Jn()?s.ibi=o.packageName:Hn()?s.apn=o.packageName:Ut(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",mu(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Cu.apply(this,arguments)}function Nu(){return(Nu=se(I().mark((function e(t){var n,r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Eu(),r=n.BuildInfo,i={},Jn()?i.iosBundleId=r.packageName:Hn()?i.androidPackageName=r.packageName:Ut(t,"operation-not-supported-in-this-environment"),e.next=5,Go(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Au(e){var t=Eu().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Du(e,t,n){return Pu.apply(this,arguments)}function Pu(){return Pu=se(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Eu(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Vt(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Hn()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Pu.apply(this,arguments)}function Ru(e){var t,n,r,i,a,o,u,s,c,l,f=Eu();zt("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),zt("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),zt("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),zt("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),zt("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Ou(e){return Lu.apply(this,arguments)}function Lu(){return(Lu=se(I().mark((function e(t){var n,r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Mu(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mu(e){if(Wt(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Fu=function(e){m(n,e);var t=b(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return u(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),gt(y(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(zo);function Uu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:zu(),postBody:null,tenantId:e.tenantId,error:Vt(e,"no-auth-event")}}function Vu(e,t){return Ku()._set(Wu(e),t)}function ju(e){return Bu.apply(this,arguments)}function Bu(){return(Bu=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ku()._get(Wu(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Ku()._remove(Wu(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qu(e,t){var n,r,i=function(e){var t=Gu(e),n=t.link?decodeURIComponent(t.link):void 0,r=Gu(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Gu(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Gu(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Vt(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function zu(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Ku(){return Ht(ca)}function Wu(e){return jn("authEvent",e.config.apiKey,e.name)}function Gu(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=f(t=n)||ae(t)||c(t)||h();r[0];return Q(r.slice(1).join("?"))}var Hu=function(){function e(){a(this,e),this._redirectPersistence=fa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vo}return u(e,[{key:"_initialize",value:function(){var e=se(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Fu(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Ut(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=se(I().mark((function e(t,n,r,i){var a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ru(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),_o.clear(),e.next=10,this._originValidation(t);case 10:return o=Uu(t,r,i),e.next=13,Vu(t,o);case 13:return e.next=15,Su(t,o,n);case 15:return u=e.sent,e.next=18,Au(u);case 18:return s=e.sent,e.abrupt("return",Du(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Nu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Eu(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(se(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ju(e);case 2:t.onEvent(Yu());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=se(I().mark((function n(r){var i,a;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,ju(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=qu(i,r.url)),t.onEvent(a||Yu());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Eu().handleOpenURL=function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Qu=Hu;function Yu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Vt("no-auth-event")}}function Ju(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function $u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return!("file:"!==Ju()&&"ionic:"!==Ju()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xu(){return U()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Zu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return/Edge\/\d+/.test(e)}function es(){try{var e=self.localStorage,t=pa();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R();return Xu()||Zu(e)}()||V()}catch(n){return ts()&&V()}return!1}function ts(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function ns(){return("http:"===Ju()||"https:"===Ju()||M()||$u())&&!(F()||L())&&es()&&!ts()}function rs(){return $u()&&"undefined"!==typeof document}function is(){return as.apply(this,arguments)}function as(){return(as=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rs()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var os={LOCAL:"local",NONE:"none",SESSION:"session"},us=zt,ss="persistence";function cs(e,t){us(Object.values(os).includes(t),e,"invalid-persistence-type"),F()?us(t!==os.SESSION,e,"unsupported-persistence-type"):L()?us(t===os.NONE,e,"unsupported-persistence-type"):ts()?us(t===os.NONE||t===os.LOCAL&&V(),e,"unsupported-persistence-type"):us(t===os.NONE||es(),e,"unsupported-persistence-type")}function ls(e){return fs.apply(this,arguments)}function fs(){return(fs=se(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=hs(),r=jn(ss,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hs(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var ds=zt,ps=function(){function e(){a(this,e),this.browserResolver=Ht(ku),this.cordovaResolver=Ht(Qu),this.underlyingResolver=null,this._redirectPersistence=fa,this._completeRedirectFn=Vo}return u(e,[{key:"_initialize",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=se(I().mark((function e(t,n,r,i){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=se(I().mark((function e(t,n,r,i){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return rs()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return ds(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=se(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,is();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vs(e){return e.unwrap()}function ms(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new bs(e,function(e,t){var n,r=Z(e),i=t;return zt(t.customData.operationType,r,"argument-error"),zt(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),na._fromError(r,i)}(e,t));else if(r){var i=ys(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function ys(e){var t=(e instanceof j?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof j)&&"temporaryProof"in t&&"phoneNumber"in t)return uo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Tt)return null;switch(r){case _t:n=Hr;break;case bt:n=Gr;break;case xt:n=Qr;break;case It:n=$r;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Yr._create(r,u):Rr._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Wr(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof j?n.credentialFromError(e):n.credentialFromResult(e)}function gs(e,t){return t.catch((function(t){throw t instanceof j&&ms(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,ys(t)),additionalUserInfo:ea(e),user:xs.getOrCreate(r)}}))}function ks(e,t){return ws.apply(this,arguments)}function ws(){return(ws=se(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return gs(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bs=function(){function e(t,n){a(this,e),this.resolver=n,this.auth=t.wrapped()}return u(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return gs(vs(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),xs=function(){function e(t){a(this,e),this._delegate=t,this.multiFactor=function(e){var t=Z(e);return aa.has(t)||aa.set(t,ia._fromUser(t)),aa.get(t)}(t)}return u(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gs(this.auth,gi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ks(this.auth,to(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gs(this.auth,wo(this._delegate,t,ps)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ls(nr(this.auth));case 2:return e.abrupt("return",Lo(this._delegate,t,ps));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gs(this.auth,wi(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return ks(this.auth,function(e,t,n){return ro.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return gs(this.auth,function(e,t,n){return ko.apply(this,arguments)}(this._delegate,e,ps))}},{key:"reauthenticateWithRedirect",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ls(nr(this.auth));case 2:return e.abrupt("return",Ro(this._delegate,t,ps));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Bi.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oi(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Gi(Z(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Gi(Z(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return oo.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Wi.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return qi.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();xs.USER_MAP=new WeakMap;var _s=zt,Ts=function(){function e(t,n){if(a(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;_s(r,"invalid-api-key",{appName:t.name}),_s(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?ps:void 0;this._delegate=n.initialize({options:{persistence:Es(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Rt),this.linkUnderlyingAuth()}return u(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?xs.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){ir(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Ai.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Di(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Ni.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gs(this._delegate,Oi(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return ji.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Br.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=se(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s(ns(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Fo(this._delegate,ps);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",gs(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){nr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Is(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Is(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Mi.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ci.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=se(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cs(this._delegate,t),e.t0=t,e.next=e.t0===os.SESSION?4:e.t0===os.LOCAL?6:e.t0===os.NONE?11:13;break;case 4:return n=fa,e.abrupt("break",14);case 6:return e.next=8,Ht(Oa)._isAvailable();case 8:return r=e.sent,n=r?Oa:ca,e.abrupt("break",14);case 11:return n=Vn,e.abrupt("break",14);case 13:return e.abrupt("return",Ut("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return gs(this._delegate,function(e){return ni.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return gs(this._delegate,mi(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return gs(this._delegate,function(e,t){return Ti.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return gs(this._delegate,function(e,t,n){return mi(Z(e),qr.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return gs(this._delegate,function(e,t,n){return Fi.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return ks(this._delegate,function(e,t,n){return eo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s(ns(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",gs(this._delegate,yo(this._delegate,t,ps)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _s(ns(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ls(this._delegate);case 3:return e.abrupt("return",Do(this._delegate,t,ps));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ri.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Is(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&xs.getOrCreate(e))},error:t,complete:n}}function Es(e,t){var n=function(e,t){var n=hs();if(!n)return[];var r=jn(ss,e,t);switch(n.getItem(r)){case os.NONE:return[Vn];case os.LOCAL:return[Oa,fa];case os.SESSION:return[fa];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Oa)||n.push(Oa),"undefined"!==typeof window)for(var r=0,i=[ca,fa];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Vn)||n.push(Vn),n}Ts.Persistence=os;var Ss=function(){function e(){a(this,e),this.providerId="phone",this._delegate=new uo(vs(mt.auth()))}return u(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return uo.credential(e,t)}}]),e}();Ss.PHONE_SIGN_IN_METHOD=uo.PHONE_SIGN_IN_METHOD,Ss.PROVIDER_ID=uo.PROVIDER_ID;var Cs,Ns=zt,As=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mt.app();a(this,e),Ns(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new $a(t,n,i.auth()),this.type=this._delegate.type}return u(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Cs=mt).INTERNAL.registerComponent(new ce("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ts(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Et,PASSWORD_RESET:St,RECOVER_EMAIL:Ct,REVERT_SECOND_FACTOR_ADDITION:Nt,VERIFY_AND_CHANGE_EMAIL:At,VERIFY_EMAIL:Dt}},EmailAuthProvider:qr,FacebookAuthProvider:Gr,GithubAuthProvider:Qr,GoogleAuthProvider:Hr,OAuthProvider:Wr,SAMLAuthProvider:Jr,PhoneAuthProvider:Ss,PhoneMultiFactorGenerator:bu,RecaptchaVerifier:As,TwitterAuthProvider:$r,Auth:Ts,AuthCredential:ur,Error:j}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Cs.registerVersion("@firebase/auth-compat","0.2.12");var Ds,Ps="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Rs={},Os=Os||{},Ls=Ps||self;function Ms(){}function Fs(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Us(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Vs="closure_uid_"+(1e9*Math.random()>>>0),js=0;function Bs(e,t,n){return e.call.apply(e.bind,arguments)}function qs(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function zs(e,t,n){return(zs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bs:qs).apply(null,arguments)}function Ks(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ws(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Gs(){this.s=this.s,this.o=this.o}var Hs={};Gs.prototype.s=!1,Gs.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Vs)&&e[Vs]||(e[Vs]=++js)}(this);delete Hs[e]}},Gs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Qs=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Ys=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Js(e){return Array.prototype.concat.apply([],arguments)}function $s(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Xs(e){return/^[\s\xa0]*$/.test(e)}var Zs,ec=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function tc(e,t){return-1!=e.indexOf(t)}function nc(e,t){return e<t?-1:e>t?1:0}e:{var rc=Ls.navigator;if(rc){var ic=rc.userAgent;if(ic){Zs=ic;break e}}Zs=""}function ac(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function oc(e){var t={};for(var n in e)t[n]=e[n];return t}var uc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<uc.length;a++)n=uc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function cc(e){return cc[" "](e),e}cc[" "]=Ms;var lc,fc=tc(Zs,"Opera"),hc=tc(Zs,"Trident")||tc(Zs,"MSIE"),dc=tc(Zs,"Edge"),pc=dc||hc,vc=tc(Zs,"Gecko")&&!(tc(Zs.toLowerCase(),"webkit")&&!tc(Zs,"Edge"))&&!(tc(Zs,"Trident")||tc(Zs,"MSIE"))&&!tc(Zs,"Edge"),mc=tc(Zs.toLowerCase(),"webkit")&&!tc(Zs,"Edge");function yc(){var e=Ls.document;return e?e.documentMode:void 0}e:{var gc="",kc=function(){var e=Zs;return vc?/rv:([^\);]+)(\)|;)/.exec(e):dc?/Edge\/([\d\.]+)/.exec(e):hc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):mc?/WebKit\/(\S+)/.exec(e):fc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(kc&&(gc=kc?kc[1]:""),hc){var wc=yc();if(null!=wc&&wc>parseFloat(gc)){lc=String(wc);break e}}lc=gc}var bc,xc={};function _c(){return function(e){var t=xc;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ec(String(lc)).split("."),n=ec("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=nc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||nc(0==a[2].length,0==o[2].length)||nc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Ls.document&&hc){var Tc=yc();bc=Tc||(parseInt(lc,10)||void 0)}else bc=void 0;var Ic=bc,Ec=function(){if(!Ls.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ls.addEventListener("test",Ms,t),Ls.removeEventListener("test",Ms,t)}catch(n){}return e}();function Sc(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Cc(e,t){if(Sc.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(vc){e:{try{cc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Nc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Cc.Z.h.call(this)}}Sc.prototype.h=function(){this.defaultPrevented=!0},Ws(Cc,Sc);var Nc={2:"touch",3:"pen",4:"mouse"};Cc.prototype.h=function(){Cc.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ac="closure_listenable_"+(1e6*Math.random()|0),Dc=0;function Pc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Dc,this.ca=this.fa=!1}function Rc(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Oc(e){this.src=e,this.g={},this.h=0}function Lc(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Qs(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Rc(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Mc(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Oc.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Mc(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Pc(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Fc="closure_lm_"+(1e6*Math.random()|0),Uc={};function Vc(e,t,n,r,i){if(r&&r.once)return Bc(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Vc(e,t[a],n,r,i);return null}return n=Qc(n),e&&e[Ac]?e.N(t,n,Us(r)?!!r.capture:!!r,i):jc(e,t,n,!1,r,i)}function jc(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Us(i)?!!i.capture:!!i,u=Gc(e);if(u||(e[Fc]=u=new Oc(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Wc;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ec||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Kc(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Bc(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Bc(e,t[a],n,r,i);return null}return n=Qc(n),e&&e[Ac]?e.O(t,n,Us(r)?!!r.capture:!!r,i):jc(e,t,n,!0,r,i)}function qc(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)qc(e,t[a],n,r,i);else r=Us(r)?!!r.capture:!!r,n=Qc(n),e&&e[Ac]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Mc(a=e.g[t],n,r,i))&&(Rc(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Gc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Mc(t,n,r,i)),(n=-1<e?t[e]:null)&&zc(n))}function zc(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Ac])Lc(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Kc(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Gc(t))?(Lc(n,e),0==n.h&&(n.src=null,t[Fc]=null)):Rc(e)}}}function Kc(e){return e in Uc?Uc[e]:Uc[e]="on"+e}function Wc(e,t){if(e.ca)e=!0;else{t=new Cc(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&zc(e),e=n.call(r,t)}return e}function Gc(e){return(e=e[Fc])instanceof Oc?e:null}var Hc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qc(e){return"function"===typeof e?e:(e[Hc]||(e[Hc]=function(t){return e.handleEvent(t)}),e[Hc])}function Yc(){Gs.call(this),this.i=new Oc(this),this.P=this,this.I=null}function Jc(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Sc(t,e);else if(t instanceof Sc)t.target=t.target||e;else{var i=t;sc(t=new Sc(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=$c(o,r,!0,t)&&i}if(i=$c(o=t.g=e,r,!0,t)&&i,i=$c(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=$c(o=t.g=n[a],r,!1,t)&&i}function $c(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Lc(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ws(Yc,Gs),Yc.prototype[Ac]=!0,Yc.prototype.removeEventListener=function(e,t,n,r){qc(this,e,t,n,r)},Yc.prototype.M=function(){if(Yc.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Rc(n[r]);delete t.g[e],t.h--}}this.I=null},Yc.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Yc.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Xc=Ls.JSON.stringify;function Zc(){var e=ul,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var el,tl=function(){function e(){a(this,e),this.h=this.g=null}return u(e,[{key:"add",value:function(e,t){var n=nl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),nl=new(function(){function e(t,n){a(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return u(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new rl}),(function(e){return e.reset()})),rl=function(){function e(){a(this,e),this.next=this.g=this.h=null}return u(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function il(e){Ls.setTimeout((function(){throw e}),0)}function al(e,t){el||function(){var e=Ls.Promise.resolve(void 0);el=function(){e.then(sl)}}(),ol||(el(),ol=!0),ul.add(e,t)}var ol=!1,ul=new tl;function sl(){for(var e;e=Zc();){try{e.h.call(e.g)}catch(n){il(n)}var t=nl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ol=!1}function cl(e,t){Yc.call(this),this.h=e||1,this.g=t||Ls,this.j=zs(this.kb,this),this.l=Date.now()}function ll(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function fl(e,t,n){if("function"===typeof e)n&&(e=zs(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=zs(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ls.setTimeout(e,t||0)}function hl(e){e.g=fl((function(){e.g=null,e.i&&(e.i=!1,hl(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ws(cl,Yc),(Ds=cl.prototype).da=!1,Ds.S=null,Ds.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Jc(this,"tick"),this.da&&(ll(this),this.start()))}},Ds.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ds.M=function(){cl.Z.M.call(this),ll(this),delete this.g};var dl=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return u(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:hl(this)}},{key:"M",value:function(){gt(y(n.prototype),"M",this).call(this),this.g&&(Ls.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Gs);function pl(e){Gs.call(this),this.h=e,this.g={}}Ws(pl,Gs);var vl=[];function ml(e,t,n,r){Array.isArray(n)||(n&&(vl[0]=n.toString()),n=vl);for(var i=0;i<n.length;i++){var a=Vc(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function yl(e){ac(e.g,(function(e,t){this.g.hasOwnProperty(t)&&zc(e)}),e),e.g={}}function gl(){this.g=!0}function kl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Xc(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}pl.prototype.M=function(){pl.Z.M.call(this),yl(this)},pl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gl.prototype.Aa=function(){this.g=!1},gl.prototype.info=function(){};var wl={},bl=null;function xl(){return bl=bl||new Yc}function _l(e){Sc.call(this,wl.Ma,e)}function Tl(e){var t=xl();Jc(t,new _l(t,e))}function Il(e,t){Sc.call(this,wl.STAT_EVENT,e),this.stat=t}function El(e){var t=xl();Jc(t,new Il(t,e))}function Sl(e,t){Sc.call(this,wl.Na,e),this.size=t}function Cl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ls.setTimeout((function(){e()}),t)}wl.Ma="serverreachability",Ws(_l,Sc),wl.STAT_EVENT="statevent",Ws(Il,Sc),wl.Na="timingevent",Ws(Sl,Sc);var Nl={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Al={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Dl(){}function Pl(e){return e.h||(e.h=e.i())}function Rl(){}Dl.prototype.h=null;var Ol,Ll={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ml(){Sc.call(this,"d")}function Fl(){Sc.call(this,"c")}function Ul(){}function Vl(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new pl(this),this.P=Bl,e=pc?125:void 0,this.W=new cl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new jl}function jl(){this.i=null,this.g="",this.h=!1}Ws(Ml,Sc),Ws(Fl,Sc),Ws(Ul,Dl),Ul.prototype.g=function(){return new XMLHttpRequest},Ul.prototype.i=function(){return{}},Ol=new Ul;var Bl=45e3,ql={},zl={};function Kl(e,t,n){e.K=1,e.v=pf(sf(t)),e.s=n,e.U=!0,Wl(e,null)}function Wl(e,t){e.F=Date.now(),Yl(e),e.A=sf(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Sf(n.h,"t",r),e.C=0,n=e.l.H,e.h=new jl,e.g=Nh(e.l,n?t:null,!e.s),0<e.O&&(e.L=new dl(zs(e.Ia,e,e.g),e.O)),ml(e.V,e.g,"readystatechange",e.gb),t=e.H?oc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Tl(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Gl(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Hl(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Ql(e,n))==zl){4==t&&(e.o=4,El(14),i=!1),kl(e.j,e.m,null,"[Incomplete Response]");break}if(r==ql){e.o=4,El(15),kl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}kl(e.j,e.m,r,null),ef(e,r)}Gl(e)&&r!=zl&&r!=ql&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,El(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),bh(t),t.L=!0,El(11))):(kl(e.j,e.m,n,"[Invalid Chunked Response]"),Zl(e),Xl(e))}function Ql(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?zl:(n=Number(t.substring(n,r)),isNaN(n)?ql:(r+=1)+n>t.length?zl:(t=t.substr(r,n),e.C=r+n,t))}function Yl(e){e.Y=Date.now()+e.P,Jl(e,e.P)}function Jl(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Cl(zs(e.eb,e),t)}function $l(e){e.B&&(Ls.clearTimeout(e.B),e.B=null)}function Xl(e){0==e.l.G||e.I||Th(e.l,e)}function Zl(e){$l(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ll(e.W),yl(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ef(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Lf(n.i,e)))if(n.I=e.N,!e.J&&Lf(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;_h(n),hh(n)}wh(n),El(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Cl(zs(n.ab,n),6e3));if(1>=Of(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Eh(n,11)}else if((e.J||n.g==e)&&_h(n),!Xs(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(tc(l,"spdy")||tc(l,"quic")||tc(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Mf(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,df(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Ch(r,r.H?r.la:null,r.W),d.J){Ff(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&($l(p),Yl(p)),r.g=d}else kh(r);0<n.l.length&&vh(n)}else"stop"!=a[0]&&"close"!=a[0]||Eh(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Eh(n,7):fh(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Tl(4)}catch(a){}}function tf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Fs(e)||"string"===typeof e)Ys(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Fs(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Fs(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function nf(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof nf)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function rf(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];af(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)af(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function af(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Ds=Vl.prototype).setTimeout=function(e){this.P=e},Ds.gb=function(e){e=e.target;var t=this.L;t&&3==oh(e)?t.l():this.Ia(e)},Ds.Ia=function(e){try{if(e==this.g)e:{var t=oh(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||pc||this.g&&(this.h.h||this.g.ga()||uh(this.g)))){this.I||4!=t||7==n||Tl(8==n||0>=r?3:2),$l(this);var i=this.g.ba();this.N=i;t:if(Gl(this)){var a=uh(this.g);e="";var o=a.length,u=4==oh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Zl(this),Xl(this);var s="";break t}this.h.i=new Ls.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xs(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,El(12),Zl(this),Xl(this);break e}kl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ef(this,i)}this.U?(Hl(this,t,s),pc&&this.i&&3==t&&(ml(this.V,this.W,"tick",this.fb),this.W.start())):(kl(this.j,this.m,s,null),ef(this,s)),4==t&&Zl(this),this.i&&!this.I&&(4==t?Th(this.l,this):(this.i=!1,Yl(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,El(12)):(this.o=0,El(13)),Zl(this),Xl(this)}}}catch(t){}},Ds.fb=function(){if(this.g){var e=oh(this.g),t=this.g.ga();this.C<t.length&&($l(this),Hl(this,e,t),this.i&&4!=e&&Yl(this))}},Ds.cancel=function(){this.I=!0,Zl(this)},Ds.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Tl(3),El(17)),Zl(this),this.o=2,Xl(this)):Jl(this,this.Y-e)},(Ds=nf.prototype).R=function(){rf(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Ds.T=function(){return rf(this),this.g.concat()},Ds.get=function(e,t){return af(this.h,e)?this.h[e]:t},Ds.set=function(e,t){af(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Ds.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var of=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function uf(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof uf){this.g=void 0!==t?t:e.g,cf(this,e.j),this.s=e.s,lf(this,e.i),ff(this,e.m),this.l=e.l,t=e.h;var n=new _f;n.i=t.i,t.g&&(n.g=new nf(t.g),n.h=t.h),hf(this,n),this.o=e.o}else e&&(n=String(e).match(of))?(this.g=!!t,cf(this,n[1]||"",!0),this.s=vf(n[2]||""),lf(this,n[3]||"",!0),ff(this,n[4]),this.l=vf(n[5]||"",!0),hf(this,n[6]||"",!0),this.o=vf(n[7]||"")):(this.g=!!t,this.h=new _f(null,this.g))}function sf(e){return new uf(e)}function cf(e,t,n){e.j=n?vf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lf(e,t,n){e.i=n?vf(t,!0):t}function ff(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function hf(e,t,n){t instanceof _f?(e.h=t,function(e,t){t&&!e.j&&(Tf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(If(this,t),Sf(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=mf(t,bf)),e.h=new _f(t,e.g))}function df(e,t,n){e.h.set(t,n)}function pf(e){return df(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function mf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,yf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function yf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}uf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(mf(t,gf,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(mf(t,gf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(mf(n,"/"==n.charAt(0)?wf:kf,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",mf(n,xf)),e.join("")};var gf=/[#\/\?@]/g,kf=/[#\?:]/g,wf=/[#\?]/g,bf=/[#\?@]/g,xf=/#/g;function _f(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Tf(e){e.g||(e.g=new nf,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function If(e,t){Tf(e),t=Cf(e,t),af(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,af((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&rf(e)))}function Ef(e,t){return Tf(e),t=Cf(e,t),af(e.g.h,t)}function Sf(e,t,n){If(e,t),0<n.length&&(e.i=null,e.g.set(Cf(e,t),$s(n)),e.h+=n.length)}function Cf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ds=_f.prototype).add=function(e,t){Tf(this),this.i=null,e=Cf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ds.forEach=function(e,t){Tf(this),this.g.forEach((function(n,r){Ys(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Ds.T=function(){Tf(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Ds.R=function(e){Tf(this);var t=[];if("string"===typeof e)Ef(this,e)&&(t=Js(t,this.g.get(Cf(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Js(t,e[n])}return t},Ds.set=function(e,t){return Tf(this),this.i=null,Ef(this,e=Cf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ds.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Ds.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Nf=u((function e(t,n){a(this,e),this.h=t,this.g=n}));function Af(e){this.l=e||Pf,Ls.PerformanceNavigationTiming?e=0<(e=Ls.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ls.g&&Ls.g.Ea&&Ls.g.Ea()&&Ls.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Df,Pf=10;function Rf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Of(e){return e.h?1:e.g?e.g.size:0}function Lf(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Mf(e,t){e.g?e.g.add(t):e.h=t}function Ff(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Uf(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=l(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return $s(e.i)}function Vf(){}function jf(){this.g=new Vf}function Bf(e,t,n){var r=n||"";try{tf(e,(function(e,n){var i=e;Us(e)&&(i=Xc(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function qf(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function zf(e){this.l=e.$b||null,this.j=e.ib||!1}function Kf(e,t){Yc.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Wf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Af.prototype.cancel=function(){if(this.i=Uf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=l(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Vf.prototype.stringify=function(e){return Ls.JSON.stringify(e,void 0)},Vf.prototype.parse=function(e){return Ls.JSON.parse(e,void 0)},Ws(zf,Dl),zf.prototype.g=function(){return new Kf(this.l,this.j)},zf.prototype.i=(Df={},function(){return Df}),Ws(Kf,Yc);var Wf=0;function Gf(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Hf(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Qf(e)}function Qf(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ds=Kf.prototype).open=function(e,t){if(this.readyState!=Wf)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Qf(this)},Ds.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ls).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Ds.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Hf(this)),this.readyState=Wf},Ds.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Qf(this)),this.g&&(this.readyState=3,Qf(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Ls.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gf(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Ds.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Hf(this):Qf(this),3==this.readyState&&Gf(this)}},Ds.Ua=function(e){this.g&&(this.response=this.responseText=e,Hf(this))},Ds.Ta=function(e){this.g&&(this.response=e,Hf(this))},Ds.ha=function(){this.g&&Hf(this)},Ds.setRequestHeader=function(e,t){this.v.append(e,t)},Ds.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ds.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Kf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Yf=Ls.JSON.parse;function Jf(e){Yc.call(this),this.headers=new nf,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$f,this.K=this.L=!1}Ws(Jf,Yc);var $f="",Xf=/^https?$/i,Zf=["POST","PUT"];function eh(e){return"content-type"==e.toLowerCase()}function th(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,nh(e),ih(e)}function nh(e){e.D||(e.D=!0,Jc(e,"complete"),Jc(e,"error"))}function rh(e){if(e.h&&"undefined"!=typeof Os&&(!e.C[1]||4!=oh(e)||2!=e.ba()))if(e.v&&4==oh(e))fl(e.Fa,0,e);else if(Jc(e,"readystatechange"),4==oh(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(of)[1]||null;if(!a&&Ls.self&&Ls.self.location){var o=Ls.self.location.protocol;a=o.substr(0,o.length-1)}i=!Xf.test(a?a.toLowerCase():"")}t=i}if(t)Jc(e,"complete"),Jc(e,"success");else{e.m=6;try{var u=2<oh(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",nh(e)}}finally{ih(e)}}}function ih(e,t){if(e.g){ah(e);var n=e.g,r=e.C[0]?Ms:null;e.g=null,e.C=null,t||Jc(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ah(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ls.clearTimeout(e.A),e.A=null)}function oh(e){return e.g?e.g.readyState:0}function uh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case $f:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function sh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return ac(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):df(e,t,n))}function ch(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function lh(e){this.za=0,this.l=[],this.h=new gl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ch("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ch("baseRetryDelayMs",5e3,e),this.$a=ch("retryDelaySeedMs",1e4,e),this.Ya=ch("forwardChannelMaxRetries",2,e),this.ra=ch("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Af(e&&e.concurrentRequestLimit),this.Ca=new jf,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function fh(e){if(dh(e),3==e.G){var t=e.V++,n=sf(e.F);df(n,"SID",e.J),df(n,"RID",t),df(n,"TYPE","terminate"),yh(e,n),(t=new Vl(e,e.h,t,void 0)).K=2,t.v=pf(sf(n)),n=!1,Ls.navigator&&Ls.navigator.sendBeacon&&(n=Ls.navigator.sendBeacon(t.v.toString(),"")),!n&&Ls.Image&&((new Image).src=t.v,n=!0),n||(t.g=Nh(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Yl(t)}Sh(e)}function hh(e){e.g&&(bh(e),e.g.cancel(),e.g=null)}function dh(e){hh(e),e.u&&(Ls.clearTimeout(e.u),e.u=null),_h(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ls.clearTimeout(e.m),e.m=null)}function ph(e,t){e.l.push(new Nf(e.Za++,t)),3==e.G&&vh(e)}function vh(e){Rf(e.i)||e.m||(e.m=!0,al(e.Ha,e),e.C=0)}function mh(e,t){var n;n=t?t.m:e.V++;var r=sf(e.F);df(r,"SID",e.J),df(r,"RID",n),df(r,"AID",e.U),yh(e,r),e.o&&e.s&&sh(r,e.o,e.s),n=new Vl(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=gh(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Mf(e.i,n),Kl(n,r,t)}function yh(e,t){e.j&&tf({},(function(e,n){df(t,n,e)}))}function gh(e,t,n){n=Math.min(e.l.length,n);var r=e.j?zs(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Bf(l,o,"req"+c+"_")}catch(rd){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function kh(e){e.g||e.u||(e.Y=1,al(e.Ga,e),e.A=0)}function wh(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Cl(zs(e.Ga,e),Ih(e,e.A)),e.A++,!0)}function bh(e){null!=e.B&&(Ls.clearTimeout(e.B),e.B=null)}function xh(e){e.g=new Vl(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=sf(e.oa);df(t,"RID","rpc"),df(t,"SID",e.J),df(t,"CI",e.N?"0":"1"),df(t,"AID",e.U),yh(e,t),df(t,"TYPE","xmlhttp"),e.o&&e.s&&sh(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=pf(sf(t)),n.s=null,n.U=!0,Wl(n,e)}function _h(e){null!=e.v&&(Ls.clearTimeout(e.v),e.v=null)}function Th(e,t){var n=null;if(e.g==t){_h(e),bh(e),e.g=null;var r=2}else{if(!Lf(e.i,t))return;n=t.D,Ff(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Jc(r=xl(),new Sl(r,n,t,i)),vh(e)}else kh(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Of(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Cl(zs(e.Ha,e,t),Ih(e,e.C)),e.C++,!0))}(e,t)||2==r&&wh(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Eh(e,5);break;case 4:Eh(e,10);break;case 3:Eh(e,6);break;default:Eh(e,2)}}function Ih(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Eh(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=zs(e.jb,e);n||(n=new uf("//www.google.com/images/cleardot.gif"),Ls.location&&"http"==Ls.location.protocol||cf(n,"https"),pf(n)),function(e,t){var n=new gl;if(Ls.Image){var r=new Image;r.onload=Ks(qf,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ks(qf,n,r,"TestLoadImage: error",!1,t),r.onabort=Ks(qf,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ks(qf,n,r,"TestLoadImage: timeout",!1,t),Ls.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else El(2);e.G=0,e.j&&e.j.va(t),Sh(e),dh(e)}function Sh(e){e.G=0,e.I=-1,e.j&&(0==Uf(e.i).length&&0==e.l.length||(e.i.i.length=0,$s(e.l),e.l.length=0),e.j.ua())}function Ch(e,t,n){var r=function(e){return e instanceof uf?sf(e):new uf(e,void 0)}(n);if(""!=r.i)t&&lf(r,t+"."+r.i),ff(r,r.m);else{var i=Ls.location;r=function(e,t,n,r){var i=new uf(null,void 0);return e&&cf(i,e),t&&lf(i,t),n&&ff(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&ac(e.aa,(function(e,t){df(r,t,e)})),t=e.D,n=e.sa,t&&n&&df(r,t,n),df(r,"VER",e.ma),yh(e,r),r}function Nh(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Jf(new zf({ib:!0})):new Jf(e.qa)).L=e.H,t}function Ah(){}function Dh(){if(hc&&!(10<=Number(Ic)))throw Error("Environmental error: no available transport.")}function Ph(e,t){Yc.call(this),this.g=new lh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Xs(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Xs(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Lh(this)}function Rh(e){Ml.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Oh(){Fl.call(this),this.status=1}function Lh(e){this.g=e}(Ds=Jf.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ol.g(),this.C=this.u?Pl(this.u):Pl(Ol),this.g.onreadystatechange=zs(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void th(this,a)}e=n||"";var i=new nf(this.headers);r&&tf(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=eh,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Ls.FormData&&e instanceof Ls.FormData,!(0<=Qs(Zf,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ah(this),0<this.B&&((this.K=function(e){return hc&&_c()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zs(this.pa,this)):this.A=fl(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){th(this,a)}},Ds.pa=function(){"undefined"!=typeof Os&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jc(this,"timeout"),this.abort(8))},Ds.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Jc(this,"complete"),Jc(this,"abort"),ih(this))},Ds.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ih(this,!0)),Jf.Z.M.call(this)},Ds.Fa=function(){this.s||(this.F||this.v||this.l?rh(this):this.cb())},Ds.cb=function(){rh(this)},Ds.ba=function(){try{return 2<oh(this)?this.g.status:-1}catch(Df){return-1}},Ds.ga=function(){try{return this.g?this.g.responseText:""}catch(Df){return""}},Ds.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Yf(t)}},Ds.Da=function(){return this.m},Ds.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ds=lh.prototype).ma=8,Ds.G=1,Ds.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Ds.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Vl(this,this.h,e,void 0),n=this.s;if(this.P&&(n?sc(n=oc(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=gh(this,t,r),df(i=sf(this.F),"RID",e),df(i,"CVER",22),this.D&&df(i,"X-HTTP-Session-Id",this.D),yh(this,i),this.o&&n&&sh(i,this.o,n),Mf(this.i,t),this.Ra&&df(i,"TYPE","init"),this.ja?(df(i,"$req",r),df(i,"SID","null"),t.$=!0,Kl(t,i,null)):Kl(t,i,r),this.G=2}}else 3==this.G&&(e?mh(this,e):0==this.l.length||Rf(this.i)||mh(this))},Ds.Ga=function(){if(this.u=null,xh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Cl(zs(this.bb,this),e)}},Ds.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,El(10),hh(this),xh(this))},Ds.ab=function(){null!=this.v&&(this.v=null,hh(this),wh(this),El(19))},Ds.jb=function(e){e?(this.h.info("Successfully pinged google.com"),El(2)):(this.h.info("Failed to ping google.com"),El(1))},(Ds=Ah.prototype).xa=function(){},Ds.wa=function(){},Ds.va=function(){},Ds.ua=function(){},Ds.Oa=function(){},Dh.prototype.g=function(e,t){return new Ph(e,t)},Ws(Ph,Yc),Ph.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),al(zs(e.hb,e,t))),El(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ch(e,null,e.W),vh(e)},Ph.prototype.close=function(){fh(this.g)},Ph.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,ph(this.g,t)}else this.v?((t={}).__data__=Xc(e),ph(this.g,t)):ph(this.g,e)},Ph.prototype.M=function(){this.g.j=null,delete this.j,fh(this.g),delete this.g,Ph.Z.M.call(this)},Ws(Rh,Ml),Ws(Oh,Fl),Ws(Lh,Ah),Lh.prototype.xa=function(){Jc(this.g,"a")},Lh.prototype.wa=function(e){Jc(this.g,new Rh(e))},Lh.prototype.va=function(e){Jc(this.g,new Oh(e))},Lh.prototype.ua=function(){Jc(this.g,"b")},Dh.prototype.createWebChannel=Dh.prototype.g,Ph.prototype.send=Ph.prototype.u,Ph.prototype.open=Ph.prototype.m,Ph.prototype.close=Ph.prototype.close,Nl.NO_ERROR=0,Nl.TIMEOUT=8,Nl.HTTP_ERROR=6,Al.COMPLETE="complete",Rl.EventType=Ll,Ll.OPEN="a",Ll.CLOSE="b",Ll.ERROR="c",Ll.MESSAGE="d",Yc.prototype.listen=Yc.prototype.N,Jf.prototype.listenOnce=Jf.prototype.O,Jf.prototype.getLastError=Jf.prototype.La,Jf.prototype.getLastErrorCode=Jf.prototype.Da,Jf.prototype.getStatus=Jf.prototype.ba,Jf.prototype.getResponseJson=Jf.prototype.Qa,Jf.prototype.getResponseText=Jf.prototype.ga,Jf.prototype.send=Jf.prototype.ea;var Mh=Rs.createWebChannelTransport=function(){return new Dh},Fh=Rs.getStatEventTarget=function(){return xl()},Uh=Rs.ErrorCode=Nl,Vh=Rs.EventType=Al,jh=Rs.Event=wl,Bh=Rs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},qh=Rs.FetchXmlHttpFactory=zf,zh=Rs.WebChannel=Rl,Kh=Rs.XhrIo=Jf,Wh="@firebase/firestore",Gh=function(){function e(t){a(this,e),this.uid=t}return u(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Gh.UNAUTHENTICATED=new Gh(null),Gh.GOOGLE_CREDENTIALS=new Gh("google-credentials-uid"),Gh.FIRST_PARTY=new Gh("first-party-uid"),Gh.MOCK_USER=new Gh("mock-user");var Hh="9.6.11",Qh=new xe("@firebase/firestore");function Yh(){return Qh.logLevel}function Jh(e){if(Qh.logLevel<=de.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Zh);Qh.debug.apply(Qh,["Firestore (".concat(Hh,"): ").concat(e)].concat(oe(i)))}}function $h(e){if(Qh.logLevel<=de.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Zh);Qh.error.apply(Qh,["Firestore (".concat(Hh,"): ").concat(e)].concat(oe(i)))}}function Xh(e){if(Qh.logLevel<=de.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Zh);Qh.warn.apply(Qh,["Firestore (".concat(Hh,"): ").concat(e)].concat(oe(i)))}}function Zh(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Hh,") INTERNAL ASSERTION FAILED: ")+e;throw $h(t),new Error(t)}function td(e,t){e||ed()}function nd(e,t){return e}var rd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},id=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return u(n)}(j),ad=u((function e(){var t=this;a(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),od=u((function e(t,n){a(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ud=function(){function e(){a(this,e)}return u(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Gh.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),sd=function(){function e(t){a(this,e),this.token=t,this.changeListener=null}return u(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),cd=function(){function e(t){a(this,e),this.t=t,this.currentUser=Gh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return u(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ad;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ad,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Jh("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Jh("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ad)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Jh("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(td("string"==typeof n.accessToken),new od(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return td(null===e||"string"==typeof e),new Gh(e)}}]),e}(),ld=u((function e(t,n,r){a(this,e),this.type="FirstParty",this.user=Gh.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),fd=function(){function e(t,n,r){a(this,e),this.h=t,this.l=n,this.m=r}return u(e,[{key:"getToken",value:function(){return Promise.resolve(new ld(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Gh.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),hd=u((function e(t){a(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),dd=function(){function e(t){a(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return u(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Jh("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Jh("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Jh("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Jh("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(td("string"==typeof t.token),e.p=t.token,new hd(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),pd=function(){function e(t,n){var r=this;a(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return u(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function vd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}pd.A=-1;var md=function(){function e(){a(this,e)}return u(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=vd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function yd(e,t){return e<t?-1:e>t?1:0}function gd(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function kd(e){return e+"\0"}var wd=function(){function e(t,n){if(a(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new id(rd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new id(rd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new id(rd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new id(rd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return u(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?yd(this.nanoseconds,e.nanoseconds):yd(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),bd=function(){function e(t){a(this,e),this.timestamp=t}return u(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new wd(0,0))}},{key:"max",value:function(){return new e(new wd(253402300799,999999999))}}]),e}();function xd(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function _d(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Td(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Id=function(){function e(t,n,r){a(this,e),void 0===n?n=0:n>t.length&&ed(),void 0===r?r=t.length-n:r>t.length-n&&ed(),this.segments=t,this.offset=n,this.len=r}return u(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ed=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new id(rd.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,oe(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Id),Sd=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Cd=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Sd.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new id(rd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new id(rd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new id(rd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new id(rd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Id),Nd=function(){function e(t){a(this,e),this.fields=t,t.sort(Cd.comparator)}return u(e,[{key:"covers",value:function(e){var t,n=l(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return gd(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Ad=function(e){function t(e){a(this,t),this.binaryString=e}return u(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return yd(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Ad.EMPTY_BYTE_STRING=new Ad("");var Dd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pd(e){if(td(!!e),"string"==typeof e){var t=0,n=Dd.exec(e);if(td(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Rd(e.seconds),nanos:Rd(e.nanos)}}function Rd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Od(e){return"string"==typeof e?Ad.fromBase64String(e):Ad.fromUint8Array(e)}function Ld(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Md(e){var t=e.mapValue.fields.__previous_value__;return Ld(t)?Md(t):t}function Fd(e){var t=Pd(e.mapValue.fields.__local_write_time__.timestampValue);return new wd(t.seconds,t.nanos)}var Ud=u((function e(t,n,r,i,o,u,s,c){a(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=s,this.useFetchStreams=c})),Vd=function(){function e(t,n){a(this,e),this.projectId=t,this.database=n||"(default)"}return u(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function jd(e){return null==e}function Bd(e){return 0===e&&1/e==-1/0}function qd(e){return"number"==typeof e&&Number.isInteger(e)&&!Bd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var zd=function(){function e(t){a(this,e),this.path=t}return u(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ed.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ed.fromString(t))}},{key:"fromName",value:function(t){return new e(Ed.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ed.emptyPath())}},{key:"comparator",value:function(e,t){return Ed.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ed(t.slice()))}}]),e}(),Kd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wd={nullValue:"NULL_VALUE"};function Gd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ld(e)?4:op(e)?9:10:ed()}function Hd(e,t){if(e===t)return!0;var n=Gd(e);if(n!==Gd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fd(e).isEqual(Fd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Pd(e.timestampValue),r=Pd(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Od(e.bytesValue).isEqual(Od(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Rd(e.geoPointValue.latitude)===Rd(t.geoPointValue.latitude)&&Rd(e.geoPointValue.longitude)===Rd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Rd(e.integerValue)===Rd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Rd(e.doubleValue),r=Rd(t.doubleValue);return n===r?Bd(n)===Bd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return gd(e.arrayValue.values||[],t.arrayValue.values||[],Hd);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xd(n)!==xd(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Hd(n[i],r[i])))return!1;return!0}(e,t);default:return ed()}}function Qd(e,t){return void 0!==(e.values||[]).find((function(e){return Hd(e,t)}))}function Yd(e,t){if(e===t)return 0;var n=Gd(e),r=Gd(t);if(n!==r)return yd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return yd(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Rd(e.integerValue||e.doubleValue),r=Rd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jd(e.timestampValue,t.timestampValue);case 4:return Jd(Fd(e),Fd(t));case 5:return yd(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Od(e),r=Od(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=yd(n[i],r[i]);if(0!==a)return a}return yd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=yd(Rd(e.latitude),Rd(t.latitude));return 0!==n?n:yd(Rd(e.longitude),Rd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Yd(n[i],r[i]);if(a)return a}return yd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=yd(r[o],a[o]);if(0!==u)return u;var s=Yd(n[r[o]],i[a[o]]);if(0!==s)return s}return yd(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ed()}}function Jd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return yd(e,t);var n=Pd(e),r=Pd(t),i=yd(n.seconds,r.seconds);return 0!==i?i:yd(n.nanos,r.nanos)}function $d(e){return Xd(e)}function Xd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Pd(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Od(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,zd.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=l(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Xd(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=l(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Xd(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ed();var t,n}function Zd(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ep(e){return!!e&&"integerValue"in e}function tp(e){return!!e&&"arrayValue"in e}function np(e){return!!e&&"nullValue"in e}function rp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ip(e){return!!e&&"mapValue"in e}function ap(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return _d(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=ap(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ap(e.arrayValue.values[r]);return n}return Object.assign({},e)}function op(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function up(e){return"nullValue"in e?Wd:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Zd(Vd.empty(),zd.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ed()}function sp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Zd(Vd.empty(),zd.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Kd:ed()}function cp(e,t){return void 0===e?t:void 0===t||Yd(e,t)>0?e:t}function lp(e,t){return void 0===e?t:void 0===t||Yd(e,t)<0?e:t}var fp=function(){function e(t){a(this,e),this.value=t}return u(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ip(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ap(t)}},{key:"setAll",value:function(e){var t=this,n=Cd.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=ap(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ip(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Hd(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ip(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){_d(t,(function(t,n){return e[t]=n}));var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(ap(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function hp(e){var t=[];return _d(e.fields,(function(e,n){var r=new Cd([e]);if(ip(n)){var i=hp(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=l(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Nd(t)}var dp=function(){function e(t,n,r,i,o,u){a(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=o,this.documentState=u}return u(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=fp.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=fp.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,bd.min(),bd.min(),fp.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,bd.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,bd.min(),fp.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,bd.min(),fp.empty(),2)}}]),e}(),pp=u((function e(t,n,r,i){a(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function vp(e){return e.fields.find((function(e){return 2===e.kind}))}function mp(e){return e.fields.filter((function(e){return 2!==e.kind}))}pp.UNKNOWN_ID=-1;var yp=u((function e(t,n){a(this,e),this.fieldPath=t,this.kind=n})),gp=function(){function e(t,n){a(this,e),this.sequenceNumber=t,this.offset=n}return u(e,null,[{key:"empty",value:function(){return new e(0,bp.min())}}]),e}();function kp(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=bd.fromTimestamp(1e9===r?new wd(n+1,0):new wd(n,r));return new bp(i,zd.empty(),t)}function wp(e){return new bp(e.readTime,e.key,-1)}var bp=function(){function e(t,n,r){a(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return u(e,null,[{key:"min",value:function(){return new e(bd.min(),zd.empty(),-1)}},{key:"max",value:function(){return new e(bd.max(),zd.empty(),-1)}}]),e}();function xp(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=zd.comparator(e.documentKey,t.documentKey))?n:yd(e.largestBatchId,t.largestBatchId)}var _p=u((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;a(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=s,this.P=null}));function Tp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new _p(e,t,n,r,i,a,o)}function Ip(e){var t=nd(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+$d(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),jd(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return $d(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return $d(e)})).join(",")),t.P=n}return t.P}function Ep(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!qp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Hd(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Kp(e.startAt,t.startAt)&&Kp(e.endAt,t.endAt)}function Sp(e){return zd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Cp(e,t){return e.filters.filter((function(e){return e instanceof Dp&&e.field.isEqual(t)}))}function Np(e,t,n){var r,i,a=!0,o=l(Cp(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case"<":case"<=":s=up(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Wd}cp(r,s)===s&&(r=s,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var f=0;f<e.orderBy.length;++f)if(e.orderBy[f].field.isEqual(t)){var h=n.position[f];cp(r,h)===h&&(r=h,a=n.inclusive);break}return{value:r,inclusive:a}}function Ap(e,t,n){var r,i,a=!0,o=l(Cp(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case">=":case">":s=sp(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Kd}lp(r,s)===s&&(r=s,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var f=0;f<e.orderBy.length;++f)if(e.orderBy[f].field.isEqual(t)){var h=n.position[f];lp(r,h)===h&&(r=h,a=n.inclusive);break}return{value:r,inclusive:a}}var Dp=function(e){m(n,e);var t=b(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).field=e,o.op=r,o.value=i,o}return u(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Yd(t,this.value)):null!==t&&Gd(this.value)===Gd(t)&&this.v(Yd(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ed()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Pp(e,t,r):"array-contains"===t?new Mp(e,r):"in"===t?new Fp(e,r):"not-in"===t?new Up(e,r):"array-contains-any"===t?new Vp(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Rp(e,n):new Op(e,n)}}]),n}(function(){return u((function e(){a(this,e)}))}()),Pp=function(e){m(n,e);var t=b(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this,e,r,i)).key=zd.fromName(i.referenceValue),o}return u(n,[{key:"matches",value:function(e){var t=zd.comparator(e.key,this.key);return this.v(t)}}]),n}(Dp),Rp=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,"in",r)).keys=Lp("in",r),i}return u(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Dp),Op=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,"not-in",r)).keys=Lp("not-in",r),i}return u(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Dp);function Lp(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return zd.fromName(e.referenceValue)}))}var Mp=function(e){m(n,e);var t=b(n);function n(e,r){return a(this,n),t.call(this,e,"array-contains",r)}return u(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return tp(t)&&Qd(t.arrayValue,this.value)}}]),n}(Dp),Fp=function(e){m(n,e);var t=b(n);function n(e,r){return a(this,n),t.call(this,e,"in",r)}return u(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Qd(this.value.arrayValue,t)}}]),n}(Dp),Up=function(e){m(n,e);var t=b(n);function n(e,r){return a(this,n),t.call(this,e,"not-in",r)}return u(n,[{key:"matches",value:function(e){if(Qd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Qd(this.value.arrayValue,t)}}]),n}(Dp),Vp=function(e){m(n,e);var t=b(n);function n(e,r){return a(this,n),t.call(this,e,"array-contains-any",r)}return u(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Qd(t.value.arrayValue,e)}))}}]),n}(Dp),jp=u((function e(t,n){a(this,e),this.position=t,this.inclusive=n})),Bp=u((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";a(this,e),this.field=t,this.dir=n}));function qp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function zp(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?zd.comparator(zd.fromName(o.referenceValue),n.key):Yd(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Kp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Hd(e.position[n],t.position[n]))return!1;return!0}var Wp=u((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;a(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=s,this.endAt=c,this.D=null,this.C=null,this.startAt,this.endAt}));function Gp(e,t,n,r,i,a,o,u){return new Wp(e,t,n,r,i,a,o,u)}function Hp(e){return new Wp(e)}function Qp(e){return!jd(e.limit)&&"F"===e.limitType}function Yp(e){return!jd(e.limit)&&"L"===e.limitType}function Jp(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function $p(e){var t,n=l(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Xp(e){return null!==e.collectionGroup}function Zp(e){var t=nd(e);if(null===t.D){t.D=[];var n=$p(t),r=Jp(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Bp(n)),t.D.push(new Bp(Cd.keyField(),"asc"));else{var i,a=!1,o=l(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Bp(Cd.keyField(),s))}}}return t.D}function ev(e){var t=nd(e);if(!t.C)if("F"===t.limitType)t.C=Tp(t.path,t.collectionGroup,Zp(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=l(Zp(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Bp(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new jp(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new jp(t.startAt.position,!t.startAt.inclusive):null;t.C=Tp(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function tv(e,t,n){return new Wp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function nv(e,t){return Ep(ev(e),ev(t))&&e.limitType===t.limitType}function rv(e){return"".concat(Ip(ev(e)),"|lt:").concat(e.limitType)}function iv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat($d(t.value));var t})).join(", "),"]")),jd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return $d(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return $d(e)})).join(",")),"Target(".concat(t,")")}(ev(e)),"; limitType=").concat(e.limitType,")")}function av(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=l(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=l(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=zp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Zp(e),t))&&!(e.endAt&&!function(e,t,n){var r=zp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Zp(e),t))}(e,t)}function ov(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function uv(e){return function(t,n){var r,i=!1,a=l(Zp(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=sv(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function sv(e,t,n){var r=e.field.isKeyField()?zd.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Yd(r,i):ed()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ed()}}function cv(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(t)?"-0":t}}function lv(e){return{integerValue:""+e}}function fv(e,t){return qd(t)?lv(t):cv(e,t)}var hv=u((function e(){a(this,e),this._=void 0}));function dv(e,t,n){return e instanceof mv?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof yv?gv(e,t):e instanceof kv?wv(e,t):function(e,t){var n=vv(e,t),r=xv(n)+xv(e.k);return ep(n)&&ep(e.k)?lv(r):cv(e.M,r)}(e,t)}function pv(e,t,n){return e instanceof yv?gv(e,t):e instanceof kv?wv(e,t):n}function vv(e,t){return e instanceof bv?ep(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var mv=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n)}(hv),yv=function(e){m(n,e);var t=b(n);function n(e){var r;return a(this,n),(r=t.call(this)).elements=e,r}return u(n)}(hv);function gv(e,t){var n,r=_v(t),i=l(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Hd(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var kv=function(e){m(n,e);var t=b(n);function n(e){var r;return a(this,n),(r=t.call(this)).elements=e,r}return u(n)}(hv);function wv(e,t){var n,r=_v(t),i=l(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Hd(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var bv=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).M=e,i.k=r,i}return u(n)}(hv);function xv(e){return Rd(e.integerValue||e.doubleValue)}function _v(e){return tp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Tv=u((function e(t,n){a(this,e),this.field=t,this.transform=n}));var Iv=u((function e(t,n){a(this,e),this.version=t,this.transformResults=n})),Ev=function(){function e(t,n){a(this,e),this.updateTime=t,this.exists=n}return u(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Sv(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Cv=u((function e(){a(this,e)}));function Nv(e,t,n){e instanceof Ov?function(e,t,n){var r=e.value.clone(),i=Fv(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lv?function(e,t,n){if(Sv(e.precondition,t)){var r=Fv(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Mv(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Av(e,t,n){e instanceof Ov?function(e,t,n){if(Sv(e.precondition,t)){var r=e.value.clone(),i=Uv(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Rv(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Lv?function(e,t,n){if(Sv(e.precondition,t)){var r=Uv(e.fieldTransforms,n,t),i=t.data;i.setAll(Mv(e)),i.setAll(r),t.convertToFoundDocument(Rv(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Sv(e.precondition,t)&&t.convertToNoDocument(bd.min())}(e,t)}function Dv(e,t){var n,r=null,i=l(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=vv(a.transform,o||null);null!=u&&(null==r&&(r=fp.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Pv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&gd(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof yv&&t instanceof yv||e instanceof kv&&t instanceof kv?gd(e.elements,t.elements,Hd):e instanceof bv&&t instanceof bv?Hd(e.k,t.k):e instanceof mv&&t instanceof mv}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Rv(e){return e.isFoundDocument()?e.version:bd.min()}var Ov=function(e){m(n,e);var t=b(n);function n(e,r,i){var o,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return a(this,n),(o=t.call(this)).key=e,o.value=r,o.precondition=i,o.fieldTransforms=u,o.type=0,o}return u(n)}(Cv),Lv=function(e){m(n,e);var t=b(n);function n(e,r,i,o){var u,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return a(this,n),(u=t.call(this)).key=e,u.data=r,u.fieldMask=i,u.precondition=o,u.fieldTransforms=s,u.type=1,u}return u(n)}(Cv);function Mv(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Fv(e,t,n){var r=new Map;td(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,pv(o,u,n[i]))}return r}function Uv(e,t,n){var r,i=new Map,a=l(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,dv(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Vv,jv,Bv=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return u(n)}(Cv),qv=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return u(n)}(Cv),zv=u((function e(t){a(this,e),this.count=t}));function Kv(e){switch(e){default:return ed();case rd.CANCELLED:case rd.UNKNOWN:case rd.DEADLINE_EXCEEDED:case rd.RESOURCE_EXHAUSTED:case rd.INTERNAL:case rd.UNAVAILABLE:case rd.UNAUTHENTICATED:return!1;case rd.INVALID_ARGUMENT:case rd.NOT_FOUND:case rd.ALREADY_EXISTS:case rd.PERMISSION_DENIED:case rd.FAILED_PRECONDITION:case rd.ABORTED:case rd.OUT_OF_RANGE:case rd.UNIMPLEMENTED:case rd.DATA_LOSS:return!0}}function Wv(e){if(void 0===e)return $h("GRPC error has no .code"),rd.UNKNOWN;switch(e){case Vv.OK:return rd.OK;case Vv.CANCELLED:return rd.CANCELLED;case Vv.UNKNOWN:return rd.UNKNOWN;case Vv.DEADLINE_EXCEEDED:return rd.DEADLINE_EXCEEDED;case Vv.RESOURCE_EXHAUSTED:return rd.RESOURCE_EXHAUSTED;case Vv.INTERNAL:return rd.INTERNAL;case Vv.UNAVAILABLE:return rd.UNAVAILABLE;case Vv.UNAUTHENTICATED:return rd.UNAUTHENTICATED;case Vv.INVALID_ARGUMENT:return rd.INVALID_ARGUMENT;case Vv.NOT_FOUND:return rd.NOT_FOUND;case Vv.ALREADY_EXISTS:return rd.ALREADY_EXISTS;case Vv.PERMISSION_DENIED:return rd.PERMISSION_DENIED;case Vv.FAILED_PRECONDITION:return rd.FAILED_PRECONDITION;case Vv.ABORTED:return rd.ABORTED;case Vv.OUT_OF_RANGE:return rd.OUT_OF_RANGE;case Vv.UNIMPLEMENTED:return rd.UNIMPLEMENTED;case Vv.DATA_LOSS:return rd.DATA_LOSS;default:return ed()}}(jv=Vv||(Vv={}))[jv.OK=0]="OK",jv[jv.CANCELLED=1]="CANCELLED",jv[jv.UNKNOWN=2]="UNKNOWN",jv[jv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jv[jv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jv[jv.NOT_FOUND=5]="NOT_FOUND",jv[jv.ALREADY_EXISTS=6]="ALREADY_EXISTS",jv[jv.PERMISSION_DENIED=7]="PERMISSION_DENIED",jv[jv.UNAUTHENTICATED=16]="UNAUTHENTICATED",jv[jv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jv[jv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jv[jv.ABORTED=10]="ABORTED",jv[jv.OUT_OF_RANGE=11]="OUT_OF_RANGE",jv[jv.UNIMPLEMENTED=12]="UNIMPLEMENTED",jv[jv.INTERNAL=13]="INTERNAL",jv[jv.UNAVAILABLE=14]="UNAVAILABLE",jv[jv.DATA_LOSS=15]="DATA_LOSS";var Gv=function(){function e(t,n){a(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return u(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=d(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){_d(this.inner,(function(t,n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=d(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Td(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Hv=function(){function e(t,n){a(this,e),this.comparator=t,this.root=n||Yv.EMPTY}return u(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Yv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Yv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Qv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Qv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Qv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Qv(this.root,e,this.comparator,!0)}}]),e}(),Qv=function(){function e(t,n,r,i){a(this,e),this.isReverse=i,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return u(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Yv=function(){function e(t,n,r,i,o){a(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return u(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ed();if(this.right.isRed())throw ed();var e=this.left.check();if(e!==this.right.check())throw ed();return e+(this.isRed()?0:1)}}]),e}();Yv.EMPTY=null,Yv.RED=!0,Yv.BLACK=!1,Yv.EMPTY=new(function(){function e(){a(this,e),this.size=0}return u(e,[{key:"key",get:function(){throw ed()}},{key:"value",get:function(){throw ed()}},{key:"color",get:function(){throw ed()}},{key:"left",get:function(){throw ed()}},{key:"right",get:function(){throw ed()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Yv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Jv=function(){function e(t){a(this,e),this.comparator=t,this.data=new Hv(this.comparator)}return u(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new $v(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new $v(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),$v=function(){function e(t){a(this,e),this.iter=t}return u(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Xv(e){return e.hasNext()?e.getNext():void 0}var Zv=new Hv(zd.comparator);function em(){return Zv}var tm=new Hv(zd.comparator);function nm(){return tm}function rm(){return new Gv((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var im=new Hv(zd.comparator),am=new Jv(zd.comparator);function om(){for(var e=am,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var um=new Jv(yd);function sm(){return um}var cm=function(){function e(t,n,r,i,o){a(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return u(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,lm.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(bd.min(),r,sm(),em(),om())}}]),e}(),lm=function(){function e(t,n,r,i,o){a(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return u(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Ad.EMPTY_BYTE_STRING,n,om(),om(),om())}}]),e}(),fm=u((function e(t,n,r,i){a(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),hm=u((function e(t,n){a(this,e),this.targetId=t,this.$=n})),dm=u((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ad.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;a(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),pm=function(){function e(){a(this,e),this.B=0,this.L=ym(),this.U=Ad.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return u(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=om(),t=om(),n=om();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ed()}})),new lm(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=ym()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),vm=function(){function e(t){a(this,e),this.nt=t,this.st=new Map,this.it=em(),this.rt=mm(),this.ot=new Jv(yd)}return u(e,[{key:"ut",value:function(e){var t,n=l(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=l(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:ed()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Sp(i))if(0===n){var a=new zd(i.path);this.ct(t,a,dp.newNoDocument(a,bd.min()))}else td(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Sp(a.target)){var o=new zd(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,dp.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=om();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new cm(e,n,this.ot,this.it,r);return this.it=em(),this.rt=mm(),this.ot=new Jv(yd),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new pm,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Jv(yd),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Jh("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new pm),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function mm(){return new Hv(zd.comparator)}function ym(){return new Hv(zd.comparator)}var gm={asc:"ASCENDING",desc:"DESCENDING"},km={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wm=u((function e(t,n){a(this,e),this.databaseId=t,this.N=n}));function bm(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function xm(e,t){return e.N?t.toBase64():t.toUint8Array()}function _m(e,t){return bm(e,t.toTimestamp())}function Tm(e){return td(!!e),bd.fromTimestamp(function(e){var t=Pd(e);return new wd(t.seconds,t.nanos)}(e))}function Im(e,t){return function(e){return new Ed(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Em(e){var t=Ed.fromString(e);return td(Ym(t)),t}function Sm(e,t){return Im(e.databaseId,t.path)}function Cm(e,t){var n=Em(t);if(n.get(1)!==e.databaseId.projectId)throw new id(rd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new id(rd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zd(Pm(n))}function Nm(e,t){return Im(e.databaseId,t)}function Am(e){var t=Em(e);return 4===t.length?Ed.emptyPath():Pm(t)}function Dm(e){return new Ed(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Pm(e){return td(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Rm(e,t,n){return{name:Sm(e,t),fields:n.value.mapValue.fields}}function Om(e,t,n){var r=Cm(e,t.name),i=Tm(t.updateTime),a=new fp({mapValue:{fields:t.fields}}),o=dp.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Lm(e,t){return"found"in t?function(e,t){td(!!t.found),t.found.name,t.found.updateTime;var n=Cm(e,t.found.name),r=Tm(t.found.updateTime),i=new fp({mapValue:{fields:t.found.fields}});return dp.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){td(!!t.missing),td(!!t.readTime);var n=Cm(e,t.missing),r=Tm(t.readTime);return dp.newNoDocument(n,r)}(e,t):ed()}function Mm(e,t){var n;if(t instanceof Ov)n={update:Rm(e,t.key,t.value)};else if(t instanceof Bv)n={delete:Sm(e,t.key)};else if(t instanceof Lv)n={update:Rm(e,t.key,t.data),updateMask:Qm(t.fieldMask)};else{if(!(t instanceof qv))return ed();n={verify:Sm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof mv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof kv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof bv)return{fieldPath:t.field.canonicalString(),increment:n.k};throw ed()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_m(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ed()}(e,t.precondition)),n}function Fm(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ev.updateTime(Tm(e.updateTime)):void 0!==e.exists?Ev.exists(e.exists):Ev.none()}(t.currentDocument):Ev.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)td("REQUEST_TIME"===t.setToServerValue),n=new mv;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new yv(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new kv(i)}else"increment"in t?n=new bv(e,t.increment):ed();var a=Cd.fromServerFormat(t.fieldPath);return new Tv(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Cm(e,t.update.name),a=new fp({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Nd(t.map((function(e){return Cd.fromServerFormat(e)})))}(t.updateMask);return new Lv(i,a,o,n,r)}return new Ov(i,a,n,r)}if(t.delete){var u=Cm(e,t.delete);return new Bv(u,n)}if(t.verify){var s=Cm(e,t.verify);return new qv(s,n)}return ed()}function Um(e,t){return{documents:[Nm(e,t.path)]}}function Vm(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Nm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Nm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(rp(e.value))return{unaryFilter:{field:Km(e.field),op:"IS_NAN"}};if(np(e.value))return{unaryFilter:{field:Km(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rp(e.value))return{unaryFilter:{field:Km(e.field),op:"IS_NOT_NAN"}};if(np(e.value))return{unaryFilter:{field:Km(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Km(e.field),op:zm(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Km(e.field),direction:qm(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||jd(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function jm(e){var t=Am(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){td(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Bm(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Bp(Wm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return jd(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new jp(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new jp(n,t)}(n.endAt)),Gp(t,i,u,o,s,"F",c,l)}function Bm(e){return e?void 0!==e.unaryFilter?[Hm(e)]:void 0!==e.fieldFilter?[Gm(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Bm(e)})).reduce((function(e,t){return e.concat(t)})):ed():[]}function qm(e){return gm[e]}function zm(e){return km[e]}function Km(e){return{fieldPath:e.canonicalString()}}function Wm(e){return Cd.fromServerFormat(e.fieldPath)}function Gm(e){return Dp.create(Wm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ed()}}(e.fieldFilter.op),e.fieldFilter.value)}function Hm(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Wm(e.unaryFilter.field);return Dp.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Wm(e.unaryFilter.field);return Dp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Wm(e.unaryFilter.field);return Dp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Wm(e.unaryFilter.field);return Dp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ed()}}function Qm(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ym(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Jm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Xm(t)),t=$m(e.get(n),t);return Xm(t)}function $m(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Xm(e){return e+"\x01\x01"}function Zm(e){var t=e.length;if(td(t>=2),2===t)return td("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ed.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ed(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ed()}a=o+2}return new Ed(r)}var ey=["userId","batchId"];function ty(e,t){return[e,Jm(t)]}function ny(e,t,n){return[e,Jm(t),n]}var ry={},iy=["prefixPath","collectionGroup","readTime","documentId"],ay=["prefixPath","collectionGroup","documentId"],oy=["collectionGroup","readTime","prefixPath","documentId"],uy=["canonicalId","targetId"],sy=["targetId","path"],cy=["path","targetId"],ly=["collectionId","parent"],fy=["indexId","uid"],hy=["uid","sequenceNumber"],dy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],py=["indexId","uid","orderedDocumentKey"],vy=["userId","collectionPath","documentId"],my=["userId","collectionPath","largestBatchId"],yy=["userId","collectionGroup","largestBatchId"],gy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),ky=[].concat(oe(gy),["documentOverlays"]),wy=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],by=[].concat(wy,["indexConfiguration","indexState","indexEntries"]),xy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_y=function(){function e(){a(this,e),this.onCommittedListeners=[]}return u(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Ty=function(){function e(t){var n=this;a(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return u(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ed(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=l(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Iy=function(){function e(t,n){var r=this;a(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new ad,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Cy(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Ry(e.target.error);r.At.reject(new Cy(t,n))}}return u(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Jh("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Ay(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Cy(n,t)}}}]),e}(),Ey=function(){function e(t,n,r){a(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.Vt(R())&&$h("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return u(e,[{key:"Nt",value:function(){var e=se(I().mark((function e(t){var n=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Jh("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Cy(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new id(rd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new id(rd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Cy(t,n))},i.onupgradeneeded=function(e){Jh("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){Jh("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=se(I().mark((function e(t,n,r,i){var a,o,u,s,c=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(I().mark((function e(){var n,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Iy.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),Ty.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Jh("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Jh("SimpleDb","Removing database:",e),Dy(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!V())return!1;if(e.St())return!0;var t=R(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/CompanyLunch",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Sy=function(){function e(t){a(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return u(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Dy(this.Ft.delete())}}]),e}(),Cy=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this,rd.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return u(n)}(id);function Ny(e){return"IndexedDbTransactionError"===e.name}var Ay=function(){function e(t){a(this,e),this.store=t}return u(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Jh("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Jh("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Dy(n)}},{key:"add",value:function(e){return Jh("SimpleDb","ADD",this.store.name,e,e),Dy(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Dy(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Jh("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Jh("SimpleDb","DELETE",this.store.name,e),Dy(this.store.delete(e))}},{key:"count",value:function(){return Jh("SimpleDb","COUNT",this.store.name),Dy(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Ty((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Ty((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){Jh("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Ty((function(n,r){t.onerror=function(e){var t=Ry(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Ty((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Sy(i),o=t(i.primaryKey,i.value,a);if(o instanceof Ty){var u=o.catch((function(e){return a.done(),Ty.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Ty.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Dy(e){return new Ty((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Ry(e.target.error);n(t)}}))}var Py=!1;function Ry(e){var t=Ey.Vt(R());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new id("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Py||(Py=!0,setTimeout((function(){throw r}),0)),r}}return e}var Oy=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return u(n)}(_y);function Ly(e,t){var n=nd(e);return Ey.xt(n.Ht,t)}var My=function(){function e(t,n,r,i){a(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return u(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Nv(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=l(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Av(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=l(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Av(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(bd.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),om())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&gd(this.mutations,e.mutations,(function(e,t){return Pv(e,t)}))&&gd(this.baseMutations,e.baseMutations,(function(e,t){return Pv(e,t)}))}}]),e}(),Fy=function(){function e(t,n,r,i){a(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return u(e,null,[{key:"from",value:function(t,n,r){td(t.mutations.length===r.length);for(var i=im,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Uy=function(){function e(t,n){a(this,e),this.largestBatchId=t,this.mutation=n}return u(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Vy=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:bd.min(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:bd.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ad.EMPTY_BYTE_STRING;a(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=s}return u(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),jy=u((function e(t){a(this,e),this.Jt=t}));function By(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:qy(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Sm(e,t.key),fields:t.data.value.mapValue.fields,updateTime:bm(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:zy(t.version)};else{if(!t.isUnknownDocument())return ed();r.unknownDocument={path:n.path.toArray(),version:zy(t.version)}}return r}function qy(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function zy(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ky(e){var t=new wd(e.seconds,e.nanoseconds);return bd.fromTimestamp(t)}function Wy(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Fm(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Fm(e.Jt,t)})),u=wd.fromMillis(t.localWriteTimeMs);return new My(t.batchId,u,n,o)}function Gy(e){var t,n,r=Ky(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Ky(e.lastLimboFreeSnapshotVersion):bd.min();return void 0!==e.query.documents?(td(1===(n=e.query).documents.length),t=ev(Hp(Am(n.documents[0])))):t=function(e){return ev(jm(e))}(e.query),new Vy(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Ad.fromBase64String(e.resumeToken))}function Hy(e,t){var n,r=zy(t.snapshotVersion),i=zy(t.lastLimboFreeSnapshotVersion);n=Sp(t.target)?Um(e.Jt,t.target):Vm(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ip(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Qy(e){var t=jm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?tv(t,t.limit,"L"):t}function Yy(e,t){return new Uy(t.largestBatchId,Fm(e.Jt,t.overlayMutation))}function Jy(e,t){var n=t.path.lastSegment();return[e,Jm(t.path.popLast()),n]}var $y=function(){function e(){a(this,e)}return u(e,[{key:"getBundleMetadata",value:function(e,t){return Xy(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Ky(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Xy(e).put({bundleId:(n=t).id,createTime:zy(Tm(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Zy(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Qy(t.bundledQuery),readTime:Ky(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Zy(e).put(function(e){return{name:e.name,readTime:zy(Tm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Xy(e){return Ly(e,"bundles")}function Zy(e){return Ly(e,"namedQueries")}var eg=function(){function e(t,n){a(this,e),this.M=t,this.userId=n}return u(e,[{key:"getOverlay",value:function(e,t){var n=this;return tg(e).get(Jy(this.userId,t)).next((function(e){return e?Yy(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Uy(t,a);i.push(r.Xt(e,o))})),Ty.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Jm(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(tg(e).Qt("collectionPathOverlayIndex",i))})),Ty.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=rm(),a=Jm(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return tg(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Yy(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=rm(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tg(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Yy(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return tg(e).put(function(e,t,n){var r=d(Jy(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Mm(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function tg(e){return Ly(e,"documentOverlays")}var ng=function(){function e(){a(this,e)}return u(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Rd(e.integerValue));else if("doubleValue"in e){var n=Rd(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Bd(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Od(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?op(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ed()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),zd.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function rg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ig(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=rg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ng.fe=new ng;var ag=function(){function e(){a(this,e),this.buffer=new Uint8Array(1024),this.position=0}return u(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=ig(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=ig(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Pe",value:function(){this.be(255),this.be(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.be(0),this.be(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"be",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),og=function(){function e(t){a(this,e),this.De=t}return u(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.Pe()}}]),e}(),ug=function(){function e(t){a(this,e),this.De=t}return u(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),sg=function(){function e(){a(this,e),this.De=new ag,this.Ce=new og(this.De),this.xe=new ug(this.De)}return u(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),cg=function(){function e(t,n,r,i){a(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return u(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function lg(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=fg(e.arrayValue,t.arrayValue))?n:0!==(n=fg(e.directionalValue,t.directionalValue))?n:zd.comparator(e.documentKey,t.documentKey)}function fg(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var hg=function(){function e(t){a(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=l(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(o){r.e(o)}finally{r.f()}}return u(e,[{key:"$e",value:function(e){var t=vp(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=mp(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=l(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),dg=function(){function e(){a(this,e),this.qe=new pg}return u(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Ty.resolve()}},{key:"getCollectionParents",value:function(e,t){return Ty.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Ty.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Ty.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Ty.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return Ty.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return Ty.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Ty.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return Ty.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Ty.resolve()}}]),e}(),pg=function(){function e(){a(this,e),this.index={}}return u(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Jv(Ed.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Jv(Ed.comparator)).toArray()}}]),e}(),vg=new Uint8Array(0),mg=function(){function e(t,n){a(this,e),this.user=t,this.databaseId=n,this.Ke=new pg,this.Ge=new Gv((function(e){return Ip(e)}),(function(e,t){return Ep(e,t)})),this.uid=t.uid||""}return u(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:Jm(i)};return yg(e).put(a)}return Ty.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[kd(t),""],!1,!0);return yg(e).qt(r).next((function(e){var r,i=l(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Zm(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=kg(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=kg(e),r=wg(e),i=gg(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=gg(e),i=!0,a=new Map;return Ty.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=om(),o=[];return Ty.forEach(a,(function(i,a){var u;Jh("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Ip(t)));var s=function(e,t){var n=vp(t);if(void 0===n)return null;var r,i=l(Cp(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=l(mp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=l(Cp(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),f=function(e,t){var n,r=[],i=!0,a=l(mp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Np(e,o.fieldPath,e.startAt):Ap(e,o.fieldPath,e.startAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new jp(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=l(mp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ap(e,o.fieldPath,e.endAt):Np(e,o.fieldPath,e.endAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new jp(r,i)}(a,i),d=n.je(i,a,f),p=n.je(i,a,h),v=n.We(i,a,c),m=n.ze(i.indexId,s,d,!!f&&f.inclusive,p,!!h&&h.inclusive,v);return Ty.forEach(m,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=zd.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Ty.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):vg,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,oe(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new cg(e,zd.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new cg(e,zd.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new cg(e,zd.empty(),vg,vg)}},{key:"getFieldIndex",value:function(e,t){var n=new hg(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new sg,i=l(mp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);ng.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new sg;return ng.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new sg;return ng.fe.Zt(Zd(this.databaseId,t),n.Ne(function(e){var t=mp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new sg);var i,a=0,o=l(mp(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],f=l(r);try{for(f.s();!(u=f.n()).done;){var h=u.value;if(this.en(t,s.fieldPath)&&tp(c))r=this.nn(r,s,c);else{var d=h.Ne(s.kind);ng.fe.Zt(c,d)}}}catch(p){f.e(p)}finally{f.f()}}}catch(p){o.e(p)}finally{o.f()}return this.sn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=oe(e),a=[],o=l(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=l(i);try{for(c.s();!(u=c.n()).done;){var f=u.value,h=new sg;h.seed(f.Se()),ng.fe.Zt(s,h.Ne(t.kind)),a.push(h)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Dp&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=kg(e),i=wg(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Ty.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new gp(t.sequenceNumber,new bp(Ky(t.readTime),new zd(Zm(t.documentKey)),t.largestBatchId)):gp.empty(),r=e.fields.map((function(e){var t=d(e,2),n=t[0],r=t[1];return new yp(Cd.fromServerFormat(n),r)}));return new pp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:yd(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=kg(e),a=wg(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Ty.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:zy(r.readTime),documentKey:Jm(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Ty.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Ty.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Ty.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?Ty.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return gg(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return gg(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=gg(e),i=new Jv(lg);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new cg(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Jv(lg),r=this.Ze(t,e);if(null==r)return n;var i=vp(t);if(null!=i){var a=e.data.field(i.fieldPath);if(tp(a)){var o,u=l(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new cg(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new cg(t.indexId,e.key,vg,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;Jh("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Xv(a),s=Xv(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Xv(o)):l?(i(u),u=Xv(a)):(u=Xv(a),s=Xv(o))}}(r,i,lg,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),Ty.waitFor(o)}},{key:"rn",value:function(e){var t=1;return wg(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return lg(e,t)})).filter((function(e,t,n){return!t||0!==lg(e,n[t-1])}));var r=[];r.push(e);var i,a=l(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=lg(o,e),s=lg(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],f=0;f<r.length;f+=2)c.push(IDBKeyRange.bound([r[f].indexId,this.uid,r[f].arrayValue,r[f].directionalValue,vg,[]],[r[f+1].indexId,this.uid,r[f+1].arrayValue,r[f+1].directionalValue,vg,[]]));return c}}]),e}();function yg(e){return Ly(e,"collectionParents")}function gg(e){return Ly(e,"indexEntries")}function kg(e){return Ly(e,"indexConfiguration")}function wg(e){return Ly(e,"indexState")}var bg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xg=function(){function e(t,n,r){a(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return u(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function _g(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){td(1===u)})));var c,f=[],h=l(n.mutations);try{for(h.s();!(c=h.n()).done;){var d=c.value,p=ny(t,d.key.path,n.batchId);a.push(i.delete(p)),f.push(d.key)}}catch(v){h.e(v)}finally{h.f()}return Ty.waitFor(a).next((function(){return f}))}function Tg(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ed();t=e.noDocument}return JSON.stringify(t).length}xg.DEFAULT_COLLECTION_PERCENTILE=10,xg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xg.DEFAULT=new xg(41943040,xg.DEFAULT_COLLECTION_PERCENTILE,xg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xg.DISABLED=new xg(-1,0,0);var Ig=function(){function e(t,n,r,i){a(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return u(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sg(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Cg(e),o=Sg(e);return o.add({}).next((function(u){td("number"==typeof u);var s,c=new My(u,t,n,r),f=function(e,t,n){var r=n.baseMutations.map((function(t){return Mm(e.Jt,t)})),i=n.mutations.map((function(t){return Mm(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),h=[],d=new Jv((function(e,t){return yd(e.canonicalString(),t.canonicalString())})),p=l(r);try{for(p.s();!(s=p.n()).done;){var v=s.value,m=ny(i.userId,v.key.path,u);d=d.add(v.key.path.popLast()),h.push(o.put(f)),h.push(a.put(m,ry))}}catch(y){p.e(y)}finally{p.f()}return d.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),Ty.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Sg(e).get(t).next((function(e){return e?(td(e.userId===n.userId),Wy(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Ty.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Sg(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(td(t.batchId>=r),a=Wy(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Sg(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sg(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Wy(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=ty(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Cg(e).Wt({range:i},(function(r,i,o){var u=d(r,3),s=u[0],c=u[1],l=u[2],f=Zm(c);if(s===n.userId&&t.path.isEqual(f))return Sg(e).get(l).next((function(e){if(!e)throw ed();td(e.userId===n.userId),a.push(Wy(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Jv(yd),i=[];return t.forEach((function(t){var a=ty(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Cg(e).Wt({range:o},(function(e,i,a){var o=d(e,3),u=o[0],s=o[1],c=o[2],l=Zm(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Ty.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=ty(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Jv(yd);return Cg(e).Wt({range:o},(function(e,t,a){var o=d(e,3),s=o[0],c=o[1],l=o[2],f=Zm(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Sg(e).get(t).next((function(e){if(null===e)throw ed();td(e.userId===n.userId),r.push(Wy(n.M,e))})))})),Ty.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return _g(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),Ty.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ty.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Cg(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Zm(e[1]);i.push(a)}else r.done()})).next((function(){td(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Eg(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Ng(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return td(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Eg(e,t,n){var r=ty(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Cg(e).Wt({range:a,jt:!0},(function(e,n,r){var a=d(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Sg(e){return Ly(e,"mutations")}function Cg(e){return Ly(e,"documentMutations")}function Ng(e){return Ly(e,"mutationQueues")}var Ag=function(){function e(t){a(this,e),this.mn=t}return u(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Dg=function(){function e(t,n){a(this,e),this.referenceDelegate=t,this.M=n}return u(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Ag(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return bd.fromTimestamp(new wd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Pg(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return td(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Pg(e).Wt((function(o,u){var s=Gy(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Ty.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Pg(e).Wt((function(e,n){var r=Gy(n);t(r)}))}},{key:"pn",value:function(e){return Rg(e).get("targetGlobalKey").next((function(e){return td(null!==e),e}))}},{key:"In",value:function(e,t){return Rg(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Pg(e).put(Hy(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Ip(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Pg(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Gy(n);Ep(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Og(e);return t.forEach((function(t){var o=Jm(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Ty.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Og(e);return Ty.forEach(t,(function(t){var a=Jm(t.path);return Ty.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Og(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Og(e),i=om();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=Zm(e[1]),a=new zd(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Jm(t.path),r=IDBKeyRange.bound([n],[kd(n)],!1,!0),i=0;return Og(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=d(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Pg(e).get(t).next((function(e){return e?Gy(e):null}))}}]),e}();function Pg(e){return Ly(e,"targets")}function Rg(e){return Ly(e,"targetGlobal")}function Og(e){return Ly(e,"targetDocuments")}function Lg(e){return Mg.apply(this,arguments)}function Mg(){return Mg=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===rd.FAILED_PRECONDITION&&t.message===xy){e.next=2;break}throw t;case 2:Jh("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Mg.apply(this,arguments)}function Fg(e,t){var n=d(e,2),r=n[0],i=n[1],a=d(t,2),o=a[0],u=a[1],s=yd(r,o);return 0===s?yd(i,u):s}var Ug=function(){function e(t){a(this,e),this.An=t,this.buffer=new Jv(Fg),this.Rn=0}return u(e,[{key:"Pn",value:function(){return++this.Rn}},{key:"bn",value:function(e){var t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Fg(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Vg=function(){function e(t,n){a(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return u(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;Jh("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,se(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Ny(n.t0)){n.next=12;break}Jh("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Lg(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),jg=function(){function e(t,n){a(this,e),this.Dn=t,this.params=n}return u(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Ty.resolve(pd.A);var r=new Ug(t);return this.Dn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Jh("LruGarbageCollector","Garbage collection skipped; disabled"),Ty.resolve(bg)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Jh("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),bg):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Jh("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Yh()<=de.DEBUG&&Jh("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Ty.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Bg=function(){function e(t,n){a(this,e),this.db=t,this.garbageCollector=function(e,t){return new jg(e,t)}(this,n)}return u(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return qg(e,n)}},{key:"removeReference",value:function(e,t,n){return qg(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return qg(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Ng(e).zt((function(r){return Eg(e,r,t).next((function(e){return e&&(n=!0),Ty.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,bd.min()),Og(e).delete([0,Jm(o.path)])}))}));i.push(s)}})).next((function(){return Ty.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return qg(e,t)}},{key:"Mn",value:function(e,t){var n,r=Og(e),i=pd.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=d(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==pd.A&&t(new zd(Zm(n)),i),i=s,n=u):i=pd.A})).next((function(){i!==pd.A&&t(new zd(Zm(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function qg(e,t){return Og(e).put(function(e,t){return{targetId:0,path:Jm(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var zg=function(){function e(){a(this,e),this.changes=new Gv((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return u(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,dp.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ty.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Kg=function(){function e(t){a(this,e),this.M=t}return u(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Hg(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Hg(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],qy(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=dp.newInvalidDocument(t);return Hg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Qg(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:dp.newInvalidDocument(t)};return Hg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Qg(t))},(function(e,i){r={document:n.$n(t,i),size:Tg(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=em();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=em(),i=new Hv(zd.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Tg(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Ty.resolve();var r=new Jv(Jg);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Qg(r.first()),Qg(r.last())),a=r.getIterator(),o=a.getNext();return Hg(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=zd.fromSegments([].concat(oe(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Jg(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(Qg(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),qy(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hg(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=em(),i=l(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(zd.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=em(),o=Yg(t,n),u=Yg(t,bp.max());return Hg(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(zd.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Wg(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Gg(e).get("remoteDocumentGlobalKey").next((function(e){return td(!!e),e}))}},{key:"Fn",value:function(e,t){return Gg(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Om(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=zd.fromSegments(t.noDocument.path),i=Ky(t.noDocument.readTime);n=dp.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ed();var a=zd.fromSegments(t.unknownDocument.path),o=Ky(t.unknownDocument.version);n=dp.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new wd(e[0],e[1]);return bd.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(bd.min()))return n}return dp.newInvalidDocument(e)}}]),e}(),Wg=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new Gv((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return u(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Jv((function(e,t){return yd(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=By(t.Kn.M,o);i=i.add(a.path.popLast());var c=Tg(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=By(t.Kn.M,o.convertToNoDocument(bd.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),Ty.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(zg);function Gg(e){return Ly(e,"remoteDocumentGlobal")}function Hg(e){return Ly(e,"remoteDocumentsV14")}function Qg(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Yg(e,t){var n=t.documentKey.path.toArray();return[e,qy(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Jg(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=yd(n[a],r[a]))return i;return(i=yd(n.length,r.length))||((i=yd(n[n.length-2],r[r.length-2]))||yd(n[n.length-1],r[r.length-1]))}var $g=function(){function e(t){a(this,e),this.M=t}return u(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Iy("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ey,{unique:!0}),e.createObjectStore("documentMutations")}(e),Xg(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Ty.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Xg(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ey,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Ty.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:vy});t.createIndex("collectionPathOverlayIndex",my,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",yy,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:iy});t.createIndex("documentKeyIndex",ay),t.createIndex("collectionGroupIndex",oy)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:fy}).createIndex("sequenceNumberIndex",hy,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:dy}).createIndex("documentKeyIndex",py,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=Tg(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Ty.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Ty.forEach(r,(function(r){td(r.userId===n.userId);var i=Wy(t.M,r);return _g(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Ed(n),o=function(e){return[0,Jm(e)]}(a);r.push(t.get(o).next((function(n){return n?Ty.resolve():function(n){return t.put({targetId:0,path:Jm(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Ty.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:ly});var n=t.store("collectionParents"),r=new pg,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Jm(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Ed(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=d(e,3),r=(n[0],n[1]),a=(n[2],Zm(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Gy(r),a=Hy(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new zd(Ed.fromString(i.document.name).popFirst(5)):i.noDocument?zd.fromSegments(i.noDocument.path):i.unknownDocument?zd.fromSegments(i.unknownDocument.path):ed()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Ty.waitFor(r)}))}}]),e}();function Xg(e){e.createObjectStore("targetDocuments",{keyPath:sy}).createIndex("documentTargetsIndex",cy,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uy,{unique:!0}),e.createObjectStore("targetGlobal")}var Zg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ek=function(){function e(t,n,r,i,o,u,s,c,l,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(a(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=o,this.window=u,this.document=s,this.Xn=l,this.Zn=f,this.ts=h,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new id(rd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bg(this,i),this.hs=n+"main",this.M=new jy(c),this.ls=new Ey(this.hs,this.ts,new $g(this.M)),this.fs=new Dg(this.referenceDelegate,this.M),this.ds=function(e){return new Kg(e)}(this.M),this._s=new $y,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===f&&$h("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return u(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new id(rd.FAILED_PRECONDITION,Zg);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new pd(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=se(I().mark((function n(r){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=se(I().mark((function t(n){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return nk(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.Ps(t).next((function(){return!0}))}))})).catch((function(t){if(Ny(t))return Jh("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Jh("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return tk(e).get("owner").next((function(e){return Ty.resolve(t.bs(e))}))}},{key:"Vs",value:function(e){return nk(e).delete(this.clientId)}},{key:"vs",value:function(){var e=se(I().mark((function e(){var t,n,r,i,a=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Ly(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Ty.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=l(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Ty.resolve(!0):tk(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new id(rd.FAILED_PRECONDITION,Zg);return!1}}return!(!t.networkEnabled||!t.inForeground)||nk(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Jh("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=se(I().mark((function e(){var t=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Oy(e,pd.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return nk(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Ig.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new mg(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return eg.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Jh("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?by:13===i?wy:12===i?ky:11===i?gy:void ed();return this.ls.runTransaction(e,o,u,(function(i){return a=new Oy(i,r.es?r.es.next():pd.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw $h("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new id(rd.FAILED_PRECONDITION,xy);return n(a)})).next((function(e){return r.Ps(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return tk(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.bs(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new id(rd.FAILED_PRECONDITION,Zg)}))}},{key:"Ps",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tk(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=tk(e);return n.get("owner").next((function(e){return t.bs(e)?(Jh("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ty.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||($h("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!L()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Jh("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return $h("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(Ws){$h("Failed to set zombie client id.",Ws)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(Ws){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Ey.vt()}}]),e}();function tk(e){return Ly(e,"owner")}function nk(e){return Ly(e,"clientMetadata")}function rk(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var ik=function(){function e(t,n,r){a(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return u(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=l(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=l(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return zd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Xp(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new zd(t)).next((function(e){var t=nm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=nm();return this.indexManager.getCollectionParents(e,i).next((function(o){return Ty.forEach(o,(function(o){var u=function(e,t){return new Wp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=l(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=dp.newInvalidDocument(s),r=r.insert(s,c)),Av(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){n.e(f)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){av(t,n)||(r=r.remove(e))})),r}))}}]),e}(),ak=function(){function e(t,n,r,i){a(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return u(e,null,[{key:"Ys",value:function(t,n){var r,i=om(),a=om(),o=l(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ok=function(){function e(){a(this,e)}return u(e,[{key:"Xs",value:function(e){this.Zs=e}},{key:"Qs",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(bd.min())?this.ti(e,t):this.Zs.Ks(e,r).next((function(a){var o=i.ei(t,a);return(Qp(t)||Yp(t))&&i.ni(t.limitType,o,r,n)?i.ti(e,t):(Yh()<=de.DEBUG&&Jh("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),iv(t)),i.Zs.Qs(e,t,kp(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ei",value:function(e,t){var n=new Jv(uv(e));return t.forEach((function(t,r){av(e,r)&&(n=n.add(r))})),n}},{key:"ni",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ti",value:function(e,t){return Yh()<=de.DEBUG&&Jh("QueryEngine","Using full collection scan to execute query:",iv(t)),this.Zs.Qs(e,t,bp.min())}}]),e}(),uk=function(){function e(t,n,r,i){a(this,e),this.persistence=t,this.si=n,this.M=i,this.ii=new Hv(yd),this.ri=new Gv((function(e){return Ip(e)}),Ep),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}return u(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new ik(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ii)}))}}]),e}();function sk(e,t,n,r){return new uk(e,t,n,r)}function ck(e,t){return lk.apply(this,arguments)}function lk(){return lk=se(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.ai(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=om(),s=l(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var f,h=l(c.mutations);try{for(h.s();!(f=h.n()).done;){var d=f.value;u=u.add(d.key)}}catch(w){h.e(w)}finally{h.f()}}}catch(w){s.e(w)}finally{s.f()}var p,v=l(n);try{for(v.s();!(p=v.n()).done;){var m=p.value;o.push(m.batchId);var y,g=l(m.mutations);try{for(g.s();!(y=g.n()).done;){var k=y.value;u=u.add(k.key)}}catch(w){g.e(w)}finally{g.f()}}}catch(w){v.e(w)}finally{v.f()}return r.ci.Ks(e,u).next((function(e){return{hi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),lk.apply(this,arguments)}function fk(e,t){var n=nd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Ty.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);td(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}function hk(e){var t=nd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function dk(e,t){var n=nd(e),r=t.snapshotVersion,i=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ui.newChangeBuffer({trackRemovals:!0});i=n.ii;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Ad.EMPTY_BYTE_STRING,bd.min()).withLastLimboFreeSnapshotVersion(bd.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=em();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(pk(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(bd.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Ty.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ci.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ii=i,e}))}function pk(e,t,n){var r=om();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=em();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(bd.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Jh("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function vk(e,t){var n=nd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function mk(e,t){var n=nd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,Ty.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new Vy(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ii.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ii=n.ii.insert(e.targetId,e),n.ri.set(t,e.targetId)),e}))}function yk(e,t,n){return gk.apply(this,arguments)}function gk(){return gk=se(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=nd(t),a=i.ii.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ny(e.t1)){e.next=12;break}throw e.t1;case 12:Jh("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ii=i.ii.remove(n),i.ri.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),gk.apply(this,arguments)}function kk(e,t,n){var r=nd(e),i=bd.min(),a=om();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=nd(e),i=r.ri.get(n);return void 0!==i?Ty.resolve(r.ii.get(i)):r.fs.getTargetData(t,n)}(r,e,ev(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.si.Qs(e,t,n?i:bd.min(),n?a:om())})).next((function(e){return xk(r,ov(t),e),{documents:e,li:a}}))}))}function wk(e,t){var n=nd(e),r=nd(n.fs),i=n.ii.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function bk(e,t){var n=nd(e),r=n.oi.get(t)||bd.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ui.getAllFromCollectionGroup(e,t,kp(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return xk(n,t,e),e}))}function xk(e,t,n){var r=bd.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.oi.set(t,r)}function _k(e,t,n,r){return Tk.apply(this,arguments)}function Tk(){return Tk=se(I().mark((function e(t,n,r,i){var a,o,u,s,c,f,h,d,p,v;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=nd(t),o=om(),u=em(),s=l(r);try{for(s.s();!(c=s.n()).done;)f=c.value,h=n.fi(f.metadata.name),f.document&&(o=o.add(h)),(d=n.di(f)).setReadTime(n._i(f.metadata.readTime)),u=u.insert(h,d)}catch(m){s.e(m)}finally{s.f()}return p=a.ui.newChangeBuffer({trackRemovals:!0}),e.next=7,mk(a,function(e){return ev(Hp(Ed.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return pk(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.fs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.ci.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Tk.apply(this,arguments)}function Ik(e,t){return Ek.apply(this,arguments)}function Ek(){return Ek=se(I().mark((function e(t,n){var r,i,a,o=arguments;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:om(),e.next=3,mk(t,ev(Qy(n.bundledQuery)));case 3:return i=e.sent,a=nd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Tm(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Ad.EMPTY_BYTE_STRING,t);return a.ii=a.ii.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ek.apply(this,arguments)}var Sk=function(){function e(t){a(this,e),this.M=t,this.wi=new Map,this.mi=new Map}return u(e,[{key:"getBundleMetadata",value:function(e,t){return Ty.resolve(this.wi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.wi.set(t.id,{id:(n=t).id,version:n.version,createTime:Tm(n.createTime)}),Ty.resolve()}},{key:"getNamedQuery",value:function(e,t){return Ty.resolve(this.mi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.mi.set(t.name,function(e){return{name:e.name,query:Qy(e.bundledQuery),readTime:Tm(e.readTime)}}(t)),Ty.resolve()}}]),e}(),Ck=function(){function e(){a(this,e),this.overlays=new Hv(zd.comparator),this.gi=new Map}return u(e,[{key:"getOverlay",value:function(e,t){return Ty.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Ty.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.gi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.gi.delete(n)),Ty.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=rm(),i=t.length+1,a=new zd(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Ty.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Hv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=rm(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=rm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Ty.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.gi.get(r.largestBatchId).delete(n.key);this.gi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Uy(t,n));var a=this.gi.get(t);void 0===a&&(a=om(),this.gi.set(t,a)),this.gi.set(t,a.add(n.key))}}}]),e}(),Nk=function(){function e(){a(this,e),this.yi=new Jv(Ak.pi),this.Ii=new Jv(Ak.Ti)}return u(e,[{key:"isEmpty",value:function(){return this.yi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Ak(e,t);this.yi=this.yi.add(n),this.Ii=this.Ii.add(n)}},{key:"Ei",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ai(new Ak(e,t))}},{key:"Ri",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Pi",value:function(e){var t=this,n=new zd(new Ed([])),r=new Ak(n,e),i=new Ak(n,e+1),a=[];return this.Ii.forEachInRange([r,i],(function(e){t.Ai(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.yi.forEach((function(t){return e.Ai(t)}))}},{key:"Ai",value:function(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}},{key:"Vi",value:function(e){var t=new zd(new Ed([])),n=new Ak(t,e),r=new Ak(t,e+1),i=om();return this.Ii.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Ak(e,0),n=this.yi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Ak=function(){function e(t,n){a(this,e),this.key=t,this.vi=n}return u(e,null,[{key:"pi",value:function(e,t){return zd.comparator(e.key,t.key)||yd(e.vi,t.vi)}},{key:"Ti",value:function(e,t){return yd(e.vi,t.vi)||zd.comparator(e.key,t.key)}}]),e}(),Dk=function(){function e(t,n){a(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.Si=1,this.Di=new Jv(Ak.pi)}return u(e,[{key:"checkEmpty",value:function(e){return Ty.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new My(i,t,n,r);this.Bs.push(a);var o,u=l(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Di=this.Di.add(new Ak(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Ty.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Ty.resolve(this.Ci(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.xi(n),i=r<0?0:r;return Ty.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Ty.resolve(0===this.Bs.length?-1:this.Si-1)}},{key:"getAllMutationBatches",value:function(e){return Ty.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Ak(t,0),i=new Ak(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],(function(e){var t=n.Ci(e.vi);a.push(t)})),Ty.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Jv(yd);return t.forEach((function(e){var t=new Ak(e,0),i=new Ak(e,Number.POSITIVE_INFINITY);n.Di.forEachInRange([t,i],(function(e){r=r.add(e.vi)}))})),Ty.resolve(this.Ni(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;zd.isDocumentKey(i)||(i=i.child(""));var a=new Ak(new zd(i),0),o=new Jv(yd);return this.Di.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.vi)),!0)}),a),Ty.resolve(this.Ni(o))}},{key:"Ni",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ci(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;td(0===this.ki(t.batchId,"removed")),this.Bs.shift();var r=this.Di;return Ty.forEach(t.mutations,(function(i){var a=new Ak(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Di=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Ak(t,0),r=this.Di.firstAfterOrEqual(n);return Ty.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,Ty.resolve()}},{key:"ki",value:function(e,t){return this.xi(e)}},{key:"xi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"Ci",value:function(e){var t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Pk=function(){function e(t){a(this,e),this.Mi=t,this.docs=new Hv(zd.comparator),this.size=0}return u(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mi(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Ty.resolve(n?n.document.mutableCopy():dp.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=em();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():dp.newInvalidDocument(e))})),Ty.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=em(),i=new zd(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||xp(wp(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Ty.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ed()}},{key:"Oi",value:function(e,t){return Ty.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Rk(this)}},{key:"getSize",value:function(e){return Ty.resolve(this.size)}}]),e}(),Rk=function(e){m(n,e);var t=b(n);function n(e){var r;return a(this,n),(r=t.call(this)).Kn=e,r}return u(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),Ty.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(zg),Ok=function(){function e(t){a(this,e),this.persistence=t,this.Fi=new Gv((function(e){return Ip(e)}),Ep),this.lastRemoteSnapshotVersion=bd.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Nk,this.targetCount=0,this.Li=Ag.gn()}return u(e,[{key:"forEachTarget",value:function(e,t){return this.Fi.forEach((function(e,n){return t(n)})),Ty.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Ty.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Ty.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Li.next(),Ty.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),Ty.resolve()}},{key:"Tn",value:function(e){this.Fi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Li=new Ag(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Ty.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Ty.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,Ty.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Fi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Ty.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Ty.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fi.get(t)||null;return Ty.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Bi.Ei(t,n),Ty.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Bi.Ri(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Ty.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Bi.Pi(t),Ty.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Bi.Vi(t);return Ty.resolve(n)}},{key:"containsKey",value:function(e,t){return Ty.resolve(this.Bi.containsKey(t))}}]),e}(),Lk=function(){function e(t,n){var r=this;a(this,e),this.Ui={},this.overlays={},this.es=new pd(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Ok(this),this.indexManager=new dg,this.ds=new Pk((function(e){return r.referenceDelegate.qi(e)})),this.M=new jy(n),this._s=new Sk(this.M)}return u(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Ck,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ui[e.toKey()];return n||(n=new Dk(t,this.referenceDelegate),this.Ui[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Jh("MemoryPersistence","Starting transaction:",e);var i=new Mk(this.es.next());return this.referenceDelegate.Ki(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Qi",value:function(e,t){return Ty.or(Object.values(this.Ui).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Mk=function(e){m(n,e);var t=b(n);function n(e){var r;return a(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return u(n)}(_y),Fk=function(){function e(t){a(this,e),this.persistence=t,this.ji=new Nk,this.Wi=null}return u(e,[{key:"Hi",get:function(){if(this.Wi)return this.Wi;throw ed()}},{key:"addReference",value:function(e,t,n){return this.ji.addReference(n,t),this.Hi.delete(n.toString()),Ty.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ji.removeReference(n,t),this.Hi.add(n.toString()),Ty.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hi.add(t.toString()),Ty.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ji.Pi(t.targetId).forEach((function(e){return n.Hi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Hi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ki",value:function(){this.Wi=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ty.forEach(this.Hi,(function(r){var i=zd.fromPath(r);return t.Ji(e,i).next((function(e){e||n.removeEntry(i,bd.min())}))})).next((function(){return t.Wi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ji(e,t).next((function(e){e?n.Hi.delete(t.toString()):n.Hi.add(t.toString())}))}},{key:"qi",value:function(e){return 0}},{key:"Ji",value:function(e,t){var n=this;return Ty.or([function(){return Ty.resolve(n.ji.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Qi(e,t)}])}}],[{key:"zi",value:function(t){return new e(t)}}]),e}();function Uk(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Vk(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function jk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Bk=function(){function e(t,n,r,i){a(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return u(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new id(a.error.code,a.error.message))),o?new e(t,n,a.state,i):($h("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),qk=function(){function e(t,n,r){a(this,e),this.targetId=t,this.state=n,this.error=r}return u(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new id(i.error.code,i.error.message))),a?new e(t,i.state,r):($h("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),zk=function(){function e(t,n){a(this,e),this.clientId=t,this.activeTargetIds=n}return u(e,null,[{key:"Yi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=sm(),o=0;i&&o<r.activeTargetIds.length;++o)i=qd(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):($h("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Kk=function(){function e(t,n){a(this,e),this.clientId=t,this.onlineState=n}return u(e,null,[{key:"Yi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):($h("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Wk=function(){function e(){a(this,e),this.activeTargetIds=sm()}return u(e,[{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Gk=function(){function e(t,n,r,i,o){a(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Hv(yd),this.started=!1,this.rr=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ur=Uk(this.persistenceKey,this.er),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ir=this.ir.insert(this.er,new Wk),this.cr=new RegExp("^firestore_clients_".concat(u,"_([^_]*)$")),this.hr=new RegExp("^firestore_mutations_".concat(u,"_(\\d+)(?:_(.*))?$")),this.lr=new RegExp("^firestore_targets_".concat(u,"_(\\d+)$")),this.dr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}return u(e,[{key:"start",value:function(){var e=se(I().mark((function e(){var t,n,r,i,a,o,u,s,c,f,h,d=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=l(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.er){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Uk(this.persistenceKey,i)))&&(o=zk.Yi(i,a))&&(this.ir=this.ir.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.wr(),(u=this.storage.getItem(this.dr))&&(s=this.mr(u))&&this.gr(s),c=l(this.rr);try{for(c.s();!(f=c.n()).done;)h=f.value,this.sr(h)}catch(p){c.e(p)}finally{c.f()}this.rr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.yr(this.ir)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ir.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.pr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.pr(e,t,n),this.Ir(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(jk(this.persistenceKey,e));if(n){var r=qk.Yi(e,n);r&&(t=r.state)}}return this.Tr.Zi(e),this.wr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Tr.tr(e),this.wr()}},{key:"isLocalQueryTarget",value:function(e){return this.Tr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(jk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Er(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ir(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ar(e)}},{key:"notifyBundleLoaded",value:function(e){this.Rr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Jh("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Jh("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Jh("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"sr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Jh("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ur)return void $h("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(se(I().mark((function e(){var r,i,a,o,u,s,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Pr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.hr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Sr(a));case 16:e.next=41;break;case 18:if(!t.lr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Dr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Cr(o));case 23:e.next=41;break;case 25:if(n.key!==t.dr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.mr(n.newValue))){e.next=30;break}return e.abrupt("return",t.gr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=pd.A;if(null!=e)try{var n=JSON.parse(e);td("number"==typeof n),t=n}catch(e){$h("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==pd.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.Nr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.kr(e)})));case 41:e.next=44;break;case 43:t.rr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Tr",get:function(){return this.ir.get(this.er)}},{key:"wr",value:function(){this.setItem(this.ur,this.Tr.Xi())}},{key:"pr",value:function(e,t,n){var r=new Bk(this.currentUser,e,t,n),i=Vk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Ir",value:function(e){var t=Vk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ar",value:function(e){var t={clientId:this.er,onlineState:e};this.storage.setItem(this.dr,JSON.stringify(t))}},{key:"Er",value:function(e,t,n){var r=jk(this.persistenceKey,e),i=new qk(e,t,n);this.setItem(r,i.Xi())}},{key:"Rr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"Pr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.Pr(e);return zk.Yi(n,t)}},{key:"vr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Bk.Yi(new Gh(i),r,t)}},{key:"Dr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]);return qk.Yi(r,t)}},{key:"mr",value:function(e){return Kk.Yi(e)}},{key:"Nr",value:function(e){return JSON.parse(e)}},{key:"Sr",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Mr(t.batchId,t.state,t.error));case 2:Jh("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Cr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.ir=r}))}},{key:"gr",value:function(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"yr",value:function(e){var t=sm();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Hk=function(){function e(){a(this,e),this.$r=new Wk,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return u(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.$r.Zi(e),this.Br[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Br[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.$r.tr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Br[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.$r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"start",value:function(){return this.$r=new Wk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Qk=function(){function e(){a(this,e)}return u(e,[{key:"Lr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Yk=function(){function e(){var t=this;a(this,e),this.Ur=function(){return t.qr()},this.Kr=function(){return t.Gr()},this.Qr=[],this.jr()}return u(e,[{key:"Lr",value:function(e){this.Qr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}},{key:"qr",value:function(){Jh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=l(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){Jh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=l(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Jk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},$k=function(){function e(t){a(this,e),this.Wr=t.Wr,this.zr=t.zr}return u(e,[{key:"Hr",value:function(e){this.Jr=e}},{key:"Yr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.Zr=e}},{key:"close",value:function(){this.zr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"eo",value:function(){this.Jr()}},{key:"no",value:function(e){this.Xr(e)}},{key:"so",value:function(e){this.Zr(e)}}]),e}(),Xk=function(e){m(n,e);var t=b(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return u(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Kh;o.listenOnce(Vh.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Uh.NO_ERROR:var t=o.getResponseJson();Jh("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Uh.TIMEOUT:Jh("Connection",'RPC "'+e+'" timed out'),a(new id(rd.DEADLINE_EXCEEDED,"Request time out"));break;case Uh.HTTP_ERROR:var n=o.getStatus();if(Jh("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(rd).indexOf(t)>=0?t:rd.UNKNOWN}(r.status);a(new id(u,r.message))}else a(new id(rd.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new id(rd.UNAVAILABLE,"Connection failed."));break;default:ed()}}finally{Jh("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"lo",value:function(e,t,n){var r=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Mh(),a=Fh(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new qh({})),this.ao(o.initMessageHeaders,t,n),O()||F()||R().indexOf("Electron/")>=0||U()||R().indexOf("MSAppHost/")>=0||M()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Jh("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new $k({Wr:function(e){l?Jh("Connection","Not sending because WebChannel is closed:",e):(c||(Jh("Connection","Opening WebChannel transport."),s.open(),c=!0),Jh("Connection","WebChannel sending:",e),s.send(e))},zr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,zh.EventType.OPEN,(function(){l||Jh("Connection","WebChannel transport opened.")})),h(s,zh.EventType.CLOSE,(function(){l||(l=!0,Jh("Connection","WebChannel transport closed"),f.no())})),h(s,zh.EventType.ERROR,(function(e){l||(l=!0,Xh("Connection","WebChannel transport errored:",e),f.no(new id(rd.UNAVAILABLE,"The operation could not be completed")))})),h(s,zh.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];td(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Jh("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Vv[e];if(void 0!==t)return Wv(t)}(a),u=i.message;void 0===o&&(o=rd.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.no(new id(o,u)),s.close()}else Jh("Connection","WebChannel received:",n),f.so(n)}})),h(a,jh.STAT_EVENT,(function(e){e.stat===Bh.PROXY?Jh("Connection","Detected buffering proxy"):e.stat===Bh.NOPROXY&&Jh("Connection","Detected no buffering proxy")})),setTimeout((function(){f.eo()}),0),f}}]),n}(function(){function e(t){a(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.io=n+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return u(e,[{key:"oo",value:function(e,t,n,r,i){var a=this.uo(e,t);Jh("RestConnection","Sending: ",a,n);var o={};return this.ao(o,r,i),this.co(e,a,o,n).then((function(e){return Jh("RestConnection","Received: ",e),e}),(function(t){throw Xh("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ho",value:function(e,t,n,r,i){return this.oo(e,t,n,r,i)}},{key:"ao",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"uo",value:function(e,t){var n=Jk[e];return"".concat(this.io,"/v1/").concat(t,":").concat(n)}}]),e}());function Zk(){return"undefined"!=typeof window?window:null}function ew(){return"undefined"!=typeof document?document:null}function tw(e){return new wm(e,!0)}var nw=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;a(this,e),this.Yn=t,this.timerId=n,this.fo=r,this._o=i,this.wo=o,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}return u(e,[{key:"reset",value:function(){this.mo=0}},{key:"Io",value:function(){this.mo=this.wo}},{key:"To",value:function(e){var t=this;this.cancel();var n=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,n-r);i>0&&Jh("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.mo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.po=Date.now(),e()})),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}},{key:"Ao",value:function(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}},{key:"cancel",value:function(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}},{key:"Eo",value:function(){return(Math.random()-.5)*this.mo}}]),e}(),rw=function(){function e(t,n,r,i,o,u,s,c){a(this,e),this.Yn=t,this.Ro=r,this.Po=i,this.bo=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=s,this.listener=c,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new nw(t,n)}return u(e,[{key:"Co",value:function(){return 1===this.state||5===this.state||this.xo()}},{key:"xo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.No()}},{key:"stop",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Co(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ko",value:function(){this.state=0,this.Do.reset()}},{key:"Mo",value:function(){var e=this;this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,(function(){return e.Oo()})))}},{key:"Fo",value:function(e){this.$o(),this.stream.send(e)}},{key:"Oo",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.xo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"close",value:function(){var e=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,4!==t?this.Do.reset():n&&n.code===rd.RESOURCE_EXHAUSTED?($h(n.toString()),$h("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):n&&n.code===rd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Lo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Yr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=d(t,2),i=r[0],a=r[1];e.Vo===n&&e.qo(i,a)}),(function(n){t((function(){var t=new id(rd.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ko(t)}))}))}},{key:"qo",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr((function(){r((function(){return n.state=2,n.So=n.Yn.enqueueAfterDelay(n.Po,1e4,(function(){return n.xo()&&(n.state=3),Promise.resolve()})),n.listener.Hr()}))})),this.stream.Yr((function(e){r((function(){return n.Ko(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"No",value:function(){var e=this;this.state=5,this.Do.To(se(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ko",value:function(e){return Jh("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Vo===e?n():(Jh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),iw=function(e){m(n,e);var t=b(n);function n(e,r,i,o,u,s){var c;return a(this,n),(c=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,o,s)).M=u,c}return u(n,[{key:"Go",value:function(e,t){return this.bo.lo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Do.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ed()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(td(void 0===t||"string"==typeof t),Ad.fromBase64String(t||"")):(td(void 0===t||t instanceof Uint8Array),Ad.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?rd.UNKNOWN:Wv(e.code);return new id(t,e.message||"")}(o);n=new dm(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Cm(e,s.document.name),l=Tm(s.document.updateTime),f=new fp({mapValue:{fields:s.document.fields}}),h=dp.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new fm(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Cm(e,v.document),y=v.readTime?Tm(v.readTime):bd.min(),g=dp.newNoDocument(m,y),k=v.removedTargetIds||[];n=new fm([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Cm(e,w.document),x=w.removedTargetIds||[];n=new fm([],x,b,null)}else{if(!("filter"in t))return ed();t.filter;var _=t.filter;_.targetId;var T=_.count||0,I=new zv(T),E=_.targetId;n=new hm(E,I)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return bd.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?bd.min():t.readTime?Tm(t.readTime):bd.min()}(e);return this.listener.Qo(t,n)}},{key:"jo",value:function(e){var t={};t.database=Dm(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Sp(r)?{documents:Um(e,r)}:{query:Vm(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=xm(e,t.resumeToken):t.snapshotVersion.compareTo(bd.min())>0&&(n.readTime=bm(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ed()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=Dm(this.M),t.removeTarget=e,this.Fo(t)}}]),n}(rw),aw=function(e){m(n,e);var t=b(n);function n(e,r,i,o,u,s){var c;return a(this,n),(c=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,o,s)).M=u,c.zo=!1,c}return u(n,[{key:"Ho",get:function(){return this.zo}},{key:"start",value:function(){this.zo=!1,this.lastStreamToken=void 0,gt(y(n.prototype),"start",this).call(this)}},{key:"Lo",value:function(){this.zo&&this.Jo([])}},{key:"Go",value:function(e,t){return this.bo.lo("Write",e,t)}},{key:"onMessage",value:function(e){if(td(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();var t=function(e,t){return e&&e.length>0?(td(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Tm(e.updateTime):Tm(t);return n.isEqual(bd.min())&&(n=Tm(t)),new Iv(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Tm(e.commitTime);return this.listener.Yo(n,t)}return td(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}},{key:"Zo",value:function(){var e={};e.database=Dm(this.M),this.Fo(e)}},{key:"Jo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Mm(t.M,e)}))};this.Fo(n)}}]),n}(rw),ow=function(e){m(n,e);var t=b(n);function n(e,r,i,o){var u;return a(this,n),(u=t.call(this)).authCredentials=e,u.appCheckCredentials=r,u.bo=i,u.M=o,u.tu=!1,u}return u(n,[{key:"eu",value:function(){if(this.tu)throw new id(rd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"oo",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=d(i,2),o=a[0],u=a[1];return r.bo.oo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===rd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new id(rd.UNKNOWN,e.toString())}))}},{key:"ho",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=d(i,2),o=a[0],u=a[1];return r.bo.ho(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===rd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new id(rd.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.tu=!0}}]),n}(function(){return u((function e(){a(this,e)}))}()),uw=function(){function e(t,n){a(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}return u(e,[{key:"ru",value:function(){var e=this;0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.su=null,e.uu("Backend didn't respond within 10 seconds."),e.ou("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ou("Offline")))}},{key:"set",value:function(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}},{key:"ou",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"uu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.iu?($h(t),this.iu=!1):Jh("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.su&&(this.su.cancel(),this.su=null)}}]),e}(),sw=u((function e(t,n,r,i,o){var u=this;a(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=o,this._u.Lr((function(e){r.enqueueAndForget(se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=kw(u),!e.t0){e.next=5;break}return Jh("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=nd(t)).fu.add(4),e.next=4,fw(n);case 4:return n.wu.set("Unknown"),n.fu.delete(4),e.next=8,cw(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.wu=new uw(r,i)}));function cw(e){return lw.apply(this,arguments)}function lw(){return lw=se(I().mark((function e(t){var n,r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!kw(t)){e.next=18;break}n=l(t.du),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),lw.apply(this,arguments)}function fw(e){return hw.apply(this,arguments)}function hw(){return hw=se(I().mark((function e(t){var n,r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l(t.du),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),hw.apply(this,arguments)}function dw(e,t){var n=nd(e);n.lu.has(t.targetId)||(n.lu.set(t.targetId,t),gw(n)?yw(n):Qw(n).xo()&&vw(n,t))}function pw(e,t){var n=nd(e),r=Qw(n);n.lu.delete(t),r.xo()&&mw(n,t),0===n.lu.size&&(r.xo()?r.Mo():kw(n)&&n.wu.set("Unknown"))}function vw(e,t){e.mu.Z(t.targetId),Qw(e).jo(t)}function mw(e,t){e.mu.Z(t),Qw(e).Wo(t)}function yw(e){e.mu=new vm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.lu.get(t)||null}}),Qw(e).start(),e.wu.ru()}function gw(e){return kw(e)&&!Qw(e).Co()&&e.lu.size>0}function kw(e){return 0===nd(e).fu.size}function ww(e){e.mu=void 0}function bw(e){return xw.apply(this,arguments)}function xw(){return xw=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.lu.forEach((function(e,n){vw(t,e)}));case 1:case"end":return e.stop()}}),e)}))),xw.apply(this,arguments)}function _w(e,t){return Tw.apply(this,arguments)}function Tw(){return Tw=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ww(t),gw(t)?(t.wu.au(n),yw(t)):t.wu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Tw.apply(this,arguments)}function Iw(e,t,n){return Ew.apply(this,arguments)}function Ew(){return Ew=se(I().mark((function e(t,n,r){var i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wu.set("Online"),!(n instanceof dm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=se(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=l(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.lu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.lu.delete(o),t.mu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Jh("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Sw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof fm?t.mu.ut(n):n instanceof hm?t.mu._t(n):t.mu.ht(n),r.isEqual(bd.min())){e.next=29;break}return e.prev=14,e.next=17,hk(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.mu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.lu.get(r);i&&e.lu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.lu.get(t);if(n){e.lu.set(t,n.withResumeToken(Ad.EMPTY_BYTE_STRING,n.snapshotVersion)),mw(e,t);var r=new Vy(n.target,t,1,n.sequenceNumber);vw(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Jh("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Sw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Ew.apply(this,arguments)}function Sw(e,t,n){return Cw.apply(this,arguments)}function Cw(){return Cw=se(I().mark((function e(t,n,r){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ny(n)){e.next=2;break}throw n;case 2:return t.fu.add(1),e.next=5,fw(t);case 5:t.wu.set("Offline"),r||(r=function(){return hk(t.localStore)}),t.asyncQueue.enqueueRetryable(se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jh("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.fu.delete(1),e.next=6,cw(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Nw(e,t){return t().catch((function(n){return Sw(e,n,t)}))}function Aw(e){return Dw.apply(this,arguments)}function Dw(){return Dw=se(I().mark((function e(t){var n,r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nd(t),r=Yw(n),i=n.hu.length>0?n.hu[n.hu.length-1].batchId:-1;case 2:if(!Pw(n)){e.next=19;break}return e.prev=3,e.next=6,vk(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.hu.length&&r.Mo(),e.abrupt("break",19);case 10:i=a.batchId,Rw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Sw(n,e.t0);case 17:e.next=2;break;case 19:Ow(n)&&Lw(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Dw.apply(this,arguments)}function Pw(e){return kw(e)&&e.hu.length<10}function Rw(e,t){e.hu.push(t);var n=Yw(e);n.xo()&&n.Ho&&n.Jo(t.mutations)}function Ow(e){return kw(e)&&!Yw(e).Co()&&e.hu.length>0}function Lw(e){Yw(e).start()}function Mw(e){return Fw.apply(this,arguments)}function Fw(){return Fw=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Yw(t).Zo();case 1:case"end":return e.stop()}}),e)}))),Fw.apply(this,arguments)}function Uw(e){return Vw.apply(this,arguments)}function Vw(){return Vw=se(I().mark((function e(t){var n,r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Yw(t),r=l(t.hu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Jo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Vw.apply(this,arguments)}function jw(e,t,n){return Bw.apply(this,arguments)}function Bw(){return Bw=se(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.hu.shift(),a=Fy.from(i,n,r),e.next=3,Nw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Aw(t);case 5:case"end":return e.stop()}}),e)}))),Bw.apply(this,arguments)}function qw(e,t){return zw.apply(this,arguments)}function zw(){return zw=se(I().mark((function e(t,n){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Yw(t).Ho,!e.t0){e.next=4;break}return e.next=4,function(){var e=se(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Kv(i=n.code)||i===rd.ABORTED){e.next=7;break}return r=t.hu.shift(),Yw(t).ko(),e.next=5,Nw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Aw(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Ow(t)&&Lw(t);case 5:case"end":return e.stop()}}),e)}))),zw.apply(this,arguments)}function Kw(e,t){return Ww.apply(this,arguments)}function Ww(){return Ww=se(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=nd(t)).asyncQueue.verifyOperationInProgress(),Jh("RemoteStore","RemoteStore received new credentials"),i=kw(r),r.fu.add(3),e.next=6,fw(r);case 6:return i&&r.wu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.fu.delete(3),e.next=12,cw(r);case 12:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}function Gw(e,t){return Hw.apply(this,arguments)}function Hw(){return Hw=se(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nd(t),!n){e.next=7;break}return r.fu.delete(2),e.next=5,cw(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.fu.add(2),e.next=12,fw(r);case 12:r.wu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Hw.apply(this,arguments)}function Qw(e){return e.gu||(e.gu=function(e,t,n){var r=nd(e);return r.eu(),new iw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:bw.bind(null,e),Yr:_w.bind(null,e),Qo:Iw.bind(null,e)}),e.du.push(function(){var t=se(I().mark((function t(n){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.gu.ko(),gw(e)?yw(e):e.wu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.gu.stop();case 6:ww(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}function Yw(e){return e.yu||(e.yu=function(e,t,n){var r=nd(e);return r.eu(),new aw(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:Mw.bind(null,e),Yr:qw.bind(null,e),Xo:Uw.bind(null,e),Yo:jw.bind(null,e)}),e.du.push(function(){var t=se(I().mark((function t(n){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.yu.ko(),t.next=4,Aw(e);case 4:t.next=9;break;case 6:return t.next=8,e.yu.stop();case 8:e.hu.length>0&&(Jh("RemoteStore","Stopping write stream with ".concat(e.hu.length," pending writes")),e.hu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}var Jw=function(){function e(t,n,r,i,o){a(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ad,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return u(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new id(rd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function $w(e,t){if($h("AsyncQueue","".concat(t,": ").concat(e)),Ny(e))return new id(rd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Xw=function(){function e(t){a(this,e),this.comparator=t?function(e,n){return t(e,n)||zd.comparator(e.key,n.key)}:function(e,t){return zd.comparator(e.key,t.key)},this.keyedMap=nm(),this.sortedSet=new Hv(this.comparator)}return u(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Zw=function(){function e(){a(this,e),this.pu=new Hv(zd.comparator)}return u(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.pu.get(t);n?0!==e.type&&3===n.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==n.type?this.pu=this.pu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pu=this.pu.remove(t):1===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):ed():this.pu=this.pu.insert(t,e)}},{key:"Iu",value:function(){var e=[];return this.pu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),eb=function(){function e(t,n,r,i,o,u,s,c){a(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=s,this.excludesMetadataChanges=c}return u(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Xw.emptySet(n),a,r,i,!0,!1)}}]),e}(),tb=u((function e(){a(this,e),this.Tu=void 0,this.listeners=[]})),nb=u((function e(){a(this,e),this.queries=new Gv((function(e){return rv(e)}),nv),this.onlineState="Unknown",this.Eu=new Set}));function rb(e,t){return ib.apply(this,arguments)}function ib(){return ib=se(I().mark((function e(t,n){var r,i,a,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new tb),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Tu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=$w(e.t0,"Initialization of query '".concat(iv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Au(r.onlineState),o.Tu&&n.Ru(o.Tu)&&cb(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),ib.apply(this,arguments)}function ab(e,t){return ob.apply(this,arguments)}function ob(){return ob=se(I().mark((function e(t,n){var r,i,a,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),ob.apply(this,arguments)}function ub(e,t){var n,r=nd(e),i=!1,a=l(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,f=l(s.listeners);try{for(f.s();!(c=f.n()).done;){c.value.Ru(o)&&(i=!0)}}catch(h){f.e(h)}finally{f.f()}s.Tu=o}}}catch(h){a.e(h)}finally{a.f()}i&&cb(r)}function sb(e,t,n){var r=nd(e),i=r.queries.get(t);if(i){var a,o=l(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function cb(e){e.Eu.forEach((function(e){e.next()}))}var lb=function(){function e(t,n,r){a(this,e),this.query=t,this.Pu=n,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return u(e,[{key:"Ru",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=l(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new eb(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),a=!0):this.Su(e,this.onlineState)&&(this.Du(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.Pu.error(e)}},{key:"Au",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}},{key:"Su",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Cu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Du",value:function(e){e=eb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}]),e}(),fb=function(){function e(t,n){a(this,e),this.payload=t,this.byteLength=n}return u(e,[{key:"xu",value:function(){return"metadata"in this.payload}}]),e}(),hb=function(){function e(t){a(this,e),this.M=t}return u(e,[{key:"fi",value:function(e){return Cm(this.M,e)}},{key:"di",value:function(e){return e.metadata.exists?Om(this.M,e.document,!1):dp.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}},{key:"_i",value:function(e){return Tm(e)}}]),e}(),db=function(){function e(t,n,r){a(this,e),this.Nu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pb(t)}return u(e,[{key:"ku",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Ed.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new hb(this.M),i=l(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.fi(a.metadata.name),s=l(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,f=(n.get(c)||om()).add(u);n.set(c,f)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=se(I().mark((function e(){var t,n,r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_k(this.localStore,new hb(this.M),this.documents,this.Nu.id);case 2:t=e.sent,n=this.Mu(this.documents),r=l(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Ik(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Fu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function pb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var vb=u((function e(t){a(this,e),this.key=t})),mb=u((function e(t){a(this,e),this.key=t})),yb=function(){function e(t,n){a(this,e),this.query=t,this.$u=n,this.Bu=null,this.current=!1,this.Lu=om(),this.mutatedKeys=om(),this.Uu=uv(t),this.qu=new Xw(this.Uu)}return u(e,[{key:"Ku",get:function(){return this.$u}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Qu:new Zw,i=t?t.qu:this.qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Qp(this.query)&&i.size===this.query.limit?i.last():null,c=Yp(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=av(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.ju(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Uu(f,s)>0||c&&n.Uu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Qp(this.query)||Yp(this.query))for(;o.size>this.query.limit;){var l=Qp(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{qu:o,Qu:r,ni:u,mutatedKeys:a}}},{key:"ju",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;var a=e.Qu.Iu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ed()}};return n(e)-n(t)}(e.type,t.type)||r.Uu(e.doc,t.doc)})),this.Wu(n);var o=t?this.zu():[],u=0===this.Lu.size&&this.current?1:0,s=u!==this.Bu;return this.Bu=u,0!==a.length||s?{snapshot:new eb(this.query,e.qu,i,a,e.mutatedKeys,0===u,s,!1),Hu:o}:{Hu:o}}},{key:"Au",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new Zw,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}},{key:"Ju",value:function(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}},{key:"Wu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.$u=t.$u.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.$u=t.$u.delete(e)})),this.current=e.current)}},{key:"zu",value:function(){var e=this;if(!this.current)return[];var t=this.Lu;this.Lu=om(),this.qu.forEach((function(t){e.Ju(t.key)&&(e.Lu=e.Lu.add(t.key))}));var n=[];return t.forEach((function(t){e.Lu.has(t)||n.push(new mb(t))})),this.Lu.forEach((function(e){t.has(e)||n.push(new vb(e))})),n}},{key:"Yu",value:function(e){this.$u=e.li,this.Lu=om();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Xu",value:function(){return eb.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}]),e}(),gb=u((function e(t,n,r){a(this,e),this.query=t,this.targetId=n,this.view=r})),kb=u((function e(t){a(this,e),this.key=t,this.Zu=!1})),wb=function(){function e(t,n,r,i,o,u){a(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.ta={},this.ea=new Gv((function(e){return rv(e)}),nv),this.na=new Map,this.sa=new Set,this.ia=new Hv(zd.comparator),this.ra=new Map,this.oa=new Nk,this.ua={},this.aa=new Map,this.ca=Ag.yn(),this.onlineState="Unknown",this.ha=void 0}return u(e,[{key:"isPrimaryClient",get:function(){return!0===this.ha}}]),e}();function bb(e,t){return xb.apply(this,arguments)}function xb(){return xb=se(I().mark((function e(t,n){var r,i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=px(t),!(o=r.ea.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Xu(),e.next=15;break;case 6:return e.next=8,mk(r.localStore,ev(n));case 8:return u=e.sent,r.isPrimaryClient&&dw(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,_b(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),xb.apply(this,arguments)}function _b(e,t,n,r){return Tb.apply(this,arguments)}function Tb(){return Tb=se(I().mark((function e(t,n,r,i){var a,o,u,s,c,l;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.la=function(e,n,r){return function(){var e=se(I().mark((function e(t,n,r,i){var a,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ni,!e.t0){e.next=6;break}return e.next=5,kk(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Kb(t,n.targetId,u.Hu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,kk(t.localStore,n,!0);case 3:return a=e.sent,o=new yb(n,a.li),u=o.Gu(a.documents),s=lm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Kb(t,r,c.Hu),l=new gb(n,r,o),e.abrupt("return",(t.ea.set(n,l),t.na.has(r)?t.na.get(r).push(n):t.na.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Tb.apply(this,arguments)}function Ib(e,t){return Eb.apply(this,arguments)}function Eb(){return Eb=se(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nd(t),i=r.ea.get(n),!((a=r.na.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.na.set(i.targetId,a.filter((function(e){return!nv(e,n)}))),void r.ea.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,yk(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),pw(r.remoteStore,i.targetId),qb(r,i.targetId)})).catch(Lg);case 9:e.next=14;break;case 11:return qb(r,i.targetId),e.next=14,yk(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Eb.apply(this,arguments)}function Sb(e,t,n){return Cb.apply(this,arguments)}function Cb(){return Cb=se(I().mark((function e(t,n,r){var i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vx(t),e.prev=1,e.next=4,function(e,t){var n,r=nd(e),i=wd.now(),a=t.reduce((function(e,t){return e.add(t.key)}),om());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ci.Ks(e,a).next((function(a){n=a;var o,u=[],s=l(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,f=Dv(c,n.get(c.key));null!=f&&u.push(new Lv(c.key,f,hp(f.value.mapValue),Ev.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ua[e.currentUser.toKey()];r||(r=new Hv(yd)),r=r.insert(t,n),e.ua[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Hb(i,a.changes);case 9:return e.next=11,Aw(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=$w(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Cb.apply(this,arguments)}function Nb(e,t){return Ab.apply(this,arguments)}function Ab(){return Ab=se(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),e.prev=1,e.next=4,dk(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ra.get(t);n&&(td(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Zu=!0:e.modifiedDocuments.size>0?td(n.Zu):e.removedDocuments.size>0&&(td(n.Zu),n.Zu=!1))})),e.next=8,Hb(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Lg(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Ab.apply(this,arguments)}function Db(e,t,n){var r=nd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ea.forEach((function(e,n){var r=n.view.Au(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=nd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=l(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Au(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&cb(n)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Pb(e,t,n){return Rb.apply(this,arguments)}function Rb(){return Rb=se(I().mark((function e(t,n,r){var i,a,o,u,s,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=nd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ra.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Hv(zd.comparator)).insert(o,dp.newNoDocument(o,bd.min())),s=om().add(o),c=new cm(bd.min(),new Map,new Jv(yd),u,s),e.next=9,Nb(i,c);case 9:i.ia=i.ia.remove(o),i.ra.delete(n),Gb(i),e.next=16;break;case 14:return e.next=16,yk(i.localStore,n,!1).then((function(){return qb(i,n,r)})).catch(Lg);case 16:case"end":return e.stop()}}),e)}))),Rb.apply(this,arguments)}function Ob(e,t){return Lb.apply(this,arguments)}function Lb(){return Lb=se(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),i=n.batch.batchId,e.prev=1,e.next=4,fk(r.localStore,n);case 4:return a=e.sent,Bb(r,i,null),jb(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Hb(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Lg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Lb.apply(this,arguments)}function Mb(e,t,n){return Fb.apply(this,arguments)}function Fb(){return Fb=se(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nd(t),e.prev=1,e.next=4,function(e,t){var n=nd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return td(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Bb(i,n,r),jb(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Hb(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Lg(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Fb.apply(this,arguments)}function Ub(e,t){return Vb.apply(this,arguments)}function Vb(){return Vb=se(I().mark((function e(t,n){var r,i,a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kw((r=nd(t)).remoteStore)||Jh("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=nd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.aa.get(i)||[]).push(n),r.aa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=$w(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Vb.apply(this,arguments)}function jb(e,t){(e.aa.get(t)||[]).forEach((function(e){e.resolve()})),e.aa.delete(t)}function Bb(e,t,n){var r=nd(e),i=r.ua[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function qb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=l(e.na.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ea.delete(a),n&&e.ta.fa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.na.delete(t),e.isPrimaryClient&&e.oa.Pi(t).forEach((function(t){e.oa.containsKey(t)||zb(e,t)}))}function zb(e,t){e.sa.delete(t.path.canonicalString());var n=e.ia.get(t);null!==n&&(pw(e.remoteStore,n),e.ia=e.ia.remove(t),e.ra.delete(n),Gb(e))}function Kb(e,t,n){var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof vb?(e.oa.addReference(a.key,t),Wb(e,a)):a instanceof mb?(Jh("SyncEngine","Document no longer in limbo: "+a.key),e.oa.removeReference(a.key,t),e.oa.containsKey(a.key)||zb(e,a.key)):ed()}}catch(o){i.e(o)}finally{i.f()}}function Wb(e,t){var n=t.key,r=n.path.canonicalString();e.ia.get(n)||e.sa.has(r)||(Jh("SyncEngine","New document in limbo: "+n),e.sa.add(r),Gb(e))}function Gb(e){for(;e.sa.size>0&&e.ia.size<e.maxConcurrentLimboResolutions;){var t=e.sa.values().next().value;e.sa.delete(t);var n=new zd(Ed.fromString(t)),r=e.ca.next();e.ra.set(r,new kb(n)),e.ia=e.ia.insert(n,r),dw(e.remoteStore,new Vy(ev(Hp(n.path)),r,2,pd.A))}}function Hb(e,t,n){return Qb.apply(this,arguments)}function Qb(){return Qb=se(I().mark((function e(t,n,r){var i,a,o,u;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=nd(t),a=[],o=[],u=[],e.t0=i.ea.isEmpty(),e.t0){e.next=9;break}return i.ea.forEach((function(e,t){u.push(i.la(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=ak.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.ta.Qo(a),e.next=9,function(){var e=se(I().mark((function e(t,n){var r,i,a,o,u,s,c,f;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Ty.forEach(n,(function(t){return Ty.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Ty.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ny(e.t0)){e.next=10;break}throw e.t0;case 10:Jh("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=l(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ii.get(u),c=s.snapshotVersion,f=s.withLastLimboFreeSnapshotVersion(c),r.ii=r.ii.insert(u,f))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Qb.apply(this,arguments)}function Yb(e,t){return Jb.apply(this,arguments)}function Jb(){return Jb=se(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=nd(t)).currentUser.isEqual(n)){e.next=11;break}return Jh("SyncEngine","User change. New user:",n.toKey()),e.next=5,ck(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.aa.forEach((function(e){e.forEach((function(e){e.reject(new id(rd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.aa.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Hb(r,i.hi);case 11:case"end":return e.stop()}}),e)}))),Jb.apply(this,arguments)}function $b(e,t){var n=nd(e),r=n.ra.get(t);if(r&&r.Zu)return om().add(r.key);var i=om(),a=n.na.get(t);if(!a)return i;var o,u=l(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ea.get(s);i=i.unionWith(c.view.Ku)}}catch(f){u.e(f)}finally{u.f()}return i}function Xb(e,t){return Zb.apply(this,arguments)}function Zb(){return Zb=se(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),e.next=3,kk(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Yu(i),e.abrupt("return",(r.isPrimaryClient&&Kb(r,n.targetId,a.Hu),a));case 6:case"end":return e.stop()}}),e)}))),Zb.apply(this,arguments)}function ex(e,t){return tx.apply(this,arguments)}function tx(){return tx=se(I().mark((function e(t,n){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),e.abrupt("return",bk(r.localStore,n).then((function(e){return Hb(r,e)})));case 2:case"end":return e.stop()}}),e)}))),tx.apply(this,arguments)}function nx(e,t,n,r){return rx.apply(this,arguments)}function rx(){return rx=se(I().mark((function e(t,n,r,i){var a,o;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=nd(t),e.next=3,function(e,t){var n=nd(e),r=nd(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.ci.Ks(e,t):Ty.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Aw(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Bb(a,n,i||null),jb(a,n),function(e,t){nd(nd(e).Bs)._n(t)}(a.localStore,n)):ed();case 11:return e.next=13,Hb(a,o);case 13:e.next=16;break;case 15:Jh("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),rx.apply(this,arguments)}function ix(e,t){return ax.apply(this,arguments)}function ax(){return ax=se(I().mark((function e(t,n){var r,i,a,o,u,s,c,f;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(px(r=nd(t)),vx(r),!0!==n||!0===r.ha){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,ox(r,i.toArray());case 5:return a=e.sent,r.ha=!0,e.next=9,Gw(r.remoteStore,!0);case 9:o=l(a);try{for(o.s();!(u=o.n()).done;)s=u.value,dw(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ha){e.next=25;break}return c=[],f=Promise.resolve(),r.na.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):f=f.then((function(){return qb(r,t),yk(r.localStore,t,!0)})),pw(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,ox(r,c);case 21:return function(e){var t=nd(e);t.ra.forEach((function(e,n){pw(t.remoteStore,n)})),t.oa.bi(),t.ra=new Map,t.ia=new Hv(zd.comparator)}(r),r.ha=!1,e.next=25,Gw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),ax.apply(this,arguments)}function ox(e,t,n){return ux.apply(this,arguments)}function ux(){return ux=se(I().mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d,p,v,m,y,g;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=nd(t),a=[],o=[],u=l(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,f=void 0,!(h=i.na.get(c))||0===h.length){e.next=34;break}return e.next=11,mk(i.localStore,ev(h[0]));case 11:f=e.sent,d=l(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,m=i.ea.get(v),e.next=20,Xb(i,m);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,wk(i.localStore,c);case 36:return g=e.sent,e.next=39,mk(i.localStore,g);case 39:return f=e.sent,e.next=42,_b(i,sx(g),c,!1);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.ta.Qo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),ux.apply(this,arguments)}function sx(e){return Gp(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function cx(e){var t=nd(e);return nd(nd(t.localStore).persistence).Fs()}function lx(e,t,n,r){return fx.apply(this,arguments)}function fx(){return fx=se(I().mark((function e(t,n,r,i){var a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=nd(t)).ha){e.next=3;break}return e.abrupt("return",void Jh("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.na.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,bk(a.localStore,ov(o[0]));case 10:return u=e.sent,s=cm.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Hb(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,yk(a.localStore,n,!0);case 17:return qb(a,n,i),e.abrupt("break",20);case 19:ed();case 20:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}function hx(e,t,n){return dx.apply(this,arguments)}function dx(){return dx=se(I().mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=px(t)).ha){e.next=45;break}a=l(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.na.has(u)){e.next=10;break}return Jh("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,wk(i.localStore,u);case 12:return s=e.sent,e.next=15,mk(i.localStore,s);case 15:return c=e.sent,e.next=18,_b(i,sx(s),c.targetId,!1);case 18:dw(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=l(r),e.prev=30,d=I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.na.has(t),!e.t0){e.next=5;break}return e.next=5,yk(i.localStore,t,!1).then((function(){pw(i.remoteStore,t),qb(i,t)})).catch(Lg);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),dx.apply(this,arguments)}function px(e){var t=nd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Nb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$b.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Pb.bind(null,t),t.ta.Qo=ub.bind(null,t.eventManager),t.ta.fa=sb.bind(null,t.eventManager),t}function vx(e){var t=nd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ob.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Mb.bind(null,t),t}function mx(e,t,n){var r=nd(e);(function(){var e=se(I().mark((function e(t,n,r){var i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=nd(e),r=Tm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(pb(i)),a=new db(i,t.localStore,n.M),e.next=15,n.da();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ku(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.da();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Hb(t,s.Fu,void 0);case 31:return e.next=33,function(e,t){var n=nd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Xh("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var yx=function(){function e(){a(this,e),this.synchronizeTabs=!1}return u(e,[{key:"initialize",value:function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=tw(t.databaseInfo.databaseId),this.sharedClientState=this._a(t),this.persistence=this.wa(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.ma(t),this.localStore=this.ga(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return null}},{key:"ga",value:function(e){return sk(this.persistence,new ok,e.initialUser,this.M)}},{key:"wa",value:function(e){return new Lk(Fk.zi,this.M)}},{key:"_a",value:function(e){return new Hk}},{key:"terminate",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),gx=function(e){m(n,e);var t=b(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).ya=e,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return u(n,[{key:"initialize",value:function(){var e=se(I().mark((function e(t){var r=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(y(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ya.initialize(this,t);case 4:return e.next=6,vx(this.ya.syncEngine);case 6:return e.next=8,Aw(this.ya.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){return sk(this.persistence,new ok,e.initialUser,this.M)}},{key:"ma",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Vg(t,e.asyncQueue)}},{key:"wa",value:function(e){var t=rk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?xg.withCacheSize(this.cacheSizeBytes):xg.DEFAULT;return new ek(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Zk(),ew(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"_a",value:function(e){return new Hk}}]),n}(yx),kx=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,r,!1)).ya=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return u(n,[{key:"initialize",value:function(){var e=se(I().mark((function e(t){var r,i=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(y(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ya.syncEngine,e.t0=this.sharedClientState instanceof Gk,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Mr:nx.bind(null,r),Or:lx.bind(null,r),Fr:hx.bind(null,r),Fs:cx.bind(null,r),kr:ex.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ix(i.ya.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_a",value:function(e){var t=Zk();if(!Gk.vt(t))throw new id(rd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=rk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gk(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(gx),wx=function(){function e(){a(this,e)}return u(e,[{key:"initialize",value:function(){var e=se(I().mark((function e(t,n){var r=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Db(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Yb.bind(null,this.syncEngine),e.next=12,Gw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new nb}},{key:"createDatastore",value:function(e){var t,n=tw(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Xk(t));return function(e,t,n,r){return new ow(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Db(o.syncEngine,e,0)},a=Yk.vt()?new Yk:new Qk,new sw(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new wb(e,t,n,r,i,a);return o&&(u.ha=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nd(t),Jh("RemoteStore","RemoteStore shutting down."),n.fu.add(5),e.next=5,fw(n);case 5:n._u.shutdown(),n.wu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function bx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return se(I().mark((function r(){var i;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var xx=function(){function e(t){a(this,e),this.observer=t,this.muted=!1}return u(e,[{key:"next",value:function(e){this.observer.next&&this.pa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Ia",value:function(){this.muted=!0}},{key:"pa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),_x=function(){function e(t,n){var r=this;a(this,e),this.Ta=t,this.M=n,this.metadata=new ad,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then((function(e){e&&e.xu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return u(e,[{key:"close",value:function(){return this.Ta.cancel()}},{key:"getMetadata",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"da",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Aa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Aa",value:function(){var e=se(I().mark((function e(){var t,n,r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ea.decode(t),r=Number(n),isNaN(r)&&this.Pa("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new fb(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Va",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ra",value:function(){var e=se(I().mark((function e(){var t,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Va()<0)){e.next=7;break}return e.next=3,this.va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Va())<0&&this.Pa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ea.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pa",value:function(e){throw this.Ta.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"va",value:function(){var e=se(I().mark((function e(){var t,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ta.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Tx=function(){function e(t){a(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return u(e,[{key:"lookup",value:function(){var e=se(I().mark((function e(t){var n,r=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new id(rd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=se(I().mark((function e(t,n){var r,i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),i=Dm(r.M)+"/documents",a={documents:n.map((function(e){return Sm(r.M,e)}))},e.next=5,r.ho("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Lm(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());td(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Bv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=se(I().mark((function e(){var t,n=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=zd.fromPath(t);n.mutations.push(new qv(r,n.precondition(r)))})),e.next=7,function(){var e=se(I().mark((function e(t,n){var r,i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nd(t),i=Dm(r.M)+"/documents",a={writes:n.map((function(e){return Mm(r.M,e)}))},e.next=3,r.oo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ed();t=bd.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new id(rd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ev.updateTime(t):Ev.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bd.min()))throw new id(rd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ev.updateTime(t)}return Ev.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Ix=function(){function e(t,n,r,i){a(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new nw(this.asyncQueue,"transaction_retry")}return u(e,[{key:"run",value:function(){this.Sa-=1,this.Da()}},{key:"Da",value:function(){var e=this;this.Do.To(se(I().mark((function t(){var n,r;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Tx(e.datastore),(r=e.Ca(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.xa(t)}))}))})).catch((function(t){e.xa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ca",value:function(e){try{var t=this.updateFunction(e);return!jd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"xa",value:function(e){var t=this;this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Da(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Na",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Kv(t)}return!1}}]),e}(),Ex=function(){function e(t,n,r,i){var o=this;a(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Gh.UNAUTHENTICATED,this.clientId=md.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jh("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Jh("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return u(e,[{key:"getConfiguration",value:function(){var e=se(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new id(rd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ad;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(se(I().mark((function n(){var r;return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=$w(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Sx(e,t){return Cx.apply(this,arguments)}function Cx(){return Cx=se(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Jh("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,ck(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Cx.apply(this,arguments)}function Nx(e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=se(I().mark((function e(t,n){var r,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Dx(t);case 3:return r=e.sent,Jh("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Kw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Kw(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Dx(e){return Px.apply(this,arguments)}function Px(){return Px=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Jh("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Sx(t,new yx);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Px.apply(this,arguments)}function Rx(e){return Ox.apply(this,arguments)}function Ox(){return Ox=se(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Jh("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Nx(t,new wx);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Ox.apply(this,arguments)}function Lx(e){return Dx(e).then((function(e){return e.persistence}))}function Mx(e){return Dx(e).then((function(e){return e.localStore}))}function Fx(e){return Rx(e).then((function(e){return e.remoteStore}))}function Ux(e){return Rx(e).then((function(e){return e.syncEngine}))}function Vx(e){return jx.apply(this,arguments)}function jx(){return jx=se(I().mark((function e(t){var n,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rx(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=bb.bind(null,n.syncEngine),r.onUnlisten=Ib.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}function Bx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ad;return e.asyncQueue.enqueueAndForget(se(I().mark((function i(){return I().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new xx({next:function(a){t.enqueueAndForget((function(){return ab(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new id(rd.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new id(rd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new lb(Hp(n.path),a,{includeMetadataChanges:!0,Cu:!0});return rb(e,o)},i.next=3,Vx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function qx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ad;return e.asyncQueue.enqueueAndForget(se(I().mark((function i(){return I().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new xx({next:function(n){t.enqueueAndForget((function(){return ab(e,o)})),n.fromCache&&"server"===r.source?i.reject(new id(rd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new lb(n,a,{includeMetadataChanges:!0,Cu:!0});return rb(e,o)},i.next=3,Vx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var zx=new Map;function Kx(e,t,n){if(!n)throw new id(rd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Wx(e,t,n,r){if(!0===t&&!0===r)throw new id(rd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Gx(e){if(!zd.isDocumentKey(e))throw new id(rd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Hx(e){if(zd.isDocumentKey(e))throw new id(rd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Qx(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ed()}function Yx(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new id(rd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Qx(e);throw new id(rd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Jx(e,t){if(t<=0)throw new id(rd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var $x=function(){function e(t){var n;if(a(this,e),void 0===t.host){if(void 0!==t.ssl)throw new id(rd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new id(rd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Wx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return u(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Xx=function(){function e(t,n,r){a(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $x({}),this._settingsFrozen=!1,t instanceof Vd?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new id(rd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vd(e.options.projectId)}(t))}return u(e,[{key:"app",get:function(){if(!this._app)throw new id(rd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new id(rd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $x(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ud;switch(e.type){case"gapi":var t=e.client;return td(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new fd(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new id(rd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=zx.get(e);t&&(Jh("ComponentProvider","Removing Datastore"),zx.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Zx(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Yx(e,Xx))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Xh("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Gh.MOCK_USER;else{o=P(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new id(rd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Gh(s)}e._authCredentials=new sd(new od(o,u))}}var e_=function(){function e(t,n,r){a(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return u(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new n_(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),t_=function(){function e(t,n,r){a(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return u(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),n_=function(e){m(n,e);var t=b(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this,e,r,Hp(i)))._path=i,o.type="collection",o}return u(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new e_(this.firestore,null,new zd(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(t_);function r_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Z(e),Kx("collection","path",t),e instanceof Xx){var a=Ed.fromString.apply(Ed,[t].concat(r));return Hx(a),new n_(e,null,a)}if(!(e instanceof e_||e instanceof n_))throw new id(rd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ed.fromString.apply(Ed,[t].concat(r)));return Hx(o),new n_(e.firestore,null,o)}function i_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Z(e),1===arguments.length&&(t=md.R()),Kx("doc","path",t),e instanceof Xx){var a=Ed.fromString.apply(Ed,[t].concat(r));return Gx(a),new e_(e,null,new zd(a))}if(!(e instanceof e_||e instanceof n_))throw new id(rd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ed.fromString.apply(Ed,[t].concat(r)));return Gx(o),new e_(e.firestore,e instanceof n_?e.converter:null,new zd(o))}function a_(e,t){return e=Z(e),t=Z(t),(e instanceof e_||e instanceof n_)&&(t instanceof e_||t instanceof n_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function o_(e,t){return e=Z(e),t=Z(t),e instanceof t_&&t instanceof t_&&e.firestore===t.firestore&&nv(e._query,t._query)&&e.converter===t.converter}var u_=function(){function e(){var t=this;a(this,e),this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new nw(this,"async_queue_retry"),this.qa=function(){var e=ew();e&&Jh("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Do.Ao()};var n=ew();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qa)}return u(e,[{key:"isShuttingDown",get:function(){return this.Oa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ka(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;var t=ew();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ka(),this.Oa)return new Promise((function(){}));var n=new ad;return this.Ga((function(){return t.Oa&&t.La?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ma.push(e),t.Qa()}))}},{key:"Qa",value:function(){var e=se(I().mark((function e(){var t=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ma.length){e.next=14;break}return e.prev=1,e.next=4,this.Ma[0]();case 4:this.Ma.shift(),this.Do.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ny(e.t0)){e.next=12;break}throw e.t0;case 12:Jh("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ma.length>0&&this.Do.To((function(){return t.Qa()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.ka.then((function(){return t.Ba=!0,e().catch((function(e){t.$a=e,t.Ba=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw $h("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ba=!1,e}))}));return this.ka=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);var i=Jw.createAndSchedule(this,e,t,n,(function(e){return r.ja(e)}));return this.Fa.push(i),i}},{key:"Ka",value:function(){this.$a&&ed()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Wa",value:function(){var e=se(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ka,e.next=3,t;case 3:if(t!==this.ka){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"za",value:function(e){var t,n=l(this.Fa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ha",value:function(e){var t=this;return this.Wa().then((function(){t.Fa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=l(t.Fa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Wa()}))}},{key:"Ja",value:function(e){this.Ua.push(e)}},{key:"ja",value:function(e){var t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}]),e}();function s_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=l(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var c_=function(){function e(){a(this,e),this._progressObserver={},this._taskCompletionResolver=new ad,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return u(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),l_=function(e){m(n,e);var t=b(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this,e,r,i)).type="firestore",o._queue=new u_,o._persistenceKey="name"in e?e.name:"[DEFAULT]",o}return u(n,[{key:"_terminate",value:function(){return this._firestoreClient||h_(this),this._firestoreClient.terminate()}}]),n}(Xx);function f_(e){return e._firestoreClient||h_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function h_(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ud(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Ex(e._authCredentials,e._appCheckCredentials,e._queue,r)}function d_(e,t,n){var r=new ad;return e.asyncQueue.enqueue(se(I().mark((function i(){return I().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Sx(e,n);case 3:return i.next=5,Nx(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===rd.FAILED_PRECONDITION||e.code===rd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function p_(e){return function(e){return e.asyncQueue.enqueue(se(I().mark((function t(){var n,r;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Lx(e);case 2:return n=t.sent,t.next=5,Fx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=nd(e);return t.fu.delete(0),cw(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(f_(e=Yx(e,l_)))}function v_(e){return function(e){return e.asyncQueue.enqueue(se(I().mark((function t(){var n,r;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Lx(e);case 2:return n=t.sent,t.next=5,Fx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=nd(t)).fu.add(0),e.next=4,fw(n);case 4:n.wu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(f_(e=Yx(e,l_)))}function m_(e,t){var n=f_(e=Yx(e,l_)),r=new c_;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new _x(e,t)}(function(e,t){if(e instanceof Uint8Array)return bx(e,t);if(e instanceof ArrayBuffer)return bx(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,tw(t));e.asyncQueue.enqueueAndForget(se(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=mx,t.next=3,Ux(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function y_(e,t){return function(e,t){return e.asyncQueue.enqueue(se(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=nd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,Mx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(f_(e=Yx(e,l_)),t).then((function(t){return t?new t_(e,null,t.query):null}))}function g_(e){if(e._initialized||e._terminated)throw new id(rd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var k_=function(){function e(){a(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new id(rd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cd(n)}return u(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var w_=function(){function e(t){a(this,e),this._byteString=t}return u(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ad.fromBase64String(t))}catch(t){throw new id(rd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ad.fromUint8Array(t))}}]),e}(),b_=u((function e(t){a(this,e),this._methodName=t})),x_=function(){function e(t,n){if(a(this,e),!isFinite(t)||t<-90||t>90)throw new id(rd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new id(rd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return u(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return yd(this._lat,e._lat)||yd(this._long,e._long)}}]),e}(),__=/^__.*__$/,T_=function(){function e(t,n,r){a(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return u(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Lv(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ov(e,this.data,t,this.fieldTransforms)}}]),e}(),I_=function(){function e(t,n,r){a(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return u(e,[{key:"toMutation",value:function(e,t){return new Lv(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function E_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ed()}}var S_=function(){function e(t,n,r,i,o,u){a(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Ya(),this.fieldTransforms=o||[],this.fieldMask=u||[]}return u(e,[{key:"path",get:function(){return this.settings.path}},{key:"Xa",get:function(){return this.settings.Xa}},{key:"Za",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"tc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.nc(e),r}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.Ya(),r}},{key:"ic",value:function(e){return this.Za({path:void 0,ec:!0})}},{key:"rc",value:function(e){return H_(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ya",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.nc(this.path.get(e))}},{key:"nc",value:function(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(E_(this.Xa)&&__.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}]),e}(),C_=function(){function e(t,n,r){a(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||tw(t)}return u(e,[{key:"ac",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new S_({Xa:e,methodName:t,uc:n,path:Cd.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function N_(e){var t=e._freezeSettings(),n=tw(e._databaseId);return new C_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function A_(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ac(a.merge||a.mergeFields?2:0,t,n,i);z_("Data must be an object, but it was:",o,r);var u,s,c=B_(r,o);if(a.merge)u=new Nd(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var f,h=[],d=l(a.mergeFields);try{for(d.s();!(f=d.n()).done;){var p=f.value,v=K_(t,p,n);if(!o.contains(v))throw new id(rd.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));Q_(h,v)||h.push(v)}}catch(m){d.e(m)}finally{d.f()}u=new Nd(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new T_(new fp(c),u,s)}var D_=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Xa)throw 1===e.Xa?e.rc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.rc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(b_);function P_(e,t,n){return new S_({Xa:3,uc:t.settings.uc,methodName:e._methodName,ec:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var R_=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"_toFieldTransform",value:function(e){return new Tv(e.path,new mv)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(b_),O_=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e)).cc=r,i}return u(n,[{key:"_toFieldTransform",value:function(e){var t=P_(this,e,!0),n=this.cc.map((function(e){return j_(e,t)})),r=new yv(n);return new Tv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(b_),L_=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e)).cc=r,i}return u(n,[{key:"_toFieldTransform",value:function(e){var t=P_(this,e,!0),n=this.cc.map((function(e){return j_(e,t)})),r=new kv(n);return new Tv(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(b_),M_=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e)).hc=r,i}return u(n,[{key:"_toFieldTransform",value:function(e){var t=new bv(e.M,fv(e.M,this.hc));return new Tv(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(b_);function F_(e,t,n,r){var i=e.ac(1,t,n);z_("Data must be an object, but it was:",i,r);var a=[],o=fp.empty();_d(r,(function(e,r){var u=G_(t,e,n);r=Z(r);var s=i.sc(u);if(r instanceof D_)a.push(u);else{var c=j_(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Nd(a);return new I_(o,u,i.fieldTransforms)}function U_(e,t,n,r,i,a){var o=e.ac(1,t,n),u=[K_(t,r,n)],s=[i];if(a.length%2!=0)throw new id(rd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(K_(t,a[c])),s.push(a[c+1]);for(var l=[],f=fp.empty(),h=u.length-1;h>=0;--h)if(!Q_(l,u[h])){var d=u[h],p=s[h];p=Z(p);var v=o.sc(d);if(p instanceof D_)l.push(d);else{var m=j_(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Nd(l);return new I_(f,y,o.fieldTransforms)}function V_(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return j_(n,e.ac(r?4:3,t))}function j_(e,t){if(q_(e=Z(e)))return z_("Unsupported field value:",t,e),B_(e,t);if(e instanceof b_)return function(e,t){if(!E_(t.Xa))throw t.rc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.rc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=l(e);try{for(a.s();!(n=a.n()).done;){var o=j_(n.value,t.ic(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Z(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fv(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=wd.fromDate(e);return{timestampValue:bm(t.M,n)}}if(e instanceof wd){var r=new wd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bm(t.M,r)}}if(e instanceof x_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof w_)return{bytesValue:xm(t.M,e._byteString)};if(e instanceof e_){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.rc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Im(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.rc("Unsupported field value: ".concat(Qx(e)))}(e,t)}function B_(e,t){var n={};return Td(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):_d(e,(function(e,r){var i=j_(r,t.tc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function q_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof wd||e instanceof x_||e instanceof w_||e instanceof e_||e instanceof b_)}function z_(e,t,n){if(!q_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Qx(n);throw"an object"===r?t.rc(e+" a custom object"):t.rc(e+" "+r)}}function K_(e,t,n){if((t=Z(t))instanceof k_)return t._internalPath;if("string"==typeof t)return G_(e,t);throw H_("Field path arguments must be of type string or ",e,!1,void 0,n)}var W_=new RegExp("[~\\*/\\[\\]]");function G_(e,t,n){if(t.search(W_)>=0)throw H_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return x(k_,oe(t.split(".")))._internalPath}catch(r){throw H_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function H_(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new id(rd.INVALID_ARGUMENT,u+e+s)}function Q_(e,t){return e.some((function(e){return e.isEqual(t)}))}var Y_=function(){function e(t,n,r,i,o){a(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return u(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new e_(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new J_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field($_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),J_=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"data",value:function(){return gt(y(n.prototype),"data",this).call(this)}}]),n}(Y_);function $_(e,t){return"string"==typeof t?G_(e,t):t instanceof k_?t._internalPath:t._delegate._internalPath}var X_=function(){function e(t,n){a(this,e),this.hasPendingWrites=t,this.fromCache=n}return u(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Z_=function(e){m(n,e);var t=b(n);function n(e,r,i,o,u,s){var c;return a(this,n),(c=t.call(this,e,r,i,o,s))._firestore=e,c._firestoreImpl=e,c.metadata=u,c}return u(n,[{key:"exists",value:function(){return gt(y(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new eT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field($_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Y_),eT=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return gt(y(n.prototype),"data",this).call(this,e)}}]),n}(Z_),tT=function(){function e(t,n,r,i){a(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new X_(i.hasPendingWrites,i.fromCache),this.query=r}return u(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new eT(n._firestore,n._userDataWriter,r.key,r,new X_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new id(rd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new eT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new X_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new eT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new X_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:nT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function nT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ed()}}function rT(e,t){return e instanceof Z_&&t instanceof Z_?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof tT&&t instanceof tT&&e._firestore===t._firestore&&o_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function iT(e){if(Yp(e)&&0===e.explicitOrderBy.length)throw new id(rd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var aT=u((function e(){a(this,e)}));function oT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var uT=function(e){m(n,e);var t=b(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).lc=e,o.fc=r,o.dc=i,o.type="where",o}return u(n,[{key:"_apply",value:function(e){var t=N_(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new id(rd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){gT(o,a);var s,c=[],f=l(o);try{for(f.s();!(s=f.n()).done;){var h=s.value;c.push(yT(r,e,h))}}catch(p){f.e(p)}finally{f.f()}u={arrayValue:{values:c}}}else u=yT(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||gT(o,a),u=V_(n,"where",o,"in"===a||"not-in"===a);var d=Dp.create(i,a,u);return function(e,t){if(t.S()){var n=$p(e);if(null!==n&&!n.isEqual(t.field))throw new id(rd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Jp(e);null!==r&&kT(e,t.field,r)}var i=function(e,t){var n,r=l(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(p){r.e(p)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new id(rd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new id(rd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,d),d}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new t_(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Wp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(aT);var sT=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this)).lc=e,i._c=r,i.type="orderBy",i}return u(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new id(rd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new id(rd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Bp(t,n);return function(e,t){if(null===Jp(e)){var n=$p(e);null!==n&&kT(e,n,t.field)}}(e,r),r}(e._query,this.lc,this._c);return new t_(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Wp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(aT);var cT=function(e){m(n,e);var t=b(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).type=e,o.wc=r,o.mc=i,o}return u(n,[{key:"_apply",value:function(e){return new t_(e.firestore,e.converter,tv(e._query,this.wc,this.mc))}}]),n}(aT);var lT=function(e){m(n,e);var t=b(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).type=e,o.gc=r,o.yc=i,o}return u(n,[{key:"_apply",value:function(e){var t=mT(e,this.type,this.gc,this.yc);return new t_(e.firestore,e.converter,function(e,t){return new Wp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(aT);function fT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lT("startAt",t,!0)}function hT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lT("startAfter",t,!1)}var dT=function(e){m(n,e);var t=b(n);function n(e,r,i){var o;return a(this,n),(o=t.call(this)).type=e,o.gc=r,o.yc=i,o}return u(n,[{key:"_apply",value:function(e){var t=mT(e,this.type,this.gc,this.yc);return new t_(e.firestore,e.converter,function(e,t){return new Wp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(aT);function pT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dT("endBefore",t,!1)}function vT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dT("endAt",t,!0)}function mT(e,t,n,r){if(n[0]=Z(n[0]),n[0]instanceof Y_)return function(e,t,n,r,i){if(!r)throw new id(rd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=l(Zp(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Zd(t,r.key));else{var c=r.data.field(s.field);if(Ld(c))throw new id(rd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var f=s.field.canonicalString();throw new id(rd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(f,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new jp(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=N_(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new id(rd.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new id(rd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Xp(e)&&-1!==c.indexOf("/"))throw new id(rd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ed.fromString(c));if(!zd.isDocumentKey(l))throw new id(rd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new zd(l);u.push(Zd(t,f))}else{var h=V_(n,r,c);u.push(h)}}return new jp(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function yT(e,t,n){if("string"==typeof(n=Z(n))){if(""===n)throw new id(rd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xp(t)&&-1!==n.indexOf("/"))throw new id(rd.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ed.fromString(n));if(!zd.isDocumentKey(r))throw new id(rd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Zd(e,new zd(r))}if(n instanceof e_)return Zd(e,n._key);throw new id(rd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Qx(n),"."))}function gT(e,t){if(!Array.isArray(e)||0===e.length)throw new id(rd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new id(rd.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function kT(e,t,n){if(!n.isEqual(t))throw new id(rd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var wT=function(){function e(){a(this,e)}return u(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Gd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Od(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ed()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return _d(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new x_(Rd(e.latitude),Rd(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Md(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fd(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Pd(e);return new wd(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ed.fromString(e);td(Ym(n));var r=new Vd(n.get(1),n.get(3)),i=new zd(n.popFirst(5));return r.isEqual(t)||$h("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function bT(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var xT=function(e){m(n,e);var t=b(n);function n(e){var r;return a(this,n),(r=t.call(this)).firestore=e,r}return u(n,[{key:"convertBytes",value:function(e){return new w_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new e_(this.firestore,null,t)}}]),n}(wT),_T=function(){function e(t,n){a(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=N_(t)}return u(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=TT(e,this._firestore),i=bT(r.converter,t,n),a=A_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ev.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=TT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Z(t))||t instanceof k_?U_(this._dataReader,"WriteBatch.update",i._key,t,n,o):F_(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ev.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=TT(e,this._firestore);return this._mutations=this._mutations.concat(new Bv(t._key,Ev.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new id(rd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function TT(e,t){if((e=Z(e)).firestore!==t)throw new id(rd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var IT=function(e){m(n,e);var t=b(n);function n(e){var r;return a(this,n),(r=t.call(this)).firestore=e,r}return u(n,[{key:"convertBytes",value:function(e){return new w_(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new e_(this.firestore,null,t)}}]),n}(wT);function ET(e){e=Yx(e,e_);var t=Yx(e.firestore,l_),n=f_(t),r=new IT(t);return function(e,t){var n=new ad;return e.asyncQueue.enqueueAndForget(se(I().mark((function r(){return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=se(I().mark((function e(t,n,r){var i,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=nd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ci.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new id(rd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=$w(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Mx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Z_(t,r,e._key,n,new X_(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function ST(e){e=Yx(e,t_);var t=Yx(e.firestore,l_),n=f_(t),r=new IT(t);return function(e,t){var n=new ad;return e.asyncQueue.enqueueAndForget(se(I().mark((function r(){return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=se(I().mark((function e(t,n,r){var i,a,o,u,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kk(t,n,!0);case 3:i=e.sent,a=new yb(n,i.li),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=$w(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Mx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new tT(t,r,e,n)}))}function CT(e,t,n){e=Yx(e,e_);var r=Yx(e.firestore,l_),i=bT(e.converter,t,n);return RT(r,[A_(N_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ev.none())])}function NT(e,t,n){e=Yx(e,e_);for(var r=Yx(e.firestore,l_),i=N_(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return RT(r,[("string"==typeof(t=Z(t))||t instanceof k_?U_(i,"updateDoc",e._key,t,n,o):F_(i,"updateDoc",e._key,t)).toMutation(e._key,Ev.exists(!0))])}function AT(e,t){var n=Yx(e.firestore,l_),r=i_(e),i=bT(e.converter,t);return RT(n,[A_(N_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ev.exists(!1))]).then((function(){return r}))}function DT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Z(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||s_(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(s_(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof e_)l=Yx(e.firestore,l_),f=Hp(e._key.path),c={next:function(t){n[s]&&n[s](OT(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Yx(e,t_);l=Yx(p.firestore,l_),f=p._query;var v=new IT(l);c={next:function(e){n[s]&&n[s](new tT(l,v,p,e))},error:n[s+1],complete:n[s+2]},iT(e._query)}return function(e,t,n,r){var i=new xx(r),a=new lb(t,i,n);return e.asyncQueue.enqueueAndForget(se(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=rb,t.next=3,Vx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ia(),e.asyncQueue.enqueueAndForget(se(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ab,t.next=3,Vx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(f_(l),f,h,c)}function PT(e,t){return function(e,t){var n=new xx(t);return e.asyncQueue.enqueueAndForget(se(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){nd(e).Eu.add(t),t.next()},t.next=3,Vx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ia(),e.asyncQueue.enqueueAndForget(se(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){nd(e).Eu.delete(t)},t.next=3,Vx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(f_(e=Yx(e,l_)),s_(t)?t:{next:t})}function RT(e,t){return function(e,t){var n=new ad;return e.asyncQueue.enqueueAndForget(se(I().mark((function r(){return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Sb,r.next=3,Ux(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(f_(e),t)}function OT(e,t,n){var r=n.docs.get(t._key),i=new IT(e);return new Z_(e,i,t._key,r,new X_(n.hasPendingWrites,n.fromCache),t.converter)}var LT=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,r))._firestore=e,i}return u(n,[{key:"get",value:function(e){var t=this,r=TT(e,this._firestore),i=new IT(this._firestore);return gt(y(n.prototype),"get",this).call(this,e).then((function(e){return new Z_(t._firestore,i,r._key,e._document,new X_(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){a(this,e),this._firestore=t,this._transaction=n,this._dataReader=N_(t)}return u(e,[{key:"get",value:function(e){var t=this,n=TT(e,this._firestore),r=new xT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ed();var i=e[0];if(i.isFoundDocument())return new Y_(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Y_(t._firestore,r,n._key,null,n.converter);throw ed()}))}},{key:"set",value:function(e,t,n){var r=TT(e,this._firestore),i=bT(r.converter,t,n),a=A_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=TT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Z(t))||t instanceof k_?U_(this._dataReader,"Transaction.update",i._key,t,n,o):F_(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=TT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function MT(e,t){return function(e,t){var n=new ad;return e.asyncQueue.enqueueAndForget(se(I().mark((function r(){var i;return I().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Rx(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Ix(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(f_(e=Yx(e,l_)),(function(n){return t(new LT(e,n))}))}function FT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new O_("arrayUnion",t)}function UT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new L_("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Hh=e}(je),Re(new ce("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new l_(i,new cd(e.getProvider("auth-internal")),new dd(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Ge(Wh,"3.4.8",e),Ge(Wh,"3.4.8","esm2017")}();function VT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new id("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function jT(){if("undefined"===typeof Uint8Array)throw new id("unimplemented","Uint8Arrays are not available in this environment.")}function BT(){if("undefined"==typeof atob)throw new id("unimplemented","Blobs are unavailable in Firestore in this environment.")}var qT=function(){function e(t){a(this,e),this._delegate=t}return u(e,[{key:"toBase64",value:function(){return BT(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return jT(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return BT(),new e(w_.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return jT(),new e(w_.fromUint8Array(t))}}]),e}();function zT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=l(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var KT=function(){function e(){a(this,e)}return u(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){g_(e=Yx(e,l_));var n=f_(e),r=e._freezeSettings(),i=new wx;return d_(n,i,new gx(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){g_(e=Yx(e,l_));var t=f_(e),n=e._freezeSettings(),r=new wx;return d_(t,r,new kx(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new id(rd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ad;return e._queue.enqueueAndForgetEvenWhileRestricted(se(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=se(I().mark((function e(t){var n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ey.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ey.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(rk(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),WT=function(){function e(t,n,r){var i=this;a(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Vd||(this._appCompat=t)}return u(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Xh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Zx(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return p_(this._delegate)}},{key:"disableNetwork",value:function(){return v_(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Wx("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new ad;return e.asyncQueue.enqueueAndForget(se(I().mark((function n(){return I().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Ub,n.next=3,Ux(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(f_(e=Yx(e,l_)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return PT(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new id("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new aI(this,r_(this._delegate,e))}catch(t){throw $T(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new JT(this,i_(this._delegate,e))}catch(t){throw $T(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new nI(this,function(e,t){if(e=Yx(e,Xx),Kx("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new id(rd.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new t_(e,null,function(e){return new Wp(Ed.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw $T(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return MT(this._delegate,(function(n){return e(new HT(t,n))}))}},{key:"batch",value:function(){var e=this;return f_(this._delegate),new QT(new _T(this._delegate,(function(t){return RT(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return m_(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return y_(this._delegate,e).then((function(e){return e?new nI(t,e):null}))}}]),e}(),GT=function(e){m(n,e);var t=b(n);function n(e){var r;return a(this,n),(r=t.call(this)).firestore=e,r}return u(n,[{key:"convertBytes",value:function(e){return new qT(new w_(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return JT.forKey(t,this.firestore,null)}}]),n}(wT);var HT=function(){function e(t,n){a(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new GT(t)}return u(e,[{key:"get",value:function(e){var t=this,n=oI(e);return this._delegate.get(n).then((function(e){return new eI(t._firestore,new Z_(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=oI(e);return n?(VT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=oI(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=oI(e);return this._delegate.delete(t),this}}]),e}(),QT=function(){function e(t){a(this,e),this._delegate=t}return u(e,[{key:"set",value:function(e,t,n){var r=oI(e);return n?(VT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=oI(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=oI(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),YT=function(){function e(t,n,r){a(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return u(e,[{key:"fromFirestore",value:function(e,t){var n=new eT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new tI(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new GT(t),n),i.set(n,a)),a}}]),e}();YT.INSTANCES=new WeakMap;var JT=function(){function e(t,n){a(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new GT(t)}return u(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new aI(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new aI(this.firestore,r_(this._delegate,e))}catch(t){throw $T(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Z(e))instanceof e_&&a_(this._delegate,e)}},{key:"set",value:function(e,t){t=VT("DocumentReference.set",t);try{return t?CT(this._delegate,e,t):CT(this._delegate,e)}catch(n){throw $T(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?NT(this._delegate,e):NT.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw $T(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return RT(Yx(e.firestore,l_),[new Bv(e._key,Ev.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=XT(n),a=ZT(n,(function(t){return new eI(e.firestore,new Z_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return DT(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?ET(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Yx(e,e_);var t=Yx(e.firestore,l_);return Bx(f_(t),e._key,{source:"server"}).then((function(n){return OT(t,e,n)}))}(this._delegate):function(e){e=Yx(e,e_);var t=Yx(e.firestore,l_);return Bx(f_(t),e._key).then((function(n){return OT(t,e,n)}))}(this._delegate),t.then((function(e){return new eI(n.firestore,new Z_(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(YT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new id("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new e_(n._delegate,r,new zd(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new e_(n._delegate,r,t))}}]),e}();function $T(e,t,n){return e.message=e.message.replace(t,n),e}function XT(e){var t,n=l(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!zT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function ZT(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=zT(e[0])?e[0]:zT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var eI=function(){function e(t,n){a(this,e),this._firestore=t,this._delegate=n}return u(e,[{key:"ref",get:function(){return new JT(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return rT(this._delegate,e._delegate)}}]),e}(),tI=function(e){m(n,e);var t=b(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ed()}(void 0!==t),t}}]),n}(eI),nI=function(){function e(t,n){a(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new GT(t)}return u(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,oT(this._delegate,function(e,t,n){var r=t,i=$_("where",e);return new uT(i,r,n)}(t,n,r)))}catch(i){throw $T(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,oT(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=$_("orderBy",e);return new sT(n,t)}(t,n)))}catch(r){throw $T(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,oT(this._delegate,function(e){return Jx("limit",e),new cT("limit",e,"F")}(t)))}catch(n){throw $T(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,oT(this._delegate,function(e){return Jx("limitToLast",e),new cT("limitToLast",e,"L")}(t)))}catch(n){throw $T(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,oT(this._delegate,fT.apply(void 0,arguments)))}catch(t){throw $T(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,oT(this._delegate,hT.apply(void 0,arguments)))}catch(t){throw $T(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,oT(this._delegate,pT.apply(void 0,arguments)))}catch(t){throw $T(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,oT(this._delegate,vT.apply(void 0,arguments)))}catch(t){throw $T(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return o_(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?ST(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Yx(e,t_);var t=Yx(e.firestore,l_),n=f_(t),r=new IT(t);return qx(n,e._query,{source:"server"}).then((function(n){return new tT(t,r,e,n)}))}(this._delegate):function(e){e=Yx(e,t_);var t=Yx(e.firestore,l_),n=f_(t),r=new IT(t);return iT(e._query),qx(n,e._query).then((function(n){return new tT(t,r,e,n)}))}(this._delegate),t.then((function(e){return new iI(n.firestore,new tT(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=XT(n),a=ZT(n,(function(t){return new iI(e.firestore,new tT(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return DT(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(YT.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),rI=function(){function e(t,n){a(this,e),this._firestore=t,this._delegate=n}return u(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new tI(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),iI=function(){function e(t,n){a(this,e),this._firestore=t,this._delegate=n}return u(e,[{key:"query",get:function(){return new nI(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new tI(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new rI(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new tI(n._firestore,r))}))}},{key:"isEqual",value:function(e){return rT(this._delegate,e._delegate)}}]),e}(),aI=function(e){m(n,e);var t=b(n);function n(e,r){var i;return a(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return u(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new JT(this.firestore,e):null}},{key:"doc",value:function(e){try{return new JT(this.firestore,void 0===e?i_(this._delegate):i_(this._delegate,e))}catch(t){throw $T(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return AT(this._delegate,e).then((function(e){return new JT(t.firestore,e)}))}},{key:"isEqual",value:function(e){return a_(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(YT.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(nI);function oI(e){return Yx(e,e_)}var uI=function(){function e(){a(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=x(k_,n)}return u(e,[{key:"isEqual",value:function(e){return(e=Z(e))instanceof k_&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Cd.keyField().canonicalString())}}]),e}(),sI=function(){function e(t){a(this,e),this._delegate=t}return u(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new R_("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new D_("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=FT.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=UT.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new M_("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),cI={Firestore:WT,GeoPoint:x_,Timestamp:wd,Blob:qT,Transaction:HT,WriteBatch:QT,DocumentReference:JT,DocumentSnapshot:eI,Query:nI,QueryDocumentSnapshot:tI,QuerySnapshot:iI,CollectionReference:aI,FieldPath:uI,FieldValue:sI,setLogLevel:function(e){!function(e){Qh.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ce("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},cI)))}(e,(function(e,t){return new WT(e,t,new KT)})),e.registerVersion("@firebase/firestore-compat","0.1.17")}(mt);Ge("firebase","9.6.11","app");var lI,fI=mt.initializeApp({apiKey:"AIzaSyCQ_wHWUdVLm18bKFeOIVwiiojH-BVaKEk",authDomain:"companylunch-917df.firebaseapp.com",projectId:"companylunch-917df",storageBucket:"companylunch-917df.appspot.com",messagingSenderId:"636857077731",appId:"1:636857077731:web:cc6102baf77576bb9b5ad6"}),hI=mt.firestore(),dI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return Oe(e,"firestore").getImmediate()}(fI),pI=dI;function vI(){return vI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vI.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(lI||(lI={}));var mI=function(e){return e};var yI="beforeunload",gI="popstate";function kI(e){e.preventDefault(),e.returnValue=""}function wI(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function bI(){return Math.random().toString(36).substr(2,8)}function xI(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function _I(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var TI=(0,t.createContext)(null);var II=(0,t.createContext)(null);var EI=(0,t.createContext)({outlet:null,matches:[]});function SI(e,t){if(!e)throw new Error(t)}function CI(e,t,n){void 0===n&&(n="/");var r=MI(("string"===typeof t?_I(t):t).pathname||"/",n);if(null==r)return null;var i=NI(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=RI(i[o],r);return a}function NI(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||SI(!1),a.relativePath=a.relativePath.slice(r.length));var o=FI([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&SI(!1),NI(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:PI(o,e.index),routesMeta:u})})),t}var AI=/^:\w+$/,DI=function(e){return"*"===e};function PI(e,t){var n=e.split("/"),r=n.length;return n.some(DI)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!DI(e)})).reduce((function(e,t){return e+(AI.test(t)?3:""===t?1:10)}),r)}function RI(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=OI({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:FI([i,l.pathname]),pathnameBase:UI(FI([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=FI([i,l.pathnameBase]))}return a}function OI(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=d(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function LI(e,t,n){var r,i="string"===typeof e?_I(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?_I(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:VI(a),hash:jI(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function MI(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var FI=function(e){return e.join("/").replace(/\/\/+/g,"/")},UI=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},VI=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},jI=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function BI(e){qI()||SI(!1);var n=(0,t.useContext)(TI),r=n.basename,i=n.navigator,a=WI(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?_I(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?r+(f?"/":""):FI([r,u])}return i.createHref({pathname:c,search:s,hash:o})}function qI(){return null!=(0,t.useContext)(II)}function zI(){return qI()||SI(!1),(0,t.useContext)(II).location}function KI(){qI()||SI(!1);var e=(0,t.useContext)(TI),n=e.basename,r=e.navigator,i=(0,t.useContext)(EI).matches,a=zI().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,t.useRef)(!1);(0,t.useEffect)((function(){u.current=!0}));var s=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),u.current)if("number"!==typeof e){var i=LI(e,JSON.parse(o),a);"/"!==n&&(i.pathname=FI([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return s}function WI(e){var n=(0,t.useContext)(EI).matches,r=zI().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return LI(e,JSON.parse(i),r)}),[e,i,r])}function GI(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)(EI.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function HI(e){SI(!1)}function QI(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?lI.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;qI()&&SI(!1);var h=UI(r),d=(0,t.useMemo)((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=_I(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,k=p.hash,w=void 0===k?"":k,b=p.state,x=void 0===b?null:b,_=p.key,T=void 0===_?"default":_,I=(0,t.useMemo)((function(){var e=MI(m,h);return null==e?null:{pathname:e,search:g,hash:w,state:x,key:T}}),[h,m,g,w,x,T]);return null==I?null:(0,t.createElement)(TI.Provider,{value:d},(0,t.createElement)(II.Provider,{children:a,value:{location:I,navigationType:s}}))}function YI(e){var n=e.children,r=e.location;return function(e,n){qI()||SI(!1);var r,i=(0,t.useContext)(EI).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,zI());if(n){var c,l="string"===typeof n?_I(n):n;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||SI(!1),r=l}else r=s;var f=r.pathname||"/",h=CI(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return GI(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:FI([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:FI([u,e.pathnameBase])})})),i)}(JI(n),r)}function JI(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==HI&&SI(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=JI(e.props.children)),n.push(r)}else n.push.apply(n,JI(e.props.children))})),n}function $I(){return $I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$I.apply(this,arguments)}function XI(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var ZI=["onClick","reloadDocument","replace","state","target","to"];function eE(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,mI({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(gI,(function(){if(a)f.call(a),a=null;else{var e=lI.Pop,t=i(),n=t[0],r=t[1];if(f.length){if(null!=n){var o=s-n;o&&(a={action:e,location:r,retry:function(){y(-1*o)}},y(o))}}else m(e)}}));var o=lI.Pop,u=i(),s=u[0],c=u[1],l=wI(),f=wI();function h(e){return"string"===typeof e?e:xI(e)}function d(e,t){return void 0===t&&(t=null),mI(vI({pathname:c.pathname,hash:"",search:""},"string"===typeof e?_I(e):e,{state:t,key:bI()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},h(e)]}function v(e,t,n){return!f.length||(f.call({action:e,location:t,retry:n}),!1)}function m(e){o=e;var t=i();s=t[0],c=t[1],l.call({action:o,location:c})}function y(e){r.go(e)}null==s&&(s=0,r.replaceState(vI({},r.state,{idx:s}),""));var g={get action(){return o},get location(){return c},createHref:h,push:function e(t,i){var a=lI.Push,o=d(t,i);if(v(a,o,(function(){e(t,i)}))){var u=p(o,s+1),c=u[0],l=u[1];try{r.pushState(c,"",l)}catch(f){n.location.assign(l)}m(a)}},replace:function e(t,n){var i=lI.Replace,a=d(t,n);if(v(i,a,(function(){e(t,n)}))){var o=p(a,s),u=o[0],c=o[1];r.replaceState(u,"",c),m(i)}},go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(e){return l.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&n.addEventListener(yI,kI),function(){t(),f.length||n.removeEventListener(yI,kI)}}};return g}({window:i}));var o=a.current,u=d((0,t.useState)({action:o.action,location:o.location}),2),s=u[0],c=u[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(QI,{basename:n,children:r,location:s.location,navigationType:s.action,navigator:o})}var tE=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=XI(e,ZI),f=BI(c),h=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=KI(),s=zI(),c=WI(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||xI(s)===xI(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,t.createElement)("a",$I({},l,{href:f,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:s}))}));n(569);var nE=n(184),rE=function(){return(0,nE.jsx)("div",{children:"\ud5ec\ub85c \uc6d4\ub4dc!"})},iE=function(){return(0,nE.jsx)("div",{children:"\uacc4\uc0b0\uae30"})},aE=function(){var e=d((0,t.useState)(""),2),n=e[0],r=e[1],i=d((0,t.useState)(""),2),a=i[0],o=i[1],u=hI.collection("chatDatas"),s=function(){var e=se(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,e.next=3,AT(r_(pI,"chatDatas"),{name:n,text:a,ymd:t.getFullYear()+"-"+c(t.getUTCMonth()+1)+"-"+t.getUTCDate(),time:c(t.getHours())+":"+c(t.getMinutes())+":"+c(t.getSeconds())});case 3:m(),o("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function c(e){return("0"+e).slice(-2)}var l=d((0,t.useState)([]),2),f=l[0],h=l[1],p=d((0,t.useState)([]),2),v=(p[0],p[1],0);function m(){u.orderBy("ymd").orderBy("time").get().then((function(e){var t=[];e.forEach((function(e){t.push({key:v++,name:e.data().name,text:e.data().text,ymd:e.data().ymd}),console.log("ymd"+e.data().ymd+" / time "+e.data().time)})),h(t)}))}(0,t.useEffect)((function(){m()}),[]);var y=d((0,t.useState)(),2);y[0],y[1];return(0,nE.jsxs)("div",{children:[(0,nE.jsxs)("div",{children:[" \uc544\uc774\ub514 :",(0,nE.jsx)("input",{onChange:function(e){r(e.target.value)},value:n})]}),(0,nE.jsxs)("div",{children:[" \ucc44\ud305 :",(0,nE.jsx)("input",{onChange:function(e){o(e.target.value)},value:a})]}),(0,nE.jsx)("button",{onClick:function(){o("")},children:"\ucd08\uae30\ud654"}),(0,nE.jsx)("button",{onClick:s,children:"\uc5c5\ub85c\ub4dc"}),(0,nE.jsx)("table",{children:(0,nE.jsx)("tbody",{children:f.map((function(e,t){var n=t>0?f[t-1]:null;return console.log(t),t>0&&n.ymd!=e.ymd||0==t?(0,nE.jsx)("tr",{children:(0,nE.jsxs)("td",{colSpan:2,children:[" ",(0,nE.jsxs)("div",{children:["--------------- ",e.ymd,"-------------------"]})]})},t):function(e){return(0,nE.jsxs)("tr",{children:[(0,nE.jsx)("td",{children:(0,nE.jsxs)("div",{className:"chat-name",children:[" ",e.name," "]})}),(0,nE.jsx)("td",{children:(0,nE.jsxs)("div",{className:"speech-bubble",children:[" ",e.text]})})]},e.key)}(e)}))})})]})};var oE=function(){return(0,t.useEffect)((function(){var e=hI.collection("testData");e.doc("rynSY9atAdqaqxWeiluS").get().then((function(e){console.log(e.data()),console.log(e.id)})),e.get().then((function(e){e.forEach((function(e){console.log(e.data()),console.log(e.id)}))}))})),(0,nE.jsxs)(eE,{children:[(0,nE.jsxs)("div",{className:"black-nav",children:[(0,nE.jsx)(tE,{to:"/CompanyLunch",children:(0,nE.jsx)("button",{className:"nav-button",children:"\ud648"})}),(0,nE.jsx)(tE,{to:"/CompanyLunch/Chat",children:(0,nE.jsx)("button",{className:"nav-button",children:"\ucc44\ud305"})})]}),(0,nE.jsxs)(YI,{children:[(0,nE.jsx)(HI,{exact:!0,path:"/CompanyLunch",element:(0,nE.jsx)(rE,{})}),(0,nE.jsx)(HI,{exact:!0,path:"/CompanyLunch/Calculate",element:(0,nE.jsx)(iE,{})}),(0,nE.jsx)(HI,{exact:!0,path:"/CompanyLunch/Chat",element:(0,nE.jsx)(aE,{})})]})]})},uE=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.render((0,nE.jsx)(t.StrictMode,{children:(0,nE.jsx)(oE,{})}),document.getElementById("root")),uE()}()}();
//# sourceMappingURL=main.1ee2887b.js.map